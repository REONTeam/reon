<?php
// SPDX-License-Identifier: MIT

// Cross-region name / message / region conversion helpers for Pokémon ranking,
// battle tower, and related data.



    /**
     * Lightweight debug logger for name/region conversion.
     * Disabled by default unless BXT_ENABLE_NAME_CONV_DEBUG is defined and true.
     */
    function bxt_debug(string $msg): void
    {
        // Only log when explicitly enabled to avoid flooding logs.
        if (!defined('BXT_ENABLE_NAME_CONV_DEBUG') || !BXT_ENABLE_NAME_CONV_DEBUG) {
            return;
        }
    }    /**
     * Return [min,max] supported player_region for a given game-region.
     *
     * Must mirror the bounds in bxt_value_validation.php.
     *
     * @return array{0:int,1:int}|null
     */
    function bxt_get_player_region_bounds_for_download(string $region): ?array
    {
        switch (strtolower($region)) {
            case 'j': return [1, 47];
            case 'e': return [1, 63];
            case 'p': return [1, 40];
            case 'u': return [1, 25];
            case 'f': return [1, 70];
            case 'd': return [1, 74];
            case 's': return [1, 57];
            case 'i': return [1, 138];
            default:  return null;
        }
    }

    /**
     * Map a source player_region into the destination region’s supported range.
     *
     * Once the destination bounds are exceeded, we roll over starting from 1 and
     * repeat as needed, e.g. for E (1..63):
     *   1 -> 1, 63 -> 63, 64 -> 1, 65 -> 2, ...
     */
    function bxt_map_player_region_for_download(
        string $downloadRegion,
        string $sourceRegion,
        int $playerRegion
    ): int {
        $bounds = bxt_get_player_region_bounds_for_download($downloadRegion);
        if ($bounds === null) {
            return $playerRegion;
        }

        [$min, $max] = $bounds;
        $range = $max - $min + 1;

        if ($range <= 0 || $playerRegion <= 0) {
            return $playerRegion;
        }

        $offset0 = ($playerRegion - $min) % $range;
        if ($offset0 < 0) {
            $offset0 += $range;
        }
        return $min + $offset0;
    }

    /**
     * Sterilise ZIP for cross-region download: always "000" = 0xF6F6F6.
     */
    function bxt_sanitise_zip_for_cross_region(?string $zip): ?string
    {
        if ($zip === null) {
            return null;
        }
        return str_repeat("\xF6", 3);
    }

    /**
     * Load encoding JSON via existing helper, or [] on failure.
     *
     * @return array<string,mixed>
     */
    function bxt_load_encoding_json_safe(): array
    {
        if (function_exists('bxt_load_encoding_json')) {
            $cfg = bxt_load_encoding_json();
            return is_array($cfg) ? $cfg : [];
        }
        return [];
    }

    /**
     * Simple one-byte-per-char decoder for name/message fields.
     * Uses the given table id from bxt_encoding.json and stops at 0x50/0x00.
     */
    function bxt_hardcoded_encoding_table(string $tableId): ?array {
    static $tables = null;
    if ($tables === null) {
        $tables = [
            'jp' => [
                '01' => 'イ゙',
                '02' => 'ヴ',
                '03' => 'エ゙',
                '04' => 'オ゙',
                '05' => 'ガ',
                '06' => 'ギ',
                '07' => 'グ',
                '08' => 'ゲ',
                '09' => 'ゴ',
                '0A' => 'ザ',
                '0B' => 'ジ',
                '0C' => 'ズ',
                '0D' => 'ゼ',
                '0E' => 'ゾ',
                '0F' => 'ダ',
                '10' => 'ヂ',
                '11' => 'ヅ',
                '12' => 'デ',
                '13' => 'ド',
                '19' => 'バ',
                '1A' => 'ビ',
                '1B' => 'ブ',
                '1C' => 'ボ',
                '20' => 'イ゚',
                '21' => 'あ゙',
                '26' => 'が',
                '27' => 'ぎ',
                '28' => 'ぐ',
                '29' => 'げ',
                '2A' => 'ご',
                '2B' => 'ざ',
                '2C' => 'じ',
                '2D' => 'ず',
                '2E' => 'ぜ',
                '2F' => 'ぞ',
                '30' => 'だ',
                '31' => 'ぢ',
                '32' => 'づ',
                '33' => 'で',
                '34' => 'ど',
                '39' => 'ぼ',
                '3A' => 'ぱ',
                '3B' => 'ぴ',
                '3C' => 'ぷ',
                '3D' => 'ぺ',
                '40' => 'パ',
                '41' => 'ピ',
                '42' => 'プ',
                '43' => 'ポ',
                '44' => 'ぱ',
                '45' => 'ぴ',
                '46' => 'ぷ',
                '47' => 'ぺ',
                '48' => 'ぽ',
                '4D' => 'も゙',
                '14' => '？',
                '15' => '？',
                '16' => '？',
                '35' => 'ば',
                '36' => 'び',
                '37' => 'ぶ',
                '38' => 'べ',
                '3E' => 'ぽ',
                '70' => '「',
                '71' => '」',
                '72' => '『',
                '73' => '』',
                '74' => '・',
                '75' => '…',
                '7F' => ' ',
                '80' => 'ア',
                '81' => 'イ',
                '82' => 'ウ',
                '83' => 'エ',
                '84' => 'オ',
                '85' => 'カ',
                '86' => 'キ',
                '87' => 'ク',
                '88' => 'ケ',
                '89' => 'コ',
                '8A' => 'サ',
                '8B' => 'シ',
                '8C' => 'ス',
                '8D' => 'セ',
                '8E' => 'ソ',
                '8F' => 'タ',
                '90' => 'チ',
                '91' => 'ツ',
                '92' => 'テ',
                '93' => 'ト',
                '94' => 'ナ',
                '95' => 'ニ',
                '96' => 'ヌ',
                '97' => 'ネ',
                '98' => 'ノ',
                '99' => 'ハ',
                '9A' => 'ヒ',
                '9B' => 'フ',
                '9C' => 'ホ',
                '9D' => 'マ',
                '9E' => 'ミ',
                '9F' => 'ム',
                'A0' => 'メ',
                'A1' => 'モ',
                'A2' => 'ヤ',
                'A3' => 'ユ',
                'A4' => 'ヨ',
                'A5' => 'ラ',
                'A6' => 'ル',
                'A7' => 'レ',
                'A8' => 'ロ',
                'A9' => 'ワ',
                'AA' => 'ヲ',
                'AB' => 'ン',
                'AC' => 'ッ',
                'AD' => 'ャ',
                'AE' => 'ュ',
                'AF' => 'ョ',
                'B0' => 'ィ',
                'B1' => 'あ',
                'B2' => 'い',
                'B3' => 'う',
                'B4' => 'え',
                'B5' => 'お',
                'B6' => 'か',
                'B7' => 'き',
                'B8' => 'く',
                'B9' => 'け',
                'BA' => 'こ',
                'BB' => 'さ',
                'BC' => 'し',
                'BD' => 'す',
                'BE' => 'せ',
                'BF' => 'そ',
                'C0' => 'た',
                'C1' => 'ち',
                'C2' => 'つ',
                'C3' => 'て',
                'C4' => 'と',
                'C5' => 'な',
                'C6' => 'に',
                'C7' => 'ぬ',
                'C8' => 'ね',
                'C9' => 'の',
                'CA' => 'は',
                'CB' => 'ひ',
                'CC' => 'ふ',
                'CD' => 'へ',
                'CE' => 'ほ',
                'CF' => 'ま',
                'D0' => 'み',
                'D1' => 'む',
                'D2' => 'め',
                'D3' => 'も',
                'D4' => 'や',
                'D5' => 'ゆ',
                'D6' => 'よ',
                'D7' => 'ら',
                'D8' => 'リ',
                'D9' => 'る',
                'DA' => 'れ',
                'DB' => 'ろ',
                'DC' => 'わ',
                'DD' => 'を',
                'DE' => 'ん',
                'DF' => 'っ',
                'E0' => 'ゃ',
                'E1' => 'ゅ',
                'E2' => 'ょ',
                'E3' => 'ー',
                'E4' => 'ﾟ',
                'E5' => 'ﾞ',
                'E6' => '?',
                'E7' => '!',
                'E8' => '。',
                'E9' => 'ァ',
                'EA' => 'ゥ',
                'EB' => 'ェ',
                'EC' => '▷',
                'ED' => '▶',
                'EE' => '▼',
                'EF' => '♂',
                'F0' => '円',
                'F1' => 'x',
                'F2' => '.',
                'F3' => '/',
                'F4' => 'ォ',
                'F5' => '♀',
                'F6' => '0',
                'F7' => '1',
                'F8' => '2',
                'F9' => '3',
                'FA' => '4',
                'FB' => '5',
                'FC' => '6',
                'FD' => '7',
                'FE' => '8',
                'FF' => '9',
                '50' => '',
                '00' => '',
            ],
            'en' => [
                '54' => 'POKé',
                '70' => 'PO',
                '71' => 'Ké',
                '72' => '“',
                '73' => '”',
                '75' => '…',
                '7F' => ' ',
                '80' => 'A',
                '81' => 'B',
                '82' => 'C',
                '83' => 'D',
                '84' => 'E',
                '85' => 'F',
                '86' => 'G',
                '87' => 'H',
                '88' => 'I',
                '89' => 'J',
                '8A' => 'K',
                '8B' => 'L',
                '8C' => 'M',
                '8D' => 'N',
                '8E' => 'O',
                '8F' => 'P',
                '90' => 'Q',
                '91' => 'R',
                '92' => 'S',
                '93' => 'T',
                '94' => 'U',
                '95' => 'V',
                '96' => 'W',
                '97' => 'X',
                '98' => 'Y',
                '99' => 'Z',
                '9A' => '(',
                '9B' => ')',
                '9C' => ':',
                '9D' => ';',
                '9E' => '[',
                '9F' => ']',
                'A0' => 'a',
                'A1' => 'b',
                'A2' => 'c',
                'A3' => 'd',
                'A4' => 'e',
                'A5' => 'f',
                'A6' => 'g',
                'A7' => 'h',
                'A8' => 'i',
                'A9' => 'j',
                'AA' => 'k',
                'AB' => 'l',
                'AC' => 'm',
                'AD' => 'n',
                'AE' => 'o',
                'AF' => 'p',
                'B0' => 'q',
                'B1' => 'r',
                'B2' => 's',
                'B3' => 't',
                'B4' => 'u',
                'B5' => 'v',
                'B6' => 'w',
                'B7' => 'x',
                'B8' => 'y',
                'B9' => 'z',
                'C0' => 'Ä',
                'C1' => 'Ö',
                'C2' => 'Ü',
                'C3' => 'ä',
                'C4' => 'ö',
                'C5' => 'ü',
                'E0' => '\'',
                'E1' => 'P',
                'E2' => 'M',
                'E3' => '-',
                'E6' => '?',
                'E7' => '!',
                'E8' => '.',
                'E9' => '&',
                'EA' => 'é',
                'EB' => '➞',
                'EC' => '▷',
                'ED' => '▶',
                'EE' => '▼',
                'EF' => '♂',
                'F0' => '¥',
                'F1' => 'x',
                'F2' => '.',
                'F3' => '/',
                'F4' => ',',
                'F5' => '♀',
                'F6' => '0',
                'F7' => '1',
                'F8' => '2',
                'F9' => '3',
                'FA' => '4',
                'FB' => '5',
                'FC' => '6',
                'FD' => '7',
                'FE' => '8',
                'FF' => '9',
                '50' => '',
                '00' => '',
            ],
            'fr_de' => [
                '54' => 'POKé',
                '70' => 'PO',
                '71' => 'Ké',
                '72' => '“',
                '73' => '”',
                '75' => '…',
                '7F' => ' ',
                '80' => 'A',
                '81' => 'B',
                '82' => 'C',
                '83' => 'D',
                '84' => 'E',
                '85' => 'F',
                '86' => 'G',
                '87' => 'H',
                '88' => 'I',
                '89' => 'J',
                '8A' => 'K',
                '8B' => 'L',
                '8C' => 'M',
                '8D' => 'N',
                '8E' => 'O',
                '8F' => 'P',
                '90' => 'Q',
                '91' => 'R',
                '92' => 'S',
                '93' => 'T',
                '94' => 'U',
                '95' => 'V',
                '96' => 'W',
                '97' => 'X',
                '98' => 'Y',
                '99' => 'Z',
                '9A' => '(',
                '9B' => ')',
                '9C' => ':',
                '9D' => ';',
                '9E' => '[',
                '9F' => ']',
                'A0' => 'a',
                'A1' => 'b',
                'A2' => 'c',
                'A3' => 'd',
                'A4' => 'e',
                'A5' => 'f',
                'A6' => 'g',
                'A7' => 'h',
                'A8' => 'i',
                'A9' => 'j',
                'AA' => 'k',
                'AB' => 'l',
                'AC' => 'm',
                'AD' => 'n',
                'AE' => 'o',
                'AF' => 'p',
                'B0' => 'q',
                'B1' => 'r',
                'B2' => 's',
                'B3' => 't',
                'B4' => 'u',
                'B5' => 'v',
                'B6' => 'w',
                'B7' => 'x',
                'B8' => 'y',
                'B9' => 'z',
                'BA' => 'à',
                'BB' => 'è',
                'BC' => 'é',
                'BD' => 'ù',
                'BE' => 'ß',
                'BF' => 'ç',
                'C0' => 'Ä',
                'C1' => 'Ö',
                'C2' => 'Ü',
                'C3' => 'ä',
                'C4' => 'ö',
                'C5' => 'ü',
                'C6' => 'ë',
                'C7' => 'ï',
                'C8' => 'â',
                'C9' => 'ô',
                'CA' => 'û',
                'CB' => 'ê',
                'CC' => 'î',
                'D0' => 'c\'',
                'D1' => 'd\'',
                'D2' => 'j\'',
                'D3' => 'l\'',
                'D4' => 'm\'',
                'D5' => 'n\'',
                'D6' => 'p\'',
                'D7' => 's\'',
                'D8' => '\'s',
                'D9' => 't\'',
                'DA' => 'u\'',
                'DB' => 'y\'',
                'E0' => '\'',
                'E1' => 'PK',
                'E2' => 'MN',
                'E3' => '-',
                'E4' => '+',
                'E6' => '?',
                'E7' => '!',
                'E8' => '.',
                'E9' => '&',
                'EA' => 'é',
                'EC' => '▷',
                'ED' => '▶',
                'EE' => '▼',
                'EF' => '♂',
                'F0' => '¥',
                'F1' => '×',
                'F2' => '.',
                'F3' => '/',
                'F4' => ',',
                'F5' => '♀',
                'F6' => '0',
                'F7' => '1',
                'F8' => '2',
                'F9' => '3',
                'FA' => '4',
                'FB' => '5',
                'FC' => '6',
                'FD' => '7',
                'FE' => '8',
                'FF' => '9',
                '50' => '',
                '00' => '',
            ],
            'es_it' => [
                '54' => 'POKé',
                '70' => 'PO',
                '71' => 'Ké',
                '72' => '“',
                '73' => '”',
                '75' => '…',
                '7F' => ' ',
                '80' => 'A',
                '81' => 'B',
                '82' => 'C',
                '83' => 'D',
                '84' => 'E',
                '85' => 'F',
                '86' => 'G',
                '87' => 'H',
                '88' => 'I',
                '89' => 'J',
                '8A' => 'K',
                '8B' => 'L',
                '8C' => 'M',
                '8D' => 'N',
                '8E' => 'O',
                '8F' => 'P',
                '90' => 'Q',
                '91' => 'R',
                '92' => 'S',
                '93' => 'T',
                '94' => 'U',
                '95' => 'V',
                '96' => 'W',
                '97' => 'X',
                '98' => 'Y',
                '99' => 'Z',
                '9A' => '(',
                '9B' => ')',
                '9C' => ':',
                '9D' => ';',
                '9E' => '[',
                '9F' => ']',
                'A0' => 'a',
                'A1' => 'b',
                'A2' => 'c',
                'A3' => 'd',
                'A4' => 'e',
                'A5' => 'f',
                'A6' => 'g',
                'A7' => 'h',
                'A8' => 'i',
                'A9' => 'j',
                'AA' => 'k',
                'AB' => 'l',
                'AC' => 'm',
                'AD' => 'n',
                'AE' => 'o',
                'AF' => 'p',
                'B0' => 'q',
                'B1' => 'r',
                'B2' => 's',
                'B3' => 't',
                'B4' => 'u',
                'B5' => 'v',
                'B6' => 'w',
                'B7' => 'x',
                'B8' => 'y',
                'B9' => 'z',
                'BA' => 'à',
                'BB' => 'è',
                'BC' => 'é',
                'BD' => 'ù',
                'BE' => 'À',
                'BF' => 'Á',
                'C0' => 'Ä',
                'C1' => 'Ö',
                'C2' => 'Ü',
                'C3' => 'ä',
                'C4' => 'ö',
                'C5' => 'ü',
                'C6' => 'È',
                'C7' => 'É',
                'C8' => 'Ì',
                'C9' => 'Í',
                'CA' => 'Ñ',
                'CB' => 'Ò',
                'CC' => 'Ó',
                'CD' => 'Ù',
                'CE' => 'Ú',
                'CF' => 'á',
                'D0' => 'ì',
                'D1' => 'í',
                'D2' => 'ñ',
                'D3' => 'ò',
                'D4' => 'ó',
                'D5' => 'ú',
                'D6' => 'º',
                'D7' => '&',
                'D8' => '\'d',
                'D9' => '\'l',
                'DA' => '\'m',
                'DB' => '\'r',
                'DC' => '\'s',
                'DD' => '\'t',
                'DE' => '\'v',
                'E0' => '\'',
                'E1' => 'PK',
                'E2' => 'MN',
                'E3' => '-',
                'E4' => '¿',
                'E5' => '¡',
                'E6' => '?',
                'E7' => '!',
                'E8' => '.',
                'E9' => '&',
                'EA' => 'é',
                'EB' => '▷',
                'EC' => '▶',
                'ED' => '▼',
                'EE' => '♂',
                'F0' => '¥',
                'F1' => '×',
                'F2' => '.',
                'F3' => '/',
                'F4' => ',',
                'F5' => '♀',
                'F6' => '0',
                'F7' => '1',
                'F8' => '2',
                'F9' => '3',
                'FA' => '4',
                'FB' => '5',
                'FC' => '6',
                'FD' => '7',
                'FE' => '8',
                'FF' => '9',
                '50' => '',
                '00' => '',
            ],
            'btxe_btxp_btxu_btxs_btxi_pokemon_species' => [
                '1' => 'BULBASAUR',
                '2' => 'IVYSAUR',
                '3' => 'VENUSAUR',
                '4' => 'CHARMANDER',
                '5' => 'CHARMELEON',
                '6' => 'CHARIZARD',
                '7' => 'SQUIRTLE',
                '8' => 'WARTORTLE',
                '9' => 'BLASTOISE',
                '10' => 'CATERPIE',
                '11' => 'METAPOD',
                '12' => 'BUTTERFREE',
                '13' => 'WEEDLE',
                '14' => 'KAKUNA',
                '15' => 'BEEDRILL',
                '16' => 'PIDGEY',
                '17' => 'PIDGEOTTO',
                '18' => 'PIDGEOT',
                '19' => 'RATTATA',
                '20' => 'RATICATE',
                '21' => 'SPEAROW',
                '22' => 'FEAROW',
                '23' => 'EKANS',
                '24' => 'ARBOK',
                '25' => 'PIKACHU',
                '26' => 'RAICHU',
                '27' => 'SANDSHREW',
                '28' => 'SANDSLASH',
                '29' => 'NIDORAN♀',
                '30' => 'NIDORINA',
                '31' => 'NIDOQUEEN',
                '32' => 'NIDORAN♂',
                '33' => 'NIDORINO',
                '34' => 'NIDOKING',
                '35' => 'CLEFAIRY',
                '36' => 'CLEFABLE',
                '37' => 'VULPIX',
                '38' => 'NINETALES',
                '39' => 'JIGGLYPUFF',
                '40' => 'WIGGLYTUFF',
                '41' => 'ZUBAT',
                '42' => 'GOLBAT',
                '43' => 'ODDISH',
                '44' => 'GLOOM',
                '45' => 'VILEPLUME',
                '46' => 'PARAS',
                '47' => 'PARASECT',
                '48' => 'VENONAT',
                '49' => 'VENOMOTH',
                '50' => 'DIGLETT',
                '51' => 'DUGTRIO',
                '52' => 'MEOWTH',
                '53' => 'PERSIAN',
                '54' => 'PSYDUCK',
                '55' => 'GOLDUCK',
                '56' => 'MANKEY',
                '57' => 'PRIMEAPE',
                '58' => 'GROWLITHE',
                '59' => 'ARCANINE',
                '60' => 'POLIWAG',
                '61' => 'POLIWHIRL',
                '62' => 'POLIWRATH',
                '63' => 'ABRA',
                '64' => 'KADABRA',
                '65' => 'ALAKAZAM',
                '66' => 'MACHOP',
                '67' => 'MACHOKE',
                '68' => 'MACHAMP',
                '69' => 'BELLSPROUT',
                '70' => 'WEEPINBELL',
                '71' => 'VICTREEBEL',
                '72' => 'TENTACOOL',
                '73' => 'TENTACRUEL',
                '74' => 'GEODUDE',
                '75' => 'GRAVELER',
                '76' => 'GOLEM',
                '77' => 'PONYTA',
                '78' => 'RAPIDASH',
                '79' => 'SLOWPOKE',
                '80' => 'SLOWBRO',
                '81' => 'MAGNEMITE',
                '82' => 'MAGNETON',
                '83' => 'FARFETCH\'D',
                '84' => 'DODUO',
                '85' => 'DODRIO',
                '86' => 'SEEL',
                '87' => 'DEWGONG',
                '88' => 'GRIMER',
                '89' => 'MUK',
                '90' => 'SHELLDER',
                '91' => 'CLOYSTER',
                '92' => 'GASTLY',
                '93' => 'HAUNTER',
                '94' => 'GENGAR',
                '95' => 'ONIX',
                '96' => 'DROWZEE',
                '97' => 'HYPNO',
                '98' => 'KRABBY',
                '99' => 'KINGLER',
                '100' => 'VOLTORB',
                '101' => 'ELECTRODE',
                '102' => 'EXEGGCUTE',
                '103' => 'EXEGGUTOR',
                '104' => 'CUBONE',
                '105' => 'MAROWAK',
                '106' => 'HITMONLEE',
                '107' => 'HITMONCHAN',
                '108' => 'LICKITUNG',
                '109' => 'KOFFING',
                '110' => 'WEEZING',
                '111' => 'RHYHORN',
                '112' => 'RHYDON',
                '113' => 'CHANSEY',
                '114' => 'TANGELA',
                '115' => 'KANGASKHAN',
                '116' => 'HORSEA',
                '117' => 'SEADRA',
                '118' => 'GOLDEEN',
                '119' => 'SEAKING',
                '120' => 'STARYU',
                '121' => 'STARMIE',
                '122' => 'MR. MIME',
                '123' => 'SCYTHER',
                '124' => 'JYNX',
                '125' => 'ELECTABUZZ',
                '126' => 'MAGMAR',
                '127' => 'PINSIR',
                '128' => 'TAUROS',
                '129' => 'MAGIKARP',
                '130' => 'GYARADOS',
                '131' => 'LAPRAS',
                '132' => 'DITTO',
                '133' => 'EEVEE',
                '134' => 'VAPOREON',
                '135' => 'JOLTEON',
                '136' => 'FLAREON',
                '137' => 'PORYGON',
                '138' => 'OMANYTE',
                '139' => 'OMASTAR',
                '140' => 'KABUTO',
                '141' => 'KABUTOPS',
                '142' => 'AERODACTYL',
                '143' => 'SNORLAX',
                '144' => 'ARTICUNO',
                '145' => 'ZAPDOS',
                '146' => 'MOLTRES',
                '147' => 'DRATINI',
                '148' => 'DRAGONAIR',
                '149' => 'DRAGONITE',
                '150' => 'MEWTWO',
                '151' => 'MEW',
                '152' => 'CHIKORITA',
                '153' => 'BAYLEEF',
                '154' => 'MEGANIUM',
                '155' => 'CYNDAQUIL',
                '156' => 'QUILAVA',
                '157' => 'TYPHLOSION',
                '158' => 'TOTODILE',
                '159' => 'CROCONAW',
                '160' => 'FERALIGATR',
                '161' => 'SENTRET',
                '162' => 'FURRET',
                '163' => 'HOOTHOOT',
                '164' => 'NOCTOWL',
                '165' => 'LEDYBA',
                '166' => 'LEDIAN',
                '167' => 'SPINARAK',
                '168' => 'ARIADOS',
                '169' => 'CROBAT',
                '170' => 'CHINCHOU',
                '171' => 'LANTURN',
                '172' => 'PICHU',
                '173' => 'CLEFFA',
                '174' => 'IGGLYBUFF',
                '175' => 'TOGEPI',
                '176' => 'TOGETIC',
                '177' => 'NATU',
                '178' => 'XATU',
                '179' => 'MAREEP',
                '180' => 'FLAAFFY',
                '181' => 'AMPHAROS',
                '182' => 'BELLOSSOM',
                '183' => 'MARILL',
                '184' => 'AZUMARILL',
                '185' => 'SUDOWOODO',
                '186' => 'POLITOED',
                '187' => 'HOPPIP',
                '188' => 'SKIPLOOM',
                '189' => 'JUMPLUFF',
                '190' => 'AIPOM',
                '191' => 'SUNKERN',
                '192' => 'SUNFLORA',
                '193' => 'YANMA',
                '194' => 'WOOPER',
                '195' => 'QUAGSIRE',
                '196' => 'ESPEON',
                '197' => 'UMBREON',
                '198' => 'MURKROW',
                '199' => 'SLOWKING',
                '200' => 'MISDREAVUS',
                '201' => 'UNOWN',
                '202' => 'WOBBUFFET',
                '203' => 'GIRAFARIG',
                '204' => 'PINECO',
                '205' => 'FORRETRESS',
                '206' => 'DUNSPARCE',
                '207' => 'GLIGAR',
                '208' => 'STEELIX',
                '209' => 'SNUBBULL',
                '210' => 'GRANBULL',
                '211' => 'QWILFISH',
                '212' => 'SCIZOR',
                '213' => 'SHUCKLE',
                '214' => 'HERACROSS',
                '215' => 'SNEASEL',
                '216' => 'TEDDIURSA',
                '217' => 'URSARING',
                '218' => 'SLUGMA',
                '219' => 'MAGCARGO',
                '220' => 'SWINUB',
                '221' => 'PILOSWINE',
                '222' => 'CORSOLA',
                '223' => 'REMORAID',
                '224' => 'OCTILLERY',
                '225' => 'DELIBIRD',
                '226' => 'MANTINE',
                '227' => 'SKARMORY',
                '228' => 'HOUNDOUR',
                '229' => 'HOUNDOOM',
                '230' => 'KINGDRA',
                '231' => 'PHANPY',
                '232' => 'DONPHAN',
                '233' => 'PORYGON2',
                '234' => 'STANTLER',
                '235' => 'SMEARGLE',
                '236' => 'TYROGUE',
                '237' => 'HITMONTOP',
                '238' => 'SMOOCHUM',
                '239' => 'ELEKID',
                '240' => 'MAGBY',
                '241' => 'MILTANK',
                '242' => 'BLISSEY',
                '243' => 'RAIKOU',
                '244' => 'ENTEI',
                '245' => 'SUICUNE',
                '246' => 'LARVITAR',
                '247' => 'PUPITAR',
                '248' => 'TYRANITAR',
                '249' => 'LUGIA',
                '250' => 'HO-OH',
                '251' => 'CELEBI',
            ],
            'btxf_pokemon_species' => [
                '1' => 'BULBIZARRE',
                '2' => 'HERBIZARRE',
                '3' => 'FLORIZARRE',
                '4' => 'SALAMÈCHE',
                '5' => 'REPTINCEL',
                '6' => 'DRACAUFEU',
                '7' => 'CARAPUCE',
                '8' => 'CARABAFFE',
                '9' => 'TORTANK',
                '10' => 'CHENIPAN',
                '11' => 'CHRYSACIER',
                '12' => 'PAPILUSION',
                '13' => 'ASPICOT',
                '14' => 'COCONFORT',
                '15' => 'DARDARGNAN',
                '16' => 'ROUCOOL',
                '17' => 'ROUCOUPS',
                '18' => 'ROUCARDO',
                '19' => 'RATTATA',
                '20' => 'RATTATAC',
                '21' => 'PIAFABEC',
                '22' => 'RAPASDEPIC',
                '23' => 'ABO',
                '24' => 'ARBOK',
                '25' => 'PIKACHU',
                '26' => 'RAICHU',
                '27' => 'SAPEREAU',
                '28' => 'SABLAIREAU',
                '29' => 'NIDORAN♀',
                '30' => 'NIDORINA',
                '31' => 'NIDOQUEEN',
                '32' => 'NIDORAN♂',
                '33' => 'NIDORINO',
                '34' => 'NIDOKING',
                '35' => 'MELOFÉE',
                '36' => 'MÉLODÈLE',
                '37' => 'GOUPIX',
                '38' => 'FEUNARD',
                '39' => 'RONDODOU',
                '40' => 'GRODOUDO',
                '41' => 'NOSFERAPTI',
                '42' => 'NOSFERALTO',
                '43' => 'MYSTHERBE',
                '44' => 'ORTIDE',
                '45' => 'RAFFLESIA',
                '46' => 'PARAS',
                '47' => 'PARASECT',
                '48' => 'MIMITOSS',
                '49' => 'AÉROMITE',
                '50' => 'TAUPIQUEUR',
                '51' => 'TRIOPIKEUR',
                '52' => 'MIAOUSS',
                '53' => 'PERSIAN',
                '54' => 'PSYKOKWAK',
                '55' => 'AKWAKWAK',
                '56' => 'FEROSINGE',
                '57' => 'COLOSSINGE',
                '58' => 'CANINOS',
                '59' => 'ARCANIN',
                '60' => 'PTITARD',
                '61' => 'TÊTARTE',
                '62' => 'TARTARD',
                '63' => 'ABRA',
                '64' => 'KADABRA',
                '65' => 'ALAKAZAM',
                '66' => 'MACHOC',
                '67' => 'MACHOPEUR',
                '68' => 'MACKOGNEUR',
                '69' => 'CHETIFLOR',
                '70' => 'BOUSTIFLOR',
                '71' => 'EMPIFLOR',
                '72' => 'TENTACOOL',
                '73' => 'TENTACRUEL',
                '74' => 'RACAILLOU',
                '75' => 'GRAVALANCH',
                '76' => 'GROLEM',
                '77' => 'PONYTA',
                '78' => 'GALOPA',
                '79' => 'RAMOLOSS',
                '80' => 'FLAGADOSS',
                '81' => 'MAGNÉTI',
                '82' => 'MAGNETON',
                '83' => 'CANARTICHO',
                '84' => 'DODUO',
                '85' => 'DODRIO',
                '86' => 'OTARIA',
                '87' => 'LAMANTINE',
                '88' => 'TADMORV',
                '89' => 'GROTADMORV',
                '90' => 'KOKIYAS',
                '91' => 'CRUSTABRI',
                '92' => 'FANTOMINUS',
                '93' => 'SPECTRUM',
                '94' => 'ECTOPLASMA',
                '95' => 'ONIX',
                '96' => 'SOPORIFIK',
                '97' => 'HYPNOMADE',
                '98' => 'KRABBY',
                '99' => 'KRABBOSS',
                '100' => 'VOLTORBE',
                '101' => 'ÉLECTRODE',
                '102' => 'NOEUNOEUF',
                '103' => 'NOADKOKO',
                '104' => 'OSSELAIT',
                '105' => 'OSSATUEUR',
                '106' => 'KICKLEE',
                '107' => 'TYGNON',
                '108' => 'EXCELANGUE',
                '109' => 'SMOGO',
                '110' => 'SMOGOGO',
                '111' => 'RHINOCORNE',
                '112' => 'RHINOFEROS',
                '113' => 'LEVEINARD',
                '114' => 'SAQUEDENEU',
                '115' => 'KANGOUREX',
                '116' => 'HYPOTREMPE',
                '117' => 'HYPOCÉON',
                '118' => 'POISSIRENE',
                '119' => 'POISSOROY',
                '120' => 'STARI',
                '121' => 'STAROSS',
                '122' => 'MIMIGAL',
                '123' => 'INSÉCTEUR',
                '124' => 'LUDELLE',
                '125' => 'ÉLEKABLE',
                '126' => 'MAGMAR',
                '127' => 'SCARABRUTE',
                '128' => 'TAUROS',
                '129' => 'MAGICARPE',
                '130' => 'LÉVIATOR',
                '131' => 'LOKHLASS',
                '132' => 'METAMORPH',
                '133' => 'ÉVOLI',
                '134' => 'AQUALI',
                '135' => 'VOLALI',
                '136' => 'PYROLI',
                '137' => 'PORYGON',
                '138' => 'AMONITA',
                '139' => 'AMONISTAR',
                '140' => 'KABUTO',
                '141' => 'KABUTOPS',
                '142' => 'PTERA',
                '143' => 'RONFLEX',
                '144' => 'ARTIKODIN',
                '145' => 'ÉLECTHOR',
                '146' => 'SULFURA',
                '147' => 'MINIDRACO',
                '148' => 'DRACOLOSS',
                '149' => 'DRATTAK',
                '150' => 'MEWTWO',
                '151' => 'MEW',
                '152' => 'GERMIGNON',
                '153' => 'MACRONIUM',
                '154' => 'MÉGANIUM',
                '155' => 'HÉRICENDRE',
                '156' => 'FEURISSON',
                '157' => 'TYPHLOSION',
                '158' => 'KAIMINUS',
                '159' => 'CROCRODIL',
                '160' => 'ALIGATUEUR',
                '161' => 'FOUINETTE',
                '162' => 'FOUINAR',
                '163' => 'HOOTHOOT',
                '164' => 'NOARFANG',
                '165' => 'COXY',
                '166' => 'COXYCLAQUE',
                '167' => 'MIMIGAL',
                '168' => 'MIGALOS',
                '169' => 'NOSTENFER',
                '170' => 'LOUPIO',
                '171' => 'LANTURN',
                '172' => 'PICHU',
                '173' => 'MELO',
                '174' => 'TOUDOUDOU',
                '175' => 'TOGÉPI',
                '176' => 'TOGÉTIC',
                '177' => 'NATU',
                '178' => 'XATU',
                '179' => 'WATTOUAT',
                '180' => 'LAINERGIE',
                '181' => 'PHARAMP',
                '182' => 'JOLIFLOR',
                '183' => 'MARILL',
                '184' => 'AZUMARILL',
                '185' => 'SIMULARBRE',
                '186' => 'TARPAUD',
                '187' => 'GRANDIRA',
                '188' => 'FLORA',
                '189' => 'COTONNEE',
                '190' => 'CAPUMAIN',
                '191' => 'TOURNICOTON',
                '192' => 'COTOGNE',
                '193' => 'YANMA',
                '194' => 'AXOLOTO',
                '195' => 'MARASTE',
                '196' => 'MENTALI',
                '197' => 'NOCTALI',
                '198' => 'CORNEBRE',
                '199' => 'ROIGADA',
                '200' => 'FEUFOREVE',
                '201' => 'ZARBI',
                '202' => 'QULBUTOKE',
                '203' => 'GIRAFARIG',
                '204' => 'POMDEPIK',
                '205' => 'FORETRESS',
                '206' => 'INSOLOU',
                '207' => 'SCORPLANE',
                '208' => 'STEELIX',
                '209' => 'SNUBBULL',
                '210' => 'GRANBULL',
                '211' => 'QWILFISH',
                '212' => 'SCIZOR',
                '213' => 'CARATROC',
                '214' => 'SCARHINO',
                '215' => 'FARFURET',
                '216' => 'TEDDIURSA',
                '217' => 'URSARING',
                '218' => 'LIMAGMA',
                '219' => 'VOLCAROPOD',
                '220' => 'MARCROC',
                '221' => 'COCHIGNON',
                '222' => 'CORAYON',
                '223' => 'RÉMORAID',
                '224' => 'OCTILLERY',
                '225' => 'CADOIZO',
                '226' => 'DÉMANTA',
                '227' => 'AIRMURE',
                '228' => 'MALOSSE',
                '229' => 'DEMOLOSSE',
                '230' => 'HYPOROI',
                '231' => 'PHANPY',
                '232' => 'DONPHAN',
                '233' => 'PORYGON2',
                '234' => 'CERFROUSSE',
                '235' => 'QUEULORIOR',
                '236' => 'DEBUGANT',
                '237' => 'KAPOERA',
                '238' => 'LIPPOUTI',
                '239' => 'ÉLEKID',
                '240' => 'MAGBY',
                '241' => 'ÉCREMEUH',
                '242' => 'LEUPHORIE',
                '243' => 'RAIKOU',
                '244' => 'ENTEI',
                '245' => 'SUICUNE',
                '246' => 'EMBRYLEX',
                '247' => 'YMPHECT',
                '248' => 'TYRANOCIF',
                '249' => 'LUGIA',
                '250' => 'HOOH',
                '251' => 'CÉLÉBI',
            ],
            'btxd_pokemon_species' => [
                '1' => 'BISASAM',
                '2' => 'BISAKNOSP',
                '3' => 'BISAFLOR',
                '4' => 'GLUMANDA',
                '5' => 'GLUTEXO',
                '6' => 'GLURAK',
                '7' => 'SCHIGGY',
                '8' => 'SCHILLOK',
                '9' => 'TURTOK',
                '10' => 'RAUPY',
                '11' => 'SAFCON',
                '12' => 'SMETTBO',
                '13' => 'HORNLIU',
                '14' => 'KOKUNA',
                '15' => 'BIBOR',
                '16' => 'TAUBSI',
                '17' => 'TAUBOGA',
                '18' => 'TAUBOSS',
                '19' => 'RATTFRATZ',
                '20' => 'RATTIKARL',
                '21' => 'HABITAK',
                '22' => 'IBITAK',
                '23' => 'RETTAN',
                '24' => 'ARBOK',
                '25' => 'PIKACHU',
                '26' => 'RAICHU',
                '27' => 'SANDAN',
                '28' => 'SANDAMER',
                '29' => 'NIDORAN♀',
                '30' => 'NIDORINA',
                '31' => 'NIDOQUEEN',
                '32' => 'NIDORAN♂',
                '33' => 'NIDORINO',
                '34' => 'NIDOKING',
                '35' => 'PIEPI',
                '36' => 'PIXI',
                '37' => 'VULPIX',
                '38' => 'VULNONA',
                '39' => 'PUMMELUFF',
                '40' => 'KNUDDELUFF',
                '41' => 'ZUBAT',
                '42' => 'GOLBAT',
                '43' => 'MYRAPLA',
                '44' => 'DUFLOR',
                '45' => 'GIFLOR',
                '46' => 'PARAS',
                '47' => 'PARASEK',
                '48' => 'BLUZUK',
                '49' => 'OMOT',
                '50' => 'DIGDA',
                '51' => 'DAGTRIO',
                '52' => 'MAUZI',
                '53' => 'SNOBILIKAT',
                '54' => 'ENTON',
                '55' => 'ENTO',
                '56' => 'MENKY',
                '57' => 'RASAFF',
                '58' => 'FUKANO',
                '59' => 'ARKANI',
                '60' => 'QUAPSEL',
                '61' => 'QUAPUTZI',
                '62' => 'QUAPPO',
                '63' => 'ABRA',
                '64' => 'KADABRA',
                '65' => 'SIMSALAR',
                '66' => 'MACHOLLO',
                '67' => 'MASCHOCK',
                '68' => 'MACHOMEI',
                '69' => 'KNOFENSA',
                '70' => 'ULTRIGARIA',
                '71' => 'SARZENIA',
                '72' => 'TENTACHA',
                '73' => 'TENTOXA',
                '74' => 'KLEINSTEIN',
                '75' => 'GEOROK',
                '76' => 'GEOWAZ',
                '77' => 'PONITA',
                '78' => 'GALLOPA',
                '79' => 'FLEGMON',
                '80' => 'LAHMUS',
                '81' => 'MAGNETILO',
                '82' => 'MAGNETON',
                '83' => 'PORITA',
                '84' => 'DODUO',
                '85' => 'DODRI',
                '86' => 'JUROB',
                '87' => 'JUGONG',
                '88' => 'SLEIMA',
                '89' => 'SLEIMOK',
                '90' => 'MUSCHAS',
                '91' => 'AUSTOS',
                '92' => 'NEBULAK',
                '93' => 'ALPOLLO',
                '94' => 'GENGAR',
                '95' => 'ONIX',
                '96' => 'TRAUMATO',
                '97' => 'HYPNO',
                '98' => 'KRABBY',
                '99' => 'KINGLER',
                '100' => 'VOLTOBAL',
                '101' => 'LEKTROBAL',
                '102' => 'OWEINDE',
                '103' => 'KOKOWEI',
                '104' => 'TRAGOSSO',
                '105' => 'KNOFENSA',
                '106' => 'KICKLEE',
                '107' => 'NOCKCHAN',
                '108' => 'SCHLURP',
                '109' => 'SMOGON',
                '110' => 'SMOGMOG',
                '111' => 'RHYHORN',
                '112' => 'RIZEROS',
                '113' => 'CHANEIRA',
                '114' => 'TANGELA',
                '115' => 'KANGAMA',
                '116' => 'SEEPIE',
                '117' => 'SEEMON',
                '118' => 'GOLDINI',
                '119' => 'GOLKING',
                '120' => 'STERNE',
                '121' => 'STARMIE',
                '122' => 'PANTIMOS',
                '123' => 'SICHLOR',
                '124' => 'ROSSANA',
                '125' => 'ELEKTEK',
                '126' => 'MAGMAR',
                '127' => 'PINSIR',
                '128' => 'TAUROS',
                '129' => 'KARPADOR',
                '130' => 'GARADOS',
                '131' => 'LAPRAS',
                '132' => 'DITTO',
                '133' => 'EVOLI',
                '134' => 'AQUANA',
                '135' => 'BLITZA',
                '136' => 'FLAMARA',
                '137' => 'PORYGON',
                '138' => 'AMONITAS',
                '139' => 'AMOROSO',
                '140' => 'KABUTO',
                '141' => 'KABUTOPS',
                '142' => 'AERODACTYL',
                '143' => 'RELAXO',
                '144' => 'ARKTOS',
                '145' => 'ZAPDOS',
                '146' => 'LAVADOS',
                '147' => 'DRATINI',
                '148' => 'DRAGONIR',
                '149' => 'DRAGORAN',
                '150' => 'MEWTU',
                '151' => 'MEW',
                '152' => 'ENDIVIE',
                '153' => 'LORBLATT',
                '154' => 'MEGANIUM',
                '155' => 'FEURIGEL',
                '156' => 'IGELAVAR',
                '157' => 'TORNUPTO',
                '158' => 'KARNIMANI',
                '159' => 'TYLONI',
                '160' => 'IMPOBER',
                '161' => 'WIESOR',
                '162' => 'WIESENIOR',
                '163' => 'HOOTHOOT',
                '164' => 'NOCTHU',
                '165' => 'WEBARAK',
                '166' => 'ARIADOS',
                '167' => 'LEDYBA',
                '168' => 'LEDIAN',
                '169' => 'NOSTENFER',
                '170' => 'LANTURN',
                '171' => 'LAMPUHL',
                '172' => 'PICHU',
                '173' => 'PIXIE',
                '174' => 'FLUFFELUFF',
                '175' => 'TOGEPI',
                '176' => 'TOGETIC',
                '177' => 'NATU',
                '178' => 'XATU',
                '179' => 'VOLTIKAL',
                '180' => 'FLAAFFY',
                '181' => 'AMPHAROS',
                '182' => 'BLUBELLA',
                '183' => 'MARILL',
                '184' => 'AZUMARILL',
                '185' => 'MOGELBAUM',
                '186' => 'QUAXO',
                '187' => 'HOPPSPROSS',
                '188' => 'HUBELUPF',
                '189' => 'PAPUNGH',
                '190' => 'GRIFFEL',
                '191' => 'SONNKERN',
                '192' => 'SONNFLORA',
                '193' => 'YANMA',
                '194' => 'FELINO',
                '195' => 'MORLORD',
                '196' => 'PSIANA',
                '197' => 'NACHTARA',
                '198' => 'KRAMURX',
                '199' => 'LASCHOKING',
                '200' => 'TRAUNFUGIL',
                '201' => 'ICOGNE',
                '202' => 'WOINGENAU',
                '203' => 'GIRAFARIG',
                '204' => 'TANNZA',
                '205' => 'FORSTELLKA',
                '206' => 'DUMMISEL',
                '207' => 'SKORGLA',
                '208' => 'STAHLOS',
                '209' => 'FLUFFELUFF',
                '210' => 'GRANBULL',
                '211' => 'BALDORFISH',
                '212' => 'SCHEROX',
                '213' => 'POTTROTT',
                '214' => 'SKARABORN',
                '215' => 'SNIEBEL',
                '216' => 'TEDDIURSA',
                '217' => 'URSARING',
                '218' => 'SCHNECKMAG',
                '219' => 'MAGCARGO',
                '220' => 'QUIEKEL',
                '221' => 'KEIFEL',
                '222' => 'CORASONN',
                '223' => 'REMORAID',
                '224' => 'OCTILLERY',
                '225' => 'BOTOGEL',
                '226' => 'MANTAX',
                '227' => 'PANZAERON',
                '228' => 'HUNDUSTER',
                '229' => 'HUNDEMON',
                '230' => 'SEEDRAKING',
                '231' => 'PHANPY',
                '232' => 'DONPHAN',
                '233' => 'PORYGON2',
                '234' => 'DAMHIRPLEX',
                '235' => 'FARBEAGLE',
                '236' => 'RABAUZ',
                '237' => 'KAPOERA',
                '238' => 'KUSSILLA',
                '239' => 'ELEKID',
                '240' => 'MAGBY',
                '241' => 'MILTANK',
                '242' => 'HEITEIRA',
                '243' => 'RAIKOU',
                '244' => 'ENTEI',
                '245' => 'SUICUNE',
                '246' => 'LARVITAR',
                '247' => 'PUPITAR',
                '248' => 'DESPOTAR',
                '249' => 'LUGIA',
                '250' => 'HO-OH',
                '251' => 'CELEBI',
            ],
            'btxj_pokemon_species' => [
                '1' => 'フシギダネ',
                '2' => 'フシギソウ',
                '3' => 'フシギバナ',
                '4' => 'ヒトカゲ',
                '5' => 'リザード',
                '6' => 'リザードン',
                '7' => 'ゼニガメ',
                '8' => 'カメール',
                '9' => 'カメックス',
                '10' => 'キャタピー',
                '11' => 'トランセル',
                '12' => 'バタフリー',
                '13' => 'ビードル',
                '14' => 'コクーン',
                '15' => 'スピアー',
                '16' => 'ポッポ',
                '17' => 'ピジョン',
                '18' => 'ピジョット',
                '19' => 'コラッタ',
                '20' => 'ラッタ',
                '21' => 'オニスズメ',
                '22' => 'オニドリル',
                '23' => 'アーボ',
                '24' => 'アーボック',
                '25' => 'ピカチュウ',
                '26' => 'ライチュウ',
                '27' => 'サンド',
                '28' => 'サンドパン',
                '29' => 'ニドラン♀',
                '30' => 'ニドリーナ',
                '31' => 'ニドクイン',
                '32' => 'ニドラン♂',
                '33' => 'ニドリーノ',
                '34' => 'ニドキング',
                '35' => 'ピッピ',
                '36' => 'ピクシー',
                '37' => 'ロコン',
                '38' => 'キュウコン',
                '39' => 'プリン',
                '40' => 'プクリン',
                '41' => 'ズバット',
                '42' => 'ゴルバット',
                '43' => 'ナゾノクサ',
                '44' => 'クサイハナ',
                '45' => 'ラフレシア',
                '46' => 'パラス',
                '47' => 'パラセクト',
                '48' => 'コンパン',
                '49' => 'モルフォン',
                '50' => 'ディグダ',
                '51' => 'ダグトリオ',
                '52' => 'ニャース',
                '53' => 'ペルシアン',
                '54' => 'コダック',
                '55' => 'ゴルダック',
                '56' => 'マンキー',
                '57' => 'オコリザル',
                '58' => 'ガーディ',
                '59' => 'ウインディ',
                '60' => 'ニョロモ',
                '61' => 'ニョロゾ',
                '62' => 'ニョロボン',
                '63' => 'ケーシィ',
                '64' => 'ユンゲラー',
                '65' => 'フーディン',
                '66' => 'ワンリキー',
                '67' => 'ゴーリキー',
                '68' => 'カイリキー',
                '69' => 'マダツボミ',
                '70' => 'ウツドン',
                '71' => 'ウツボット',
                '72' => 'メノクラゲ',
                '73' => 'ドククラゲ',
                '74' => 'イシツブテ',
                '75' => 'ゴローン',
                '76' => 'ゴローニャ',
                '77' => 'ポニータ',
                '78' => 'ギャロップ',
                '79' => 'ヤドン',
                '80' => 'ヤドラン',
                '81' => 'コイル',
                '82' => 'レアコイル',
                '83' => 'カモネギ',
                '84' => 'ドードー',
                '85' => 'ドードリオ',
                '86' => 'パウワウ',
                '87' => 'ジュゴン',
                '88' => 'ベトベター',
                '89' => 'ベトベトン',
                '90' => 'シェルダー',
                '91' => 'パルシェン',
                '92' => 'ゴース',
                '93' => 'ゴースト',
                '94' => 'ゲンガー',
                '95' => 'イワーク',
                '96' => 'スリープ',
                '97' => 'スリーパー',
                '98' => 'クラブ',
                '99' => 'キングラー',
                '100' => 'ビリリダマ',
                '101' => 'マルマイン',
                '102' => 'タマタマ',
                '103' => 'ナッシー',
                '104' => 'カラカラ',
                '105' => 'ガラガラ',
                '106' => 'サワムラー',
                '107' => 'エビワラー',
                '108' => 'ベロリンガ',
                '109' => 'ドガース',
                '110' => 'マタドガス',
                '111' => 'サイホーン',
                '112' => 'サイドン',
                '113' => 'ラッキー',
                '114' => 'モンジャラ',
                '115' => 'ガルーラ',
                '116' => 'タッツー',
                '117' => 'シードラ',
                '118' => 'トサキント',
                '119' => 'アズマオウ',
                '120' => 'ヒトデマン',
                '121' => 'スターミー',
                '122' => 'バリヤード',
                '123' => 'ストライク',
                '124' => 'ルージュラ',
                '125' => 'エレブー',
                '126' => 'ブーバー',
                '127' => 'カイロス',
                '128' => 'ケンタロス',
                '129' => 'コイキング',
                '130' => 'ギャラドス',
                '131' => 'ラプラス',
                '132' => 'メタモン',
                '133' => 'イーブイ',
                '134' => 'シャワーズ',
                '135' => 'サンダース',
                '136' => 'ブースター',
                '137' => 'ポリゴン',
                '138' => 'オムナイト',
                '139' => 'オムスター',
                '140' => 'カブト',
                '141' => 'カブトプス',
                '142' => 'プテラ',
                '143' => 'カビゴン',
                '144' => 'フリーザー',
                '145' => 'サンダー',
                '146' => 'ファイヤー',
                '147' => 'ミニリュウ',
                '148' => 'ハクリュー',
                '149' => 'カイリュー',
                '150' => 'ミュウツー',
                '151' => 'ミュウ',
                '152' => 'チコリータ',
                '153' => 'ベイリーフ',
                '154' => 'メガニウム',
                '155' => 'ヒノアラシ',
                '156' => 'マグマラシ',
                '157' => 'バクフーン',
                '158' => 'ワニノコ',
                '159' => 'アリゲイツ',
                '160' => 'オーダイル',
                '161' => 'オタチ',
                '162' => 'オオタチ',
                '163' => 'ホーホー',
                '164' => 'ヨルノズク',
                '165' => 'レディバ',
                '166' => 'レディアン',
                '167' => 'イトマル',
                '168' => 'アリアドス',
                '169' => 'クロバット',
                '170' => 'チョンチー',
                '171' => 'ランターン',
                '172' => 'ピチュー',
                '173' => 'ピィ',
                '174' => 'ププリン',
                '175' => 'トゲピー',
                '176' => 'トゲチック',
                '177' => 'ネイティ',
                '178' => 'ネイティオ',
                '179' => 'メリープ',
                '180' => 'モココ',
                '181' => 'デンリュウ',
                '182' => 'キレイハナ',
                '183' => 'マリル',
                '184' => 'マリルリ',
                '185' => 'ウソッキー',
                '186' => 'ニョロトノ',
                '187' => 'ハネッコ',
                '188' => 'ポポッコ',
                '189' => 'ワタッコ',
                '190' => 'エイパム',
                '191' => 'ヒマナッツ',
                '192' => 'キマワリ',
                '193' => 'ヤンヤンマ',
                '194' => 'ウパー',
                '195' => 'ヌオー',
                '196' => 'エーフィ',
                '197' => 'ブラッキー',
                '198' => 'ヤミカラス',
                '199' => 'ヤドキング',
                '200' => 'ムウマ',
                '201' => 'アンノーン',
                '202' => 'ソーナンス',
                '203' => 'キリンリキ',
                '204' => 'クヌギダマ',
                '205' => 'フォレトス',
                '206' => 'ノコッチ',
                '207' => 'グライガー',
                '208' => 'ハガネール',
                '209' => 'ブルー',
                '210' => 'グランブル',
                '211' => 'ハリーセン',
                '212' => 'ハッサム',
                '213' => 'ツボツボ',
                '214' => 'ヘラクロス',
                '215' => 'ニューラ',
                '216' => 'ヒメグマ',
                '217' => 'リングマ',
                '218' => 'マグマッグ',
                '219' => 'マグカルゴ',
                '220' => 'ウリムー',
                '221' => 'イノムー',
                '222' => 'サニーゴ',
                '223' => 'テッポウオ',
                '224' => 'オクタン',
                '225' => 'デリバード',
                '226' => 'マンタイン',
                '227' => 'エアームド',
                '228' => 'デルビル',
                '229' => 'ヘルガー',
                '230' => 'キングドラ',
                '231' => 'ゴマゾウ',
                '232' => 'ドンファン',
                '233' => 'ポリゴン２',
                '234' => 'オドシシ',
                '235' => 'ドーブル',
                '236' => 'バルキー',
                '237' => 'カポエラー',
                '238' => 'ムチュール',
                '239' => 'エレキッド',
                '240' => 'ブビィ',
                '241' => 'ミルタンク',
                '242' => 'ハピナス',
                '243' => 'ライコウ',
                '244' => 'エンテイ',
                '245' => 'スイクン',
                '246' => 'ヨーギラス',
                '247' => 'サナギラス',
                '248' => 'バンギラス',
                '249' => 'ルギア',
                '250' => 'ホウオウ',
                '251' => 'セレビィ',
            ],
        ];
    }
    return $tables[$tableId] ?? null;
}

function bxt_simple_decode_bytes_to_text(string $binary, string $tableId): string
    {
        $cfg   = bxt_load_encoding_json_safe();
        $table = null;

        if (isset($cfg[$tableId]) && is_array($cfg[$tableId])) {
            $table = $cfg[$tableId];
        } else {
            if (function_exists('bxt_hardcoded_encoding_table')) {
                $table = bxt_hardcoded_encoding_table($tableId);
            }
            if (!is_array($table)) {
                return '';
            }
        }

        $out = '';
        $len = strlen($binary);
        for ($i = 0; $i < $len; $i++) {
            $b = ord($binary[$i]);
            if ($b === 0x50 || $b === 0x00) {
                break;
            }
            $hex = strtoupper(str_pad(dechex($b), 2, '0', STR_PAD_LEFT));
            if (isset($table[$hex]) && is_string($table[$hex])) {
                $out .= $table[$hex];
            }
        }
        return $out;
    }

function bxt_simple_encode_text_to_bytes(
        string $text,
        string $tableId,
        int $maxBytes
    ): string {
        $cfg   = bxt_load_encoding_json_safe();
        $table = null;

        if (isset($cfg[$tableId]) && is_array($cfg[$tableId])) {
            $table = $cfg[$tableId];
        } else {
            if (function_exists('bxt_hardcoded_encoding_table')) {
                $table = bxt_hardcoded_encoding_table($tableId);
            }
            if (!is_array($table)) {
                return str_repeat("\x50", $maxBytes);
            }
        }

        static $reverseCache = [];
        if (!isset($reverseCache[$tableId])) {
            $rev = [];
            foreach ($table as $hex => $val) {
                if (!is_string($val) || $val === '') {
                    continue;
                }
                if (mb_strlen($val, 'UTF-8') === 1 && !isset($rev[$val])) {
                    $rev[$val] = hex2bin($hex);
                }
            }
            $reverseCache[$tableId] = $rev;
        }
        $rev = $reverseCache[$tableId];

        $fallbackByte = isset($rev['?']) ? $rev['?'] : null;

        $out = '';
        $len = mb_strlen($text, 'UTF-8');
        for ($i = 0; $i < $len; $i++) {
            $ch = mb_substr($text, $i, 1, 'UTF-8');
            if (isset($rev[$ch])) {
                $out .= $rev[$ch];
            } elseif ($fallbackByte !== null) {
                $out .= $fallbackByte;
            }
        }

        while (strlen($out) < $maxBytes) {
            $out .= "\x50";
        }

        return substr($out, 0, $maxBytes);
    }

function bxt_name_table_for_region(string $region): ?string
    {
        $region = strtolower($region);
        switch ($region) {
            case 'e':
            case 'p':
            case 'u':
                return 'en';
            case 'f':
            case 'd':
                return 'fr_de';
            case 's':
            case 'i':
                return 'es_it';
            case 'j':
                return 'jp';
            default:
                return null;
        }
    }

    /**
     * Normalise extended Latin characters for EN->JP conversion.
     *
     * E.g. "ß" -> "SS", "ä" -> "AE", "é" -> "E", "ñ" -> "N", etc.
     */
    function bxt_normalise_latin_for_jp(string $text): string
    {
            $map = [
                'ß' => 'SS',
                'ä' => 'AE',
                'ö' => 'O',
                'ü' => 'U',
                'Ä' => 'AE',
                'Ö' => 'O',
                'Ü' => 'U',
                'é' => 'E',
                'è' => 'E',
                'ê' => 'E',
                'ë' => 'E',
                'É' => 'E',
                'È' => 'E',
                'Ê' => 'E',
                'Ë' => 'E',
                'á' => 'A',
                'à' => 'A',
                'â' => 'A',
                'ã' => 'A',
                'å' => 'A',
                'Á' => 'A',
                'À' => 'A',
                'Â' => 'A',
                'Ã' => 'A',
                'Å' => 'A',
                'í' => 'I',
                'ì' => 'I',
                'î' => 'I',
                'ï' => 'I',
                'Í' => 'I',
                'Ì' => 'I',
                'Î' => 'I',
                'Ï' => 'I',
                'ó' => 'O',
                'ò' => 'O',
                'ô' => 'O',
                'õ' => 'O',
                'Ó' => 'O',
                'Ò' => 'O',
                'Ô' => 'O',
                'Õ' => 'O',
                'ú' => 'U',
                'ù' => 'U',
                'û' => 'U',
                'Ú' => 'U',
                'Ù' => 'U',
                'Û' => 'U',
                'ç' => 'C',
                'Ç' => 'C',
                'ñ' => 'N',
                'Ñ' => 'N',
                '¡' => '!',
                '¿' => '?',
                ];

        $normalized = strtr($text, $map);
        // Collapse letter+apostrophe forms like C'EST, D'ARC, etc.
        $normalized = preg_replace("/([A-Za-z])'/", '$1', $normalized);

        return $normalized;
    }

    /**
     * Core JP->EN transliteration engine.
     *
     * - $map: kana -> ROMAJI mapping
     * - $useSpecialRules:
     *   - っ/ッ -> duplicate first letter of next romaji syllable
     *   - ー   -> duplicate last letter of current romaji output
     */
    function bxt_jp_to_en_core(string $jp, array $map, bool $useSpecialRules): string
    {
        if ($jp === '') {
            return '';
        }

        $chars = preg_split('//u', $jp, -1, PREG_SPLIT_NO_EMPTY);
        if ($chars === false) {
            return '';
        }

        $out   = '';
        $count = count($chars);

        for ($i = 0; $i < $count; $i++) {
            $ch = $chars[$i];

            // ASCII digits and basic punctuation passthrough
            if (
                ($ch >= '0' && $ch <= '9') ||
                $ch === '!' ||
                $ch === '.' ||
                $ch === '/' ||
                $ch === '?'
            ) {
                $out .= $ch;
                continue;
            }

            // JP punctuation to ASCII
            if ($ch === ' ') {
                $out .= ' ';
                continue;
            }
            if ($ch === '。') {
                $out .= '.';
                continue;
            }
            if ($ch === '・') {
                $out .= '-';
                continue;
            }
            if ($ch === '「' || $ch === '『' || $ch === '」' || $ch === '』') {
                $out .= '"';
                continue;
            }
            if ($ch === '！') {
                $out .= '!';
                continue;
            }
            if ($ch === '？') {
                $out .= '?';
                continue;
            }

            // Small tsu: duplicate first consonant of next syllable
            if ($useSpecialRules && ($ch === 'っ' || $ch === 'ッ')) {
                $romajiNext = '';
                for ($j = $i + 1; $j < $count; $j++) {
                    $next = $chars[$j];

                    // Try digraph first
                    $pair = null;
                    if ($j + 1 < $count) {
                        $pair = $next . $chars[$j + 1];
                    }

                    if ($pair !== null && isset($map[$pair])) {
                        $romajiNext = $map[$pair];
                        break;
                    }

                    if (isset($map[$next])) {
                        $romajiNext = $map[$next];
                        break;
                    }
                }

                if ($romajiNext !== '') {
                    $romajiNext = strtoupper($romajiNext);
                    $first = $romajiNext[0];
                    if ($first >= 'A' && $first <= 'Z') {
                        $out .= $first;
                    }
                }

                continue;
            }

            // Long vowel mark: repeat previous Latin character
            if ($useSpecialRules && $ch === 'ー') {
                $lenOut = strlen($out);
                if ($lenOut > 0) {
                    $last = $out[$lenOut - 1];
                    if ($last >= 'A' && $last <= 'Z') {
                        $out .= $last;
                    }
                }
                continue;
            }

            $romaji = null;

            // Prefer digraphs
            if ($i + 1 < $count) {
                $pair = $ch . $chars[$i + 1];
                if (isset($map[$pair])) {
                    $romaji = $map[$pair];
                    $i++;
                }
            }

            // Fallback to single character
            if ($romaji === null) {
                if (isset($map[$ch])) {
                    $romaji = $map[$ch];
                } else {
                    // Unknown glyph: skip
                    continue;
                }
            }

            $out .= strtoupper($romaji);
        }

        // Uppercase and keep only letters, digits, space, and a small punctuation set
        $out = strtoupper($out);
        $filtered = '';
        $len = strlen($out);
        for ($i = 0; $i < $len; $i++) {
            $c = $out[$i];
            if (
                $c === ' ' ||
                $c === '!' ||
                $c === '.' ||
                $c === '/' ||
                $c === '?' ||
                ($c >= '0' && $c <= '9') ||
                ($c >= 'A' && $c <= 'Z')
            ) {
                $filtered .= $c;
            }
        }
        $out = $filtered;

        // Collapse patterns like BUBU -> BB
        $out = preg_replace('/([A-Z])U\1U/', '$1$1', $out);

        // Per-word final tweaks: REI -> RY, RI -> RY at end of word
        $parts = explode(' ', $out);
        foreach ($parts as &$p) {
            $lenp = strlen($p);
            if ($lenp >= 3 && substr($p, -3) === 'REI') {
                // Drop the EI, keep base + Y
                $p = substr($p, 0, $lenp - 2) . 'Y';
            } elseif ($lenp >= 2 && substr($p, -2) === 'RI') {
                $p = substr($p, 0, $lenp - 1) . 'Y';
            }
        }
        unset($p);

        return implode(' ', $parts);
    }

    /**
     * JP -> EN transliteration for names with three-pass tightening.
     */
    function bxt_transliterate_jp_to_en_name(string $jp, int $maxChars = 7): string
    {
        static $primaryMap = null;
        static $thirdMap   = null;

        if ($primaryMap === null) {
                        $primaryMap = [
                'ぴょ' => 'PYO',
                'ぴゅ' => 'PYU',
                'ぴゃ' => 'PYA',
                'びょ' => 'BYO',
                'びゅ' => 'BYU',
                'びゃ' => 'BYA',
                'じょ' => 'JO',
                'じゅ' => 'JU',
                'じゃ' => 'JA',
                'ぎょ' => 'GYO',
                'ぎゅ' => 'GYU',
                'ぎゃ' => 'GYA',
                'りょ' => 'RYO',
                'りゅ' => 'RYU',
                'りゃ' => 'RYA',
                'みょ' => 'MYO',
                'みゅ' => 'MYU',
                'みゃ' => 'MYA',
                'ひょ' => 'HYO',
                'ひゅ' => 'HYU',
                'ひゃ' => 'HYA',
                'にょ' => 'NYO',
                'にゅ' => 'NYU',
                'にゃ' => 'NYA',
                'ちょ' => 'CHO',
                'ちゅ' => 'CHU',
                'ちゃ' => 'CHA',
                'しょ' => 'SHO',
                'しゅ' => 'SHU',
                'しゃ' => 'SHA',
                'きょ' => 'KYO',
                'きゅ' => 'KYU',
                'きゃ' => 'KYA',
                'ピョ' => 'PYO',
                'ピュ' => 'PYU',
                'ピャ' => 'PYA',
                'ビョ' => 'BYO',
                'ビュ' => 'BYU',
                'ビャ' => 'BYA',
                'ジョ' => 'JO',
                'ジュ' => 'JU',
                'ジャ' => 'JA',
                'ギョ' => 'GYO',
                'ギュ' => 'GYU',
                'ギャ' => 'GYA',
                'リョ' => 'RYO',
                'リュ' => 'RYU',
                'リャ' => 'RYA',
                'ミョ' => 'MYO',
                'ミュ' => 'MYU',
                'ミャ' => 'MYA',
                'ヒョ' => 'HYO',
                'ヒュ' => 'HYU',
                'ヒャ' => 'HYA',
                'ニョ' => 'NYO',
                'ニュ' => 'NYU',
                'ニャ' => 'NYA',
                'チョ' => 'CHO',
                'チュ' => 'CHU',
                'チャ' => 'CHA',
                'ショ' => 'SHO',
                'シュ' => 'SHU',
                'シャ' => 'SHA',
                'キョ' => 'KYO',
                'キュ' => 'KYU',
                'キャ' => 'KYA',
                'ヴァ' => 'VA',
                'ヴィ' => 'VI',
                'ヴ' => 'VU',
                'ヴェ' => 'VE',
                'ヴォ' => 'VO',
                'ファ' => 'FA',
                'フィ' => 'FI',
                'フェ' => 'FE',
                'フォ' => 'FO',
                'ティ' => 'TI',
                'トゥ' => 'TU',
                'ディ' => 'DI',
                'ドゥ' => 'DU',
                'チェ' => 'CHE',
                'シェ' => 'SHE',
                'ウィ' => 'WI',
                'ウェ' => 'WE',
                'ウォ' => 'WO',
                'ぽ' => 'PO',
                'ぺ' => 'PE',
                'ぷ' => 'PU',
                'ぴ' => 'PI',
                'ぱ' => 'PA',
                'ぼ' => 'BO',
                'べ' => 'BE',
                'ぶ' => 'BU',
                'び' => 'BI',
                'ば' => 'BA',
                'ど' => 'DO',
                'で' => 'DE',
                'づ' => 'ZU',
                'ぢ' => 'JI',
                'だ' => 'DA',
                'ぞ' => 'ZO',
                'ぜ' => 'ZE',
                'ず' => 'ZU',
                'じ' => 'JI',
                'ざ' => 'ZA',
                'ご' => 'GO',
                'げ' => 'GE',
                'ぐ' => 'GU',
                'ぎ' => 'GI',
                'が' => 'GA',
                'わ' => 'WA',
                'ろ' => 'RO',
                'れ' => 'RE',
                'る' => 'RU',
                'り' => 'RI',
                'ら' => 'RA',
                'よ' => 'YO',
                'ゆ' => 'YU',
                'や' => 'YA',
                'も' => 'MO',
                'め' => 'ME',
                'む' => 'MU',
                'み' => 'MI',
                'ま' => 'MA',
                'ほ' => 'HO',
                'へ' => 'HE',
                'ふ' => 'FU',
                'ひ' => 'HI',
                'は' => 'HA',
                'の' => 'NO',
                'ね' => 'NE',
                'ぬ' => 'NU',
                'に' => 'NI',
                'な' => 'NA',
                'と' => 'TO',
                'て' => 'TE',
                'つ' => 'TSU',
                'ち' => 'CHI',
                'た' => 'TA',
                'そ' => 'SO',
                'せ' => 'SE',
                'す' => 'SU',
                'さ' => 'SA',
                'こ' => 'KO',
                'け' => 'KE',
                'く' => 'KU',
                'き' => 'KI',
                'か' => 'KA',
                'ツ' => 'TSU',
                'チ' => 'CHI',
                'シ' => 'SHI',
                'し' => 'SHI',
                'ポ' => 'PO',
                'ペ' => 'PE',
                'プ' => 'PU',
                'ピ' => 'PI',
                'パ' => 'PA',
                'ボ' => 'BO',
                'ベ' => 'BE',
                'ブ' => 'BU',
                'ビ' => 'BI',
                'バ' => 'BA',
                'ド' => 'DO',
                'デ' => 'DE',
                'ヅ' => 'ZU',
                'ヂ' => 'JI',
                'ダ' => 'DA',
                'ゾ' => 'ZO',
                'ゼ' => 'ZE',
                'ズ' => 'ZU',
                'ジ' => 'JI',
                'ザ' => 'ZA',
                'ゴ' => 'GO',
                'ゲ' => 'GE',
                'グ' => 'GU',
                'ギ' => 'GI',
                'ガ' => 'GA',
                'ワ' => 'WA',
                'ロ' => 'RO',
                'レ' => 'RE',
                'ル' => 'RU',
                'リ' => 'RI',
                'ラ' => 'RA',
                'ヨ' => 'YO',
                'ユ' => 'YU',
                'ヤ' => 'YA',
                'モ' => 'MO',
                'メ' => 'ME',
                'ム' => 'MU',
                'ミ' => 'MI',
                'マ' => 'MA',
                'ホ' => 'HO',
                'ヘ' => 'HE',
                'フ' => 'FU',
                'ヒ' => 'HI',
                'ハ' => 'HA',
                'ノ' => 'NO',
                'ネ' => 'NE',
                'ヌ' => 'NU',
                'ニ' => 'NI',
                'ナ' => 'NA',
                'ト' => 'TO',
                'テ' => 'TE',
                'タ' => 'TA',
                'ソ' => 'SO',
                'セ' => 'SE',
                'ス' => 'SU',
                'サ' => 'SA',
                'コ' => 'KO',
                'ケ' => 'KE',
                'ク' => 'KU',
                'キ' => 'KI',
                'カ' => 'KA',
                'ン' => 'N',
                'ん' => 'N',
                'ヲ' => 'O',
                'を' => 'O',
                'お' => 'O',
                'え' => 'E',
                'う' => 'U',
                'い' => 'I',
                'あ' => 'A',
                'オ' => 'O',
                'エ' => 'E',
                'ウ' => 'U',
                'イ' => 'I',
                'ア' => 'A',
            ];

            $thirdMap = $primaryMap;
            $thirdMap['ツ'] = 'SU';
            $thirdMap['チ'] = 'CH';
            $thirdMap['シ'] = 'SH';
        }

        $out1 = bxt_jp_to_en_core($jp, $primaryMap, true);
        if (strlen($out1) <= $maxChars) {
            return $out1;
        }

        $out2 = bxt_jp_to_en_core($jp, $primaryMap, false);
        if (strlen($out2) <= $maxChars) {
            return $out2;
        }

        $out3 = bxt_jp_to_en_core($jp, $thirdMap, false);
        if (strlen($out3) <= $maxChars) {
            return $out3;
        }

        return substr($out3, 0, $maxChars);
    }

    /**
     * Rough EN (A–Z) -> Japanese katakana converter for names.
     */
    /**
     * Collapse JP->non-J Easy Chat words to respect the 18-char slot limit.
     *
     * - Words are treated in pairs: (0,1), (2,3), ...
     * - If combined visible characters of a pair exceed 17, the right-hand word
     *   is dropped and only the left-hand word remains.
     * - Uses mb_strlen so Pokémon names with multibyte glyphs are counted
     *   correctly after transliteration.
     */
    
    /**
     * Resolve the Easy Chat table key in bxt_encoding.json for a given game region.
     *
     * Note that E/P/U share a combined Easy Chat table, while S and I each have
     * their own tables.
     */
    
    /**
     * Get the Easy Chat length table array for a given region.
     * Returns an associative array codeHex => visible_length.
     */
    function bxt_easy_chat_length_table_for_region(string $region): ?array
    {
        switch (strtolower($region)) {
            case 'j':
                return bxt_easy_chat_length_table_j();
            case 'e':
            case 'p':
            case 'u':
                return bxt_easy_chat_length_table_e();
            case 'f':
                return bxt_easy_chat_length_table_f();
            case 'd':
                return bxt_easy_chat_length_table_d();
            case 's':
                return bxt_easy_chat_length_table_s();
            case 'i':
                return bxt_easy_chat_length_table_i();
            default:
                return null;
        }
    }


    /**
     * Hardcoded Easy Chat length table for region 'j'.
     * Keys are 4-hex-digit EC codes, values are visible character lengths.
     */
    function bxt_easy_chat_length_table_j(): array
    {
        return array(
		"0000" => 0,
		"0001" => 2,
		"0002" => 4,
		"0003" => 3,
		"0004" => 4,
		"0005" => 1,
		"0006" => 3,
		"0007" => 4,
		"0008" => 3,
		"0009" => 5,
		"000A" => 4,
		"000B" => 2,
		"000C" => 2,
		"000D" => 4,
		"000E" => 2,
		"0100" => 5,
		"0101" => 2,
		"0102" => 5,
		"0103" => 3,
		"0104" => 3,
		"0105" => 2,
		"0106" => 4,
		"0107" => 5,
		"0108" => 3,
		"0109" => 2,
		"010A" => 3,
		"010B" => 4,
		"010C" => 2,
		"010D" => 4,
		"010E" => 3,
		"0200" => 5,
		"0201" => 4,
		"0202" => 4,
		"0203" => 3,
		"0204" => 4,
		"0205" => 3,
		"0206" => 4,
		"0207" => 4,
		"0208" => 3,
		"0209" => 3,
		"020A" => 2,
		"020B" => 3,
		"020C" => 3,
		"020D" => 3,
		"020E" => 2,
		"0300" => 5,
		"0301" => 4,
		"0302" => 4,
		"0303" => 4,
		"0304" => 3,
		"0305" => 2,
		"0306" => 2,
		"0307" => 4,
		"0308" => 2,
		"0309" => 3,
		"030A" => 4,
		"030B" => 3,
		"030C" => 3,
		"030D" => 3,
		"030E" => 3,
		"0400" => 4,
		"0401" => 2,
		"0402" => 5,
		"0403" => 4,
		"0404" => 4,
		"0405" => 1,
		"0406" => 2,
		"0407" => 4,
		"0408" => 4,
		"0409" => 3,
		"040A" => 3,
		"040B" => 3,
		"040C" => 3,
		"040D" => 3,
		"040E" => 2,
		"0500" => 4,
		"0501" => 3,
		"0502" => 3,
		"0503" => 3,
		"0504" => 4,
		"0505" => 2,
		"0506" => 3,
		"0507" => 4,
		"0508" => 2,
		"0509" => 3,
		"050A" => 5,
		"050B" => 3,
		"050C" => 3,
		"050D" => 3,
		"050E" => 2,
		"0600" => 5,
		"0601" => 3,
		"0602" => 3,
		"0603" => 4,
		"0604" => 3,
		"0605" => 2,
		"0606" => 4,
		"0607" => 4,
		"0608" => 2,
		"0609" => 3,
		"060A" => 4,
		"060B" => 3,
		"060C" => 4,
		"060D" => 2,
		"060E" => 2,
		"0700" => 4,
		"0701" => 3,
		"0702" => 4,
		"0703" => 4,
		"0704" => 3,
		"0705" => 1,
		"0706" => 3,
		"0707" => 4,
		"0708" => 3,
		"0709" => 3,
		"070A" => 4,
		"070B" => 3,
		"070C" => 4,
		"070D" => 2,
		"070E" => 2,
		"0800" => 4,
		"0801" => 3,
		"0802" => 4,
		"0803" => 4,
		"0804" => 3,
		"0805" => 3,
		"0806" => 4,
		"0807" => 4,
		"0808" => 4,
		"0809" => 3,
		"080A" => 3,
		"080B" => 4,
		"080C" => 3,
		"080D" => 4,
		"080E" => 2,
		"0900" => 4,
		"0901" => 3,
		"0902" => 3,
		"0903" => 4,
		"0904" => 2,
		"0905" => 3,
		"0906" => 3,
		"0907" => 4,
		"0908" => 4,
		"0909" => 3,
		"090A" => 3,
		"090B" => 4,
		"090C" => 3,
		"090D" => 3,
		"090E" => 2,
		"0A00" => 5,
		"0A01" => 2,
		"0A02" => 4,
		"0A03" => 4,
		"0A04" => 4,
		"0A05" => 3,
		"0A06" => 3,
		"0A07" => 5,
		"0A08" => 4,
		"0A09" => 3,
		"0A0A" => 4,
		"0A0B" => 3,
		"0A0C" => 3,
		"0A0D" => 3,
		"0A0E" => 3,
		"0B00" => 5,
		"0B01" => 3,
		"0B02" => 4,
		"0B03" => 4,
		"0B04" => 4,
		"0B05" => 4,
		"0B06" => 2,
		"0B07" => 5,
		"0B08" => 4,
		"0B09" => 4,
		"0B0A" => 3,
		"0B0B" => 3,
		"0B0C" => 3,
		"0B0D" => 3,
		"0B0E" => 2,
		"0C00" => 5,
		"0C01" => 4,
		"0C02" => 5,
		"0C03" => 4,
		"0C04" => 5,
		"0C05" => 3,
		"0C06" => 2,
		"0C07" => 4,
		"0C08" => 4,
		"0C09" => 3,
		"0C0A" => 3,
		"0C0B" => 3,
		"0C0C" => 2,
		"0C0D" => 3,
		"0C0E" => 2,
		"0D00" => 4,
		"0D01" => 3,
		"0D02" => 5,
		"0D03" => 3,
		"0D04" => 3,
		"0D05" => 2,
		"0D06" => 2,
		"0D07" => 4,
		"0D08" => 4,
		"0D09" => 3,
		"0D0A" => 3,
		"0D0B" => 3,
		"0D0C" => 3,
		"0D0D" => 3,
		"0D0E" => 2,
		"0E00" => 4,
		"0E01" => 3,
		"0E02" => 4,
		"0E03" => 4,
		"0E04" => 3,
		"0E05" => 3,
		"0E06" => 2,
		"0E07" => 3,
		"0E08" => 3,
		"0E09" => 2,
		"0E0A" => 3,
		"0E0B" => 3,
		"0E0C" => 3,
		"0E0D" => 2,
		"0E0E" => 2,
		"0F00" => 4,
		"0F01" => 3,
		"0F02" => 4,
		"0F03" => 4,
		"0F04" => 3,
		"0F05" => 3,
		"0F06" => 2,
		"0F07" => 3,
		"0F08" => 3,
		"0F09" => 2,
		"0F0A" => 3,
		"0F0B" => 3,
		"0F0C" => 3,
		"0F0D" => 3,
		"0F0E" => 2,
		"1000" => 3,
		"1001" => 2,
		"1002" => 4,
		"1003" => 4,
		"1004" => 3,
		"1005" => 3,
		"1006" => 2,
		"1007" => 4,
		"1008" => 2,
		"1009" => 3,
		"100A" => 3,
		"100B" => 4,
		"100C" => 4,
		"100D" => 1,
		"100E" => 3,
		"1100" => 3,
		"1101" => 2,
		"1102" => 4,
		"1103" => 4,
		"1104" => 3,
		"1105" => 3,
		"1106" => 4,
		"1107" => 4,
		"1108" => 2,
		"1109" => 3,
		"110A" => 3,
		"110B" => 4,
		"110C" => 3,
		"110D" => 2,
		"110E" => 2,
		"1200" => 4,
		"1201" => 4,
		"1202" => 4,
		"1203" => 4,
		"1204" => 3,
		"1205" => 3,
		"1206" => 4,
		"1207" => 4,
		"1208" => 2,
		"1209" => 3,
		"120A" => 4,
		"120B" => 2,
		"120C" => 4,
		"120D" => 4,
		"120E" => 4,
		"1300" => 4,
		"1301" => 4,
		"1302" => 4,
		"1303" => 4,
		"1304" => 3,
		"1305" => 3,
		"1306" => 4,
		"1307" => 3,
		"1308" => 2,
		"1309" => 3,
		"130A" => 4,
		"130B" => 3,
		"130C" => 3,
		"130D" => 4,
		"130E" => 3,
		"1400" => 3,
		"1401" => 2,
		"1402" => 3,
		"1403" => 3,
		"1404" => 4,
		"1405" => 2,
		"1406" => 4,
		"1407" => 4,
		"1408" => 2,
		"1409" => 2,
		"140A" => 3,
		"140B" => 3,
		"140C" => 4,
		"140D" => 3,
		"140E" => 2,
		"1500" => 3,
		"1501" => 3,
		"1502" => 3,
		"1503" => 3,
		"1504" => 4,
		"1505" => 2,
		"1506" => 4,
		"1507" => 4,
		"1508" => 2,
		"1509" => 3,
		"150A" => 3,
		"150B" => 3,
		"150C" => 4,
		"150D" => 2,
		"150E" => 2,
		"1600" => 3,
		"1601" => 4,
		"1602" => 4,
		"1603" => 3,
		"1604" => 4,
		"1605" => 2,
		"1606" => 4,
		"1607" => 4,
		"1608" => 2,
		"1609" => 4,
		"160A" => 4,
		"160B" => 3,
		"160C" => 4,
		"160D" => 4,
		"160E" => 3,
		"1700" => 3,
		"1701" => 3,
		"1702" => 4,
		"1703" => 2,
		"1704" => 4,
		"1705" => 2,
		"1706" => 3,
		"1707" => 4,
		"1708" => 2,
		"1709" => 3,
		"170A" => 4,
		"170B" => 3,
		"170C" => 4,
		"170D" => 3,
		"170E" => 3,
		"1800" => 3,
		"1801" => 3,
		"1802" => 4,
		"1803" => 2,
		"1804" => 4,
		"1805" => 2,
		"1806" => 3,
		"1807" => 4,
		"1808" => 2,
		"1809" => 3,
		"180A" => 4,
		"180B" => 3,
		"180C" => 4,
		"180D" => 3,
		"180E" => 2,
		"1900" => 4,
		"1901" => 3,
		"1902" => 4,
		"1903" => 2,
		"1904" => 3,
		"1905" => 2,
		"1906" => 3,
		"1907" => 4,
		"1908" => 2,
		"1909" => 3,
		"190A" => 4,
		"190B" => 3,
		"190C" => 3,
		"190D" => 3,
		"190E" => 2,
		"1A00" => 4,
		"1A01" => 3,
		"1A02" => 4,
		"1A03" => 2,
		"1A04" => 2,
		"1A05" => 3,
		"1A06" => 3,
		"1A07" => 4,
		"1A08" => 3,
		"1A09" => 3,
		"1A0A" => 4,
		"1A0B" => 3,
		"1A0C" => 4,
		"1A0D" => 4,
		"1A0E" => 3,
		"1B00" => 3,
		"1B01" => 3,
		"1B02" => 4,
		"1B03" => 4,
		"1B04" => 3,
		"1B05" => 3,
		"1B06" => 4,
		"1B07" => 4,
		"1B08" => 3,
		"1B09" => 4,
		"1B0A" => 3,
		"1B0B" => 3,
		"1B0C" => 4,
		"1B0D" => 4,
		"1B0E" => 2,
		"1C00" => 4,
		"1C01" => 2,
		"1C02" => 5,
		"1C03" => 3,
		"1C04" => 4,
		"1C05" => 3,
		"1C06" => 3,
		"1C07" => 4,
		"1C08" => 3,
		"1C09" => 3,
		"1C0A" => 2,
		"1C0B" => 3,
		"1C0C" => 2,
		"1C0D" => 4,
		"1C0E" => 2,
		"1D00" => 4,
		"1D01" => 4,
		"1D02" => 5,
		"1D03" => 4,
		"1D04" => 3,
		"1D05" => 3,
		"1D06" => 3,
		"1D07" => 4,
		"1D08" => 4,
		"1D09" => 3,
		"1D0A" => 3,
		"1D0B" => 3,
		"1D0C" => 4,
		"1D0D" => 3,
		"1D0E" => 3,
		"1E00" => 3,
		"1E01" => 2,
		"1E02" => 3,
		"1E03" => 4,
		"1E04" => 3,
		"1E05" => 3,
		"1E06" => 3,
		"1E07" => 4,
		"1E08" => 2,
		"1E09" => 3,
		"1E0A" => 3,
		"1E0B" => 3,
		"1E0C" => 4,
		"1E0D" => 2,
		"1E0E" => 2,
		"1F00" => 4,
		"1F01" => 3,
		"1F02" => 4,
		"1F03" => 3,
		"1F04" => 3,
		"1F05" => 3,
		"1F06" => 4,
		"1F07" => 4,
		"1F08" => 2,
		"1F09" => 3,
		"1F0A" => 3,
		"1F0B" => 4,
		"1F0C" => 4,
		"1F0D" => 2,
		"1F0E" => 2,
		"2000" => 5,
		"2001" => 3,
		"2002" => 2,
		"2003" => 3,
		"2004" => 3,
		"2005" => 3,
		"2006" => 2,
		"2007" => 3,
		"2008" => 3,
		"2009" => 2,
		"200A" => 2,
		"200B" => 3,
		"200C" => 2,
		"200D" => 3,
		"200E" => 3,
		"2100" => 5,
		"2101" => 4,
		"2102" => 4,
		"2103" => 3,
		"2104" => 4,
		"2105" => 3,
		"2106" => 3,
		"2107" => 4,
		"2108" => 4,
		"2109" => 5,
		"210A" => 4,
		"210B" => 3,
		"210C" => 4,
		"210D" => 4,
		"210E" => 2,
		"2200" => 5,
		"2201" => 4,
		"2202" => 4,
		"2203" => 3,
		"2204" => 3,
		"2205" => 3,
		"2206" => 3,
		"2207" => 4,
		"2208" => 3,
		"2209" => 4,
		"220A" => 4,
		"220B" => 3,
		"220C" => 3,
		"220D" => 4,
		"220E" => 3,
		"2300" => 3,
		"2301" => 3,
		"2302" => 4,
		"2303" => 3,
		"2304" => 2,
		"2305" => 3,
		"2306" => 3,
		"2307" => 4,
		"2308" => 4,
		"2309" => 3,
		"230A" => 2,
		"230B" => 3,
		"230C" => 2,
		"230D" => 4,
		"230E" => 3,
		"2400" => 3,
		"2401" => 4,
		"2402" => 4,
		"2403" => 3,
		"2404" => 2,
		"2405" => 3,
		"2406" => 4,
		"2407" => 4,
		"2408" => 3,
		"2409" => 4,
		"240A" => 3,
		"240B" => 3,
		"240C" => 3,
		"240D" => 3,
		"240E" => 3,
		"2500" => 3,
		"2501" => 2,
		"2502" => 4,
		"2503" => 3,
		"2504" => 3,
		"2505" => 2,
		"2506" => 2,
		"2507" => 4,
		"2508" => 3,
		"2509" => 3,
		"250A" => 3,
		"250B" => 3,
		"250C" => 3,
		"250D" => 3,
		"250E" => 2,
		"2600" => 4,
		"2601" => 4,
		"2602" => 4,
		"2603" => 3,
		"2604" => 2,
		"2605" => 2,
		"2606" => 4,
		"2607" => 4,
		"2608" => 4,
		"2609" => 3,
		"260A" => 3,
		"260B" => 3,
		"260C" => 3,
		"260D" => 3,
		"260E" => 2,
		"2700" => 3,
		"2701" => 4,
		"2702" => 4,
		"2703" => 3,
		"2704" => 3,
		"2705" => 3,
		"2706" => 4,
		"2707" => 4,
		"2708" => 3,
		"2709" => 3,
		"270A" => 4,
		"270B" => 3,
		"270C" => 4,
		"270D" => 3,
		"270E" => 2,
		"2800" => 3,
		"2801" => 4,
		"2802" => 4,
		"2803" => 3,
		"2804" => 3,
		"2805" => 3,
		"2806" => 4,
		"2807" => 4,
		"2808" => 4,
		"2809" => 3,
		"280A" => 3,
		"280B" => 3,
		"280C" => 3,
		"280D" => 4,
		"280E" => 2,
		"2900" => 4,
		"2901" => 3,
		"2902" => 4,
		"2903" => 3,
		"2904" => 4,
		"2905" => 3,
		"2906" => 4,
		"2907" => 4,
		"2908" => 3,
		"2909" => 4,
		"290A" => 3,
		"290B" => 3,
		"290C" => 4,
		"290D" => 4,
		"290E" => 2,
		"2A00" => 4,
		"2A01" => 3,
		"2A02" => 4,
		"2A03" => 3,
		"2A04" => 3,
		"2A05" => 3,
		"2A06" => 4,
		"2A07" => 4,
		"2A08" => 3,
		"2A09" => 3,
		"2A0A" => 3,
		"2A0B" => 2,
		"2A0C" => 4,
		"2A0D" => 3,
		"2A0E" => 2,
		"2B00" => 3,
		"2B01" => 3,
		"2B02" => 4,
		"2B03" => 4,
		"2B04" => 3,
		"2B05" => 4,
		"2B06" => 4,
		"2B07" => 4,
		"2B08" => 4,
		"2B09" => 4,
		"2B0A" => 3,
		"2B0B" => 3,
		"2B0C" => 3,
		"2B0D" => 4,
		"2B0E" => 2,
		"2C00" => 3,
		"2C01" => 3,
		"2C02" => 3,
		"2C03" => 4,
		"2C04" => 3,
		"2C05" => 4,
		"2C06" => 4,
		"2C07" => 4,
		"2C08" => 4,
		"2C09" => 4,
		"2C0A" => 4,
		"2C0B" => 3,
		"2C0C" => 3,
		"2C0D" => 3,
		"2C0E" => 2,
		"2D00" => 3,
		"2D01" => 3,
		"2D02" => 4,
		"2D03" => 4,
		"2D04" => 3,
		"2D05" => 5,
		"2D06" => 3,
		"2D07" => 4,
		"2D08" => 4,
		"2D09" => 3,
		"2D0A" => 3,
		"2D0B" => 3,
		"2D0C" => 3,
		"2D0D" => 3,
		"2D0E" => 2,
		"2E00" => 3,
		"2E01" => 4,
		"2E02" => 3,
		"2E03" => 4,
		"2E04" => 3,
		"2E05" => 4,
		"2E06" => 3,
		"2E07" => 3,
		"2E08" => 4,
		"2E09" => 3,
		"2E0A" => 3,
		"2E0B" => 3,
		"2E0C" => 3,
		"2E0D" => 3,
		"2E0E" => 2,
		"2F00" => 2,
		"2F01" => 2,
		"2F02" => 3,
		"2F03" => 3,
		"2F04" => 3,
		"2F05" => 3,
		"2F06" => 3,
		"2F07" => 3,
		"2F08" => 2,
		"2F09" => 3,
		"2F0A" => 3,
		"2F0B" => 3,
		"2F0C" => 3,
		"2F0D" => 2,
		"2F0E" => 2,
		"3000" => 3,
		"3001" => 3,
		"3002" => 3,
		"3003" => 3,
		"3004" => 4,
		"3005" => 2,
		"3006" => 2,
		"3007" => 3,
		"3008" => 3,
		"3009" => 3,
		"300A" => 3,
		"300B" => 2,
		"300C" => 3,
		"300D" => 1,
		"300E" => 2,
		"3100" => 3,
		"3101" => 3,
		"3102" => 3,
		"3103" => 2,
		"3104" => 4,
		"3105" => 2,
		"3106" => 3,
		"3107" => 4,
		"3108" => 4,
		"3109" => 3,
		"310A" => 3,
		"310B" => 2,
		"310C" => 4,
		"310D" => 2,
		"310E" => 2,
		"3200" => 3,
		"3201" => 4,
		"3202" => 3,
		"3203" => 2,
		"3204" => 4,
		"3205" => 2,
		"3206" => 4,
		"3207" => 4,
		"3208" => 4,
		"3209" => 4,
		"320A" => 3,
		"320B" => 3,
		"320C" => 3,
		"320D" => 1,
		"320E" => 2,
		"3300" => 4,
		"3301" => 4,
		"3302" => 3,
		"3303" => 2,
		"3304" => 4,
		"3305" => 2,
		"3306" => 4,
		"3307" => 4,
		"3308" => 4,
		"3309" => 3,
		"330A" => 3,
		"330B" => 2,
		"330C" => 4,
		"330D" => 1,
		"330E" => 3,
		"3400" => 3,
		"3401" => 4,
		"3402" => 3,
		"3403" => 3,
		"3404" => 4,
		"3405" => 2,
		"3406" => 4,
		"3407" => 4,
		"3408" => 3,
		"3409" => 3,
		"340A" => 3,
		"340B" => 3,
		"340C" => 3,
		"340D" => 3,
		"340E" => 2,
		"3500" => 3,
		"3501" => 3,
		"3502" => 3,
		"3503" => 3,
		"3504" => 4,
		"3505" => 2,
		"3506" => 3,
		"3507" => 4,
		"3508" => 2,
		"3509" => 3,
		"350A" => 3,
		"350B" => 3,
		"350C" => 4,
		"350D" => 3,
		"350E" => 2,
		"3600" => 4,
		"3601" => 4,
		"3602" => 3,
		"3603" => 4,
		"3604" => 3,
		"3605" => 2,
		"3606" => 4,
		"3607" => 4,
		"3608" => 2,
		"3609" => 2,
		"360A" => 3,
		"360B" => 3,
		"360C" => 4,
		"360D" => 4,
		"360E" => 3,
		"3700" => 3,
		"3701" => 3,
		"3702" => 3,
		"3703" => 4,
		"3704" => 3,
		"3705" => 2,
		"3706" => 4,
		"3707" => 4,
		"3708" => 2,
		"3709" => 2,
		"370A" => 3,
		"370B" => 3,
		"370C" => 4,
		"370D" => 4,
		"370E" => 2,
		"3800" => 3,
		"3801" => 3,
		"3802" => 3,
		"3803" => 5,
		"3804" => 3,
		"3805" => 2,
		"3806" => 4,
		"3807" => 4,
		"3808" => 3,
		"3809" => 2,
		"380A" => 3,
		"380B" => 3,
		"380C" => 4,
		"380D" => 2,
		"380E" => 2,
		"3900" => 4,
		"3901" => 4,
		"3902" => 3,
		"3903" => 4,
		"3904" => 4,
		"3905" => 2,
		"3906" => 4,
		"3907" => 4,
		"3908" => 2,
		"3909" => 3,
		"390A" => 3,
		"390B" => 3,
		"390C" => 4,
		"390D" => 3,
		"390E" => 2,
		"3A00" => 4,
		"3A01" => 4,
		"3A02" => 3,
		"3A03" => 4,
		"3A04" => 3,
		"3A05" => 3,
		"3A06" => 3,
		"3A07" => 4,
		"3A08" => 2,
		"3A09" => 3,
		"3A0A" => 3,
		"3A0B" => 3,
		"3A0C" => 3,
		"3A0D" => 3,
		"3A0E" => 2,
		"3B00" => 3,
		"3B01" => 3,
		"3B02" => 3,
		"3B03" => 4,
		"3B04" => 3,
		"3B05" => 3,
		"3B06" => 4,
		"3B07" => 4,
		"3B08" => 2,
		"3B09" => 3,
		"3B0A" => 3,
		"3B0B" => 3,
		"3B0C" => 3,
		"3B0D" => 3,
		"3B0E" => 2,
		"3C00" => 3,
		"3C01" => 3,
		"3C02" => 3,
		"3C03" => 4,
		"3C04" => 3,
		"3C05" => 3,
		"3C06" => 4,
		"3C07" => 4,
		"3C08" => 2,
		"3C09" => 3,
		"3C0A" => 3,
		"3C0B" => 3,
		"3C0C" => 3,
		"3C0D" => 3,
		"3C0E" => 2,
		"3D00" => 4,
		"3D01" => 3,
		"3D02" => 3,
		"3D03" => 4,
		"3D04" => 3,
		"3D05" => 3,
		"3D06" => 4,
		"3D07" => 4,
		"3D08" => 2,
		"3D09" => 3,
		"3D0A" => 3,
		"3D0B" => 3,
		"3D0C" => 3,
		"3D0D" => 3,
		"3D0E" => 2,
		"3E00" => 3,
		"3E01" => 3,
		"3E02" => 3,
		"3E03" => 4,
		"3E04" => 3,
		"3E05" => 4,
		"3E06" => 4,
		"3E07" => 4,
		"3E08" => 2,
		"3E09" => 2,
		"3E0A" => 3,
		"3E0B" => 3,
		"3E0C" => 3,
		"3E0D" => 3,
		"3E0E" => 2,
		"3F00" => 3,
		"3F01" => 3,
		"3F02" => 3,
		"3F03" => 4,
		"3F04" => 3,
		"3F05" => 4,
		"3F06" => 4,
		"3F07" => 4,
		"3F08" => 2,
		"3F09" => 2,
		"3F0A" => 3,
		"3F0B" => 3,
		"3F0C" => 3,
		"3F0D" => 3,
		"3F0E" => 2,
		"4000" => 3,
		"4001" => 4,
		"4002" => 4,
		"4003" => 4,
		"4004" => 4,
		"4005" => 3,
		"4006" => 2,
		"4007" => 3,
		"4008" => 3,
		"4009" => 3,
		"400A" => 3,
		"400B" => 3,
		"400C" => 3,
		"400D" => 2,
		"400E" => 2,
		"4100" => 4,
		"4101" => 3,
		"4102" => 4,
		"4103" => 3,
		"4104" => 3,
		"4105" => 4,
		"4106" => 2,
		"4107" => 3,
		"4108" => 3,
		"4109" => 4,
		"410A" => 3,
		"410B" => 2,
		"410C" => 3,
		"410D" => 3,
		"410E" => 2,
		"4200" => 4,
		"4201" => 4,
		"4202" => 3,
		"4203" => 3,
		"4204" => 4,
		"4205" => 3,
		"4206" => 4,
		"4207" => 3,
		"4208" => 3,
		"4209" => 4,
		"420A" => 4,
		"420B" => 3,
		"420C" => 2,
		"420D" => 3,
		"420E" => 2,
		"4300" => 3,
		"4301" => 4,
		"4302" => 3,
		"4303" => 3,
		"4304" => 3,
		"4305" => 3,
		"4306" => 3,
		"4307" => 3,
		"4308" => 3,
		"4309" => 4,
		"430A" => 3,
		"430B" => 3,
		"430C" => 2,
		"430D" => 2,
		"430E" => 2,
		"4400" => 3,
		"4401" => 3,
		"4402" => 4,
		"4403" => 3,
		"4404" => 2,
		"4405" => 3,
		"4406" => 2,
		"4407" => 4,
		"4408" => 2,
		"4409" => 3,
		"440A" => 3,
		"440B" => 3,
		"440C" => 3,
		"440D" => 2,
		"440E" => 2,
		"4500" => 4,
		"4600" => 3,
		"4700" => 4,
		"4800" => 5,
		"4900" => 5,
		"4A00" => 5,
		"4B00" => 3,
		"4C00" => 4,
		"4D00" => 4,
		"4E00" => 4,
		"4F00" => 3,
		"5000" => 3,
		"5100" => 3,
		"5200" => 5,
		"5300" => 4,
		"5400" => 4,
		"5500" => 5,
		"5600" => 4,
		"5700" => 3,
		"5800" => 5,
		"5900" => 5,
		"5A00" => 5,
		"5B00" => 5,
		"5C00" => 3,
		"5D00" => 4,
		"5E00" => 4,
		"5F00" => 4,
		"6000" => 4,
		"6100" => 5,
		"6200" => 3,
		"6300" => 5,
		"6400" => 5,
		"6500" => 4,
		"6600" => 4,
		"6700" => 4,
		"6800" => 4,
		"6900" => 4,
		"6A00" => 5,
		"6B00" => 5,
		"6C00" => 5,
		"6D00" => 4,
		"6E00" => 5,
		"6F00" => 4,
		"7000" => 4,
		"7100" => 4,
		"7200" => 4,
		"7300" => 4,
		"7400" => 4,
		"7500" => 4,
		"7600" => 5,
		"7700" => 4,
		"7800" => 4,
		"7900" => 5,
		"7A00" => 5,
		"7B00" => 5,
		"7C00" => 4,
		"7D00" => 4,
		"7E00" => 4,
		"7F00" => 4,
		"8000" => 4,
		"8100" => 4,
		"8200" => 5,
		"8300" => 4,
		"8400" => 4,
		"8500" => 4,
		"8600" => 5,
		"8700" => 5,
		"8800" => 5,
		"8900" => 4,
		"8A00" => 5,
		"8B00" => 5,
		"8C00" => 3,
		"8D00" => 5,
		"8E00" => 3,
		"8F00" => 4,
		"9000" => 5,
		"9100" => 4,
		"9200" => 5,
		"9300" => 4,
		"9400" => 4,
		"9500" => 4,
		"9600" => 4,
		"9700" => 3,
		"9800" => 5,
		"9900" => 5,
		"9A00" => 5,
		"9B00" => 5,
		"9C00" => 5,
		"9D00" => 5,
		"9E00" => 4,
		"9F00" => 5,
		"A000" => 4,
		"A100" => 3,
		"A200" => 4,
		"A300" => 4,
		"A400" => 5,
		"A500" => 4,
		"A600" => 4,
		"A700" => 3,
		"A800" => 5,
		"A900" => 4,
		"AA00" => 5,
		"AB00" => 5,
		"AC00" => 4,
		"AD00" => 2,
		"AE00" => 4,
		"AF00" => 4,
		"B000" => 5,
		"B100" => 4,
		"B200" => 5,
		"B300" => 4,
		"B400" => 3,
		"B500" => 4,
		"B600" => 5,
		"B700" => 3,
		"B800" => 4,
		"B900" => 5,
		"BA00" => 5,
		"BB00" => 4,
		"BC00" => 4,
		"BD00" => 4,
		"BE00" => 4,
		"BF00" => 5,
		"C000" => 4,
		"C100" => 5,
		"C200" => 3,
		"C300" => 3,
		"C400" => 4,
		"C500" => 5,
		"C600" => 5,
		"C700" => 5,
		"C800" => 3,
		"C900" => 4,
		"CA00" => 5,
		"CB00" => 5,
		"CC00" => 5,
		"CD00" => 5,
		"CE00" => 4,
		"CF00" => 5,
		"D000" => 5,
		"D100" => 3,
		"D200" => 5,
		"D300" => 5,
		"D400" => 4,
		"D500" => 4,
		"D600" => 5,
		"D700" => 4,
		"D800" => 4,
		"D900" => 4,
		"DA00" => 5,
		"DB00" => 5,
		"DC00" => 4,
		"DD00" => 4,
		"DE00" => 4,
		"DF00" => 5,
		"E000" => 3,
		"E100" => 5,
		"E200" => 4,
		"E300" => 5,
		"E400" => 4,
		"E500" => 4,
		"E600" => 5,
		"E700" => 4,
		"E800" => 4,
		"E900" => 5,
		"EA00" => 4,
		"EB00" => 4,
		"EC00" => 4,
		"ED00" => 5,
		"EE00" => 5,
		"EF00" => 4,
		"F000" => 3,
		"F100" => 5,
		"F200" => 4,
		"F300" => 4,
		"F400" => 4,
		"F500" => 4,
		"F600" => 5,
		"F700" => 5,
		"F800" => 5,
		"F900" => 3,
		"FA00" => 3,
		"FB00" => 4,
    );
    }


    /**
     * Hardcoded Easy Chat length table for region 'e'.
     * Keys are 4-hex-digit EC codes, values are visible character lengths.
     */
    function bxt_easy_chat_length_table_e(): array
    {
        return array(
		'0000' => 0,
		'0001' => 4,
		'0101' => 4,
		'0201' => 7,
		'0301' => 8,
		'0401' => 5,
		'0501' => 5,
		'0601' => 3,
		'0701' => 6,
		'0801' => 4,
		'0901' => 8,
		'0A01' => 6,
		'0B01' => 6,
		'0C01' => 6,
		'0D01' => 5,
		'0E01' => 6,
		'0F01' => 4,
		'1001' => 5,
		'1101' => 3,
		'0002' => 8,
		'0102' => 6,
		'0202' => 8,
		'0302' => 6,
		'0402' => 6,
		'0502' => 4,
		'0602' => 6,
		'0702' => 6,
		'0802' => 8,
		'0902' => 5,
		'0A02' => 6,
		'0B02' => 8,
		'0C02' => 3,
		'0D02' => 5,
		'0E02' => 8,
		'0F02' => 6,
		'1002' => 8,
		'1102' => 6,
		'1202' => 6,
		'1302' => 6,
		'1402' => 3,
		'1502' => 5,
		'1602' => 8,
		'1702' => 7,
		'1802' => 2,
		'1902' => 8,
		'1A02' => 7,
		'1B02' => 3,
		'1C02' => 5,
		'1D02' => 8,
		'1E02' => 7,
		'1F02' => 5,
		'2002' => 2,
		'2102' => 7,
		'2202' => 8,
		'2302' => 7,
		'0003' => 8,
		'0103' => 1,
		'0203' => 3,
		'0303' => 5,
		'0403' => 3,
		'0503' => 4,
		'0603' => 6,
		'0703' => 6,
		'0803' => 6,
		'0903' => 7,
		'0A03' => 5,
		'0B03' => 6,
		'0C03' => 3,
		'0D03' => 5,
		'0E03' => 7,
		'0F03' => 6,
		'1003' => 7,
		'1103' => 4,
		'1203' => 2,
		'1303' => 4,
		'1403' => 4,
		'1503' => 6,
		'1603' => 3,
		'1703' => 3,
		'1803' => 2,
		'1903' => 5,
		'1A03' => 8,
		'1B03' => 3,
		'1C03' => 4,
		'1D03' => 6,
		'1E03' => 3,
		'1F03' => 8,
		'2003' => 8,
		'2103' => 6,
		'2203' => 5,
		'2303' => 5,
		'2403' => 2,
		'2503' => 4,
		'2603' => 4,
		'2703' => 3,
		'2803' => 7,
		'2903' => 7,
		'2A03' => 8,
		'2B03' => 5,
		'2C03' => 6,
		'2D03' => 4,
		'2E03' => 4,
		'2F03' => 6,
		'3003' => 4,
		'3103' => 6,
		'3203' => 4,
		'3303' => 4,
		'3403' => 8,
		'3503' => 7,
		'3603' => 5,
		'3703' => 7,
		'3803' => 8,
		'3903' => 2,
		'3A03' => 4,
		'3B03' => 5,
		'3C03' => 3,
		'3D03' => 5,
		'3E03' => 5,
		'3F03' => 3,
		'4003' => 7,
		'4103' => 6,
		'4203' => 4,
		'4303' => 6,
		'4403' => 4,
		'0004' => 8,
		'0104' => 3,
		'0204' => 5,
		'0304' => 6,
		'0404' => 5,
		'0504' => 4,
		'0604' => 3,
		'0704' => 3,
		'0804' => 8,
		'0904' => 8,
		'0A04' => 8,
		'0B04' => 7,
		'0C04' => 8,
		'0D04' => 6,
		'0E04' => 7,
		'0F04' => 8,
		'1004' => 6,
		'1104' => 7,
		'1204' => 6,
		'1304' => 7,
		'1404' => 4,
		'1504' => 6,
		'1604' => 8,
		'1704' => 5,
		'1804' => 5,
		'1904' => 7,
		'1A04' => 7,
		'1B04' => 5,
		'1C04' => 7,
		'1D04' => 6,
		'1E04' => 5,
		'1F04' => 4,
		'2004' => 6,
		'2104' => 8,
		'2204' => 4,
		'2304' => 8,
		'2404' => 7,
		'2504' => 3,
		'2604' => 6,
		'2704' => 6,
		'2804' => 7,
		'2904' => 6,
		'2A04' => 8,
		'2B04' => 3,
		'2C04' => 6,
		'2D04' => 5,
		'2E04' => 6,
		'2F04' => 6,
		'3004' => 7,
		'3104' => 7,
		'3204' => 6,
		'3304' => 4,
		'3404' => 8,
		'3504' => 4,
		'3604' => 4,
		'3704' => 5,
		'3804' => 7,
		'3904' => 6,
		'3A04' => 6,
		'3B04' => 8,
		'3C04' => 7,
		'3D04' => 4,
		'3E04' => 4,
		'3F04' => 8,
		'4004' => 8,
		'4104' => 5,
		'4204' => 4,
		'4304' => 5,
		'4404' => 4,
		'0005' => 2,
		'0105' => 1,
		'0205' => 2,
		'0305' => 2,
		'0405' => 1,
		'0505' => 2,
		'0605' => 8,
		'0705' => 1,
		'0805' => 5,
		'0905' => 5,
		'0A05' => 5,
		'0B05' => 5,
		'0C05' => 3,
		'0D05' => 4,
		'0E05' => 3,
		'0F05' => 4,
		'1005' => 3,
		'1105' => 5,
		'1205' => 8,
		'1305' => 3,
		'1405' => 6,
		'1505' => 8,
		'1605' => 5,
		'1705' => 5,
		'1805' => 3,
		'1905' => 3,
		'1A05' => 5,
		'1B05' => 8,
		'1C05' => 7,
		'1D05' => 4,
		'1E05' => 7,
		'1F05' => 3,
		'2005' => 6,
		'2105' => 8,
		'2205' => 3,
		'2305' => 6,
		'2405' => 4,
		'2505' => 4,
		'2605' => 2,
		'2705' => 4,
		'2805' => 3,
		'2905' => 6,
		'2A05' => 6,
		'2B05' => 5,
		'2C05' => 6,
		'2D05' => 6,
		'2E05' => 3,
		'2F05' => 5,
		'3005' => 5,
		'3105' => 6,
		'3205' => 5,
		'3305' => 6,
		'3405' => 6,
		'3505' => 8,
		'3605' => 6,
		'3705' => 4,
		'3805' => 6,
		'3905' => 3,
		'3A05' => 6,
		'3B05' => 4,
		'3C05' => 6,
		'3D05' => 3,
		'3E05' => 4,
		'3F05' => 5,
		'4005' => 4,
		'4105' => 8,
		'0006' => 6,
		'0106' => 8,
		'0206' => 4,
		'0306' => 3,
		'0406' => 3,
		'0506' => 2,
		'0606' => 7,
		'0706' => 6,
		'0806' => 5,
		'0906' => 4,
		'0A06' => 7,
		'0B06' => 3,
		'0C06' => 7,
		'0D06' => 4,
		'0E06' => 4,
		'0F06' => 3,
		'1006' => 3,
		'1106' => 6,
		'1206' => 4,
		'1306' => 5,
		'1406' => 9,
		'1506' => 7,
		'1606' => 8,
		'1706' => 5,
		'1806' => 3,
		'1906' => 4,
		'1A06' => 6,
		'1B06' => 9,
		'1C06' => 2,
		'1D06' => 4,
		'1E06' => 5,
		'1F06' => 4,
		'2006' => 7,
		'2106' => 6,
		'2206' => 7,
		'2306' => 7,
		'2406' => 8,
		'2506' => 9,
		'2606' => 7,
		'2706' => 4,
		'2806' => 6,
		'2906' => 5,
		'2A06' => 7,
		'2B06' => 8,
		'2C06' => 7,
		'2D06' => 6,
		'2E06' => 8,
		'2F06' => 6,
		'3006' => 5,
		'3106' => 6,
		'3206' => 8,
		'3306' => 7,
		'3406' => 5,
		'3506' => 5,
		'3606' => 4,
		'3706' => 6,
		'3806' => 6,
		'3906' => 8,
		'3A06' => 6,
		'3B06' => 4,
		'3C06' => 4,
		'3D06' => 8,
		'3E06' => 7,
		'3F06' => 3,
		'4006' => 7,
		'4106' => 9,
		'0007' => 4,
		'0107' => 4,
		'0207' => 4,
		'0307' => 5,
		'0407' => 5,
		'0507' => 4,
		'0607' => 6,
		'0707' => 7,
		'0807' => 5,
		'0907' => 3,
		'0A07' => 7,
		'0B07' => 5,
		'0C07' => 3,
		'0D07' => 3,
		'0E07' => 5,
		'0F07' => 5,
		'1007' => 4,
		'1107' => 5,
		'1207' => 9,
		'1307' => 7,
		'1407' => 5,
		'1507' => 5,
		'1607' => 8,
		'1707' => 4,
		'1807' => 3,
		'1907' => 4,
		'1A07' => 5,
		'1B07' => 4,
		'1C07' => 8,
		'1D07' => 5,
		'1E07' => 9,
		'1F07' => 7,
		'2007' => 4,
		'2107' => 5,
		'2207' => 8,
		'2307' => 5,
		'2407' => 6,
		'2507' => 3,
		'2607' => 7,
		'2707' => 7,
		'2807' => 3,
		'2907' => 6,
		'2A07' => 8,
		'2B07' => 4,
		'2C07' => 5,
		'2D07' => 8,
		'2E07' => 4,
		'2F07' => 6,
		'3007' => 4,
		'3107' => 9,
		'3207' => 3,
		'3307' => 4,
		'3407' => 7,
		'3507' => 3,
		'3607' => 4,
		'3707' => 5,
		'3807' => 8,
		'3907' => 4,
		'3A07' => 6,
		'3B07' => 8,
		'3C07' => 8,
		'3D07' => 4,
		'3E07' => 5,
		'3F07' => 6,
		'4007' => 8,
		'4107' => 8,
		'4207' => 7,
		'4307' => 8,
		'4407' => 8,
		'0008' => 3,
		'0108' => 6,
		'0208' => 8,
		'0308' => 3,
		'0408' => 7,
		'0508' => 4,
		'0608' => 4,
		'0708' => 4,
		'0808' => 8,
		'0908' => 5,
		'0A08' => 5,
		'0B08' => 4,
		'0C08' => 8,
		'0D08' => 4,
		'0E08' => 6,
		'0F08' => 5,
		'1008' => 4,
		'1108' => 5,
		'1208' => 7,
		'1308' => 3,
		'1408' => 4,
		'1508' => 5,
		'1608' => 7,
		'1708' => 8,
		'1808' => 4,
		'1908' => 4,
		'1A08' => 8,
		'1B08' => 6,
		'1C08' => 7,
		'1D08' => 5,
		'1E08' => 6,
		'1F08' => 4,
		'2008' => 6,
		'2108' => 5,
		'2208' => 4,
		'2308' => 7,
		'2408' => 8,
		'2508' => 4,
		'2608' => 7,
		'2708' => 6,
		'2808' => 7,
		'2908' => 8,
		'2A08' => 5,
		'2B08' => 6,
		'2C08' => 5,
		'2D08' => 5,
		'2E08' => 8,
		'2F08' => 4,
		'3008' => 7,
		'3108' => 7,
		'3208' => 7,
		'3308' => 4,
		'3408' => 5,
		'3508' => 3,
		'3608' => 5,
		'3708' => 5,
		'3808' => 5,
		'3908' => 5,
		'3A08' => 5,
		'3B08' => 7,
		'3C08' => 4,
		'3D08' => 4,
		'3E08' => 8,
		'3F08' => 6,
		'4008' => 5,
		'4108' => 5,
		'0009' => 6,
		'0109' => 4,
		'0209' => 5,
		'0309' => 7,
		'0409' => 4,
		'0509' => 6,
		'0609' => 8,
		'0709' => 5,
		'0809' => 6,
		'0909' => 5,
		'0A09' => 4,
		'0B09' => 5,
		'0C09' => 5,
		'0D09' => 7,
		'0E09' => 6,
		'0F09' => 8,
		'1009' => 6,
		'1109' => 7,
		'1209' => 6,
		'1309' => 5,
		'1409' => 4,
		'1509' => 4,
		'1609' => 2,
		'1709' => 5,
		'1809' => 4,
		'1909' => 8,
		'1A09' => 4,
		'1B09' => 4,
		'1C09' => 8,
		'1D09' => 5,
		'1E09' => 5,
		'1F09' => 7,
		'2009' => 4,
		'2109' => 7,
		'2209' => 8,
		'2309' => 5,
		'2409' => 8,
		'2509' => 5,
		'2609' => 5,
		'000A' => 4,
		'010A' => 5,
		'020A' => 4,
		'030A' => 5,
		'040A' => 6,
		'050A' => 4,
		'060A' => 8,
		'070A' => 4,
		'080A' => 5,
		'090A' => 5,
		'0A0A' => 8,
		'0B0A' => 7,
		'0C0A' => 4,
		'0D0A' => 8,
		'0E0A' => 4,
		'0F0A' => 4,
		'100A' => 5,
		'110A' => 6,
		'120A' => 4,
		'130A' => 8,
		'140A' => 6,
		'150A' => 5,
		'160A' => 7,
		'170A' => 4,
		'180A' => 8,
		'190A' => 7,
		'1A0A' => 2,
		'1B0A' => 7,
		'1C0A' => 4,
		'1D0A' => 3,
		'1E0A' => 7,
		'1F0A' => 7,
		'200A' => 5,
		'210A' => 4,
		'220A' => 4,
		'230A' => 5,
		'240A' => 7,
		'250A' => 7,
		'260A' => 5,
		'000B' => 5,
		'010B' => 7,
		'020B' => 4,
		'030B' => 5,
		'040B' => 6,
		'050B' => 5,
		'060B' => 7,
		'070B' => 8,
		'080B' => 5,
		'090B' => 4,
		'0A0B' => 2,
		'0B0B' => 7,
		'0C0B' => 8,
		'0D0B' => 6,
		'0E0B' => 5,
		'0F0B' => 7,
		'100B' => 6,
		'110B' => 5,
		'120B' => 6,
		'130B' => 5,
		'140B' => 7,
		'150B' => 6,
		'160B' => 6,
		'170B' => 4,
		'180B' => 6,
		'190B' => 5,
		'1A0B' => 5,
		'1B0B' => 4,
		'1C0B' => 5,
		'1D0B' => 6,
		'1E0B' => 6,
		'1F0B' => 4,
		'200B' => 8,
		'210B' => 6,
		'220B' => 7,
		'230B' => 5,
		'240B' => 4,
		'250B' => 3,
		'260B' => 4,
		'270B' => 5,
		'280B' => 9,
		'290B' => 7,
		'2A0B' => 6,
		'2B0B' => 6,
		'2C0B' => 5,
		'2D0B' => 5,
		'2E0B' => 5,
		'2F0B' => 5,
		'300B' => 7,
		'310B' => 6,
		'320B' => 4,
		'330B' => 3,
		'340B' => 5,
		'350B' => 8,
		'360B' => 4,
		'370B' => 5,
		'380B' => 6,
		'390B' => 4,
		'3A0B' => 5,
		'3B0B' => 4,
		'3C0B' => 4,
		'3D0B' => 3,
		'3E0B' => 4,
		'3F0B' => 5,
		'400B' => 6,
		'410B' => 8,
		'420B' => 7,
		'430B' => 5,
		'440B' => 7,
		'000C' => 4,
		'010C' => 7,
		'020C' => 8,
		'030C' => 3,
		'040C' => 8,
		'050C' => 6,
		'060C' => 7,
		'070C' => 7,
		'080C' => 4,
		'090C' => 3,
		'0A0C' => 7,
		'0B0C' => 5,
		'0C0C' => 5,
		'0D0C' => 6,
		'0E0C' => 6,
		'0F0C' => 5,
		'100C' => 7,
		'110C' => 7,
		'120C' => 4,
		'130C' => 6,
		'140C' => 9,
		'150C' => 5,
		'160C' => 5,
		'170C' => 4,
		'180C' => 3,
		'190C' => 5,
		'1A0C' => 4,
		'1B0C' => 8,
		'1C0C' => 6,
		'1D0C' => 6,
		'1E0C' => 6,
		'1F0C' => 6,
		'200C' => 7,
		'210C' => 6,
		'220C' => 5,
		'230C' => 8,
		'240C' => 8,
		'250C' => 5,
		'260C' => 4,
		'000D' => 4,
		'010D' => 3,
		'020D' => 1,
		'030D' => 3,
		'040D' => 8,
		'050D' => 7,
		'060D' => 2,
		'070D' => 5,
		'080D' => 5,
		'090D' => 7,
		'0A0D' => 5,
		'0B0D' => 2,
		'0C0D' => 9,
		'0D0D' => 5,
		'0E0D' => 5,
		'0F0D' => 3,
		'100D' => 3,
		'110D' => 4,
		'120D' => 5,
		'130D' => 5,
		'140D' => 5,
		'150D' => 5,
		'160D' => 3,
		'170D' => 5,
		'180D' => 2,
		'190D' => 4,
		'1A0D' => 4,
		'1B0D' => 5,
		'1C0D' => 6,
		'1D0D' => 7,
		'1E0D' => 4,
		'1F0D' => 7,
		'200D' => 1,
		'210D' => 2,
		'220D' => 3,
		'230D' => 5,
		'240D' => 3,
		'250D' => 2,
		'260D' => 5,
		'270D' => 5,
		'280D' => 4,
		'290D' => 2,
		'2A0D' => 3,
		'2B0D' => 2,
		'2C0D' => 3,
		'2D0D' => 2,
		'2E0D' => 2,
		'2F0D' => 4,
		'300D' => 6,
		'310D' => 4,
		'320D' => 6,
		'330D' => 2,
		'340D' => 6,
		'350D' => 2,
		'360D' => 2,
		'370D' => 3,
		'380D' => 3,
		'390D' => 4,
		'3A0D' => 3,
		'3B0D' => 7,
		'3C0D' => 5,
		'3D0D' => 6,
		'3E0D' => 5,
		'3F0D' => 4,
		'400D' => 4,
		'410D' => 8,
		'000E' => 5,
		'010E' => 4,
		'020E' => 2,
		'030E' => 4,
		'040E' => 6,
		'050E' => 5,
		'060E' => 5,
		'070E' => 4,
		'080E' => 4,
		'090E' => 6,
		'0A0E' => 7,
		'0B0E' => 6,
		'0C0E' => 8,
		'0D0E' => 4,
		'0E0E' => 5,
		'0F0E' => 8,
		'100E' => 4,
		'110E' => 4,
		'120E' => 7,
		'130E' => 8,
		'140E' => 8,
		'150E' => 2,
		'160E' => 8,
		'170E' => 2,
		'180E' => 6,
		'190E' => 3,
		'1A0E' => 4,
		'1B0E' => 4,
		'1C0E' => 5,
		'1D0E' => 4,
		'1E0E' => 4,
		'1F0E' => 4,
		'200E' => 7,
		'210E' => 3,
		'220E' => 8,
		'230E' => 8,
		'0100' => 9,
		'0200' => 7,
		'0300' => 8,
		'0400' => 10,
		'0500' => 10,
		'0600' => 9,
		'0700' => 8,
		'0800' => 9,
		'0900' => 9,
		'0A00' => 8,
		'0B00' => 7,
		'0C00' => 10,
		'0D00' => 6,
		'0E00' => 6,
		'0F00' => 8,
		'1000' => 6,
		'1100' => 9,
		'1200' => 7,
		'1300' => 7,
		'1400' => 8,
		'1500' => 7,
		'1600' => 6,
		'1700' => 5,
		'1800' => 5,
		'1900' => 7,
		'1A00' => 6,
		'1B00' => 9,
		'1C00' => 9,
		'1D00' => 8,
		'1E00' => 8,
		'1F00' => 9,
		'2000' => 8,
		'2100' => 8,
		'2200' => 8,
		'2300' => 8,
		'2400' => 8,
		'2500' => 6,
		'2600' => 9,
		'2700' => 10,
		'2800' => 10,
		'2900' => 5,
		'2A00' => 6,
		'2B00' => 6,
		'2C00' => 5,
		'2D00' => 9,
		'2E00' => 5,
		'2F00' => 8,
		'3000' => 7,
		'3100' => 8,
		'3200' => 7,
		'3300' => 7,
		'3400' => 6,
		'3500' => 7,
		'3600' => 7,
		'3700' => 7,
		'3800' => 6,
		'3900' => 9,
		'3A00' => 9,
		'3B00' => 8,
		'3C00' => 7,
		'3D00' => 9,
		'3E00' => 9,
		'3F00' => 4,
		'4000' => 7,
		'4100' => 8,
		'4200' => 6,
		'4300' => 7,
		'4400' => 7,
		'4500' => 10,
		'4600' => 10,
		'4700' => 10,
		'4800' => 9,
		'4900' => 10,
		'4A00' => 7,
		'4B00' => 8,
		'4C00' => 5,
		'4D00' => 6,
		'4E00' => 8,
		'4F00' => 8,
		'5000' => 7,
		'5100' => 9,
		'5200' => 8,
		'5300' => 10,
		'5400' => 5,
		'5500' => 6,
		'5600' => 4,
		'5700' => 7,
		'5800' => 6,
		'5900' => 3,
		'5A00' => 8,
		'5B00' => 8,
		'5C00' => 6,
		'5D00' => 7,
		'5E00' => 6,
		'5F00' => 4,
		'6000' => 7,
		'6100' => 5,
		'6200' => 6,
		'6300' => 7,
		'6400' => 7,
		'6500' => 9,
		'6600' => 9,
		'6700' => 9,
		'6800' => 6,
		'6900' => 7,
		'6A00' => 9,
		'6B00' => 9,
		'6C00' => 9,
		'6D00' => 7,
		'6E00' => 7,
		'6F00' => 7,
		'7000' => 6,
		'7100' => 7,
		'7200' => 7,
		'7300' => 10,
		'7400' => 6,
		'7500' => 6,
		'7600' => 7,
		'7700' => 7,
		'7800' => 6,
		'7900' => 7,
		'7A00' => 7,
		'7B00' => 7,
		'7C00' => 4,
		'7D00' => 10,
		'7E00' => 6,
		'7F00' => 6,
		'8000' => 6,
		'8100' => 8,
		'8200' => 8,
		'8300' => 6,
		'8400' => 5,
		'8500' => 5,
		'8600' => 8,
		'8700' => 7,
		'8800' => 8,
		'8900' => 7,
		'8A00' => 7,
		'8B00' => 7,
		'8C00' => 6,
		'8D00' => 8,
		'8E00' => 10,
		'8F00' => 7,
		'9000' => 8,
		'9100' => 6,
		'9200' => 7,
		'9300' => 7,
		'9400' => 9,
		'9500' => 9,
		'9600' => 6,
		'9700' => 3,
		'9800' => 9,
		'9900' => 7,
		'9A00' => 8,
		'9B00' => 9,
		'9C00' => 7,
		'9D00' => 10,
		'9E00' => 8,
		'9F00' => 8,
		'A000' => 10,
		'A100' => 7,
		'A200' => 6,
		'A300' => 8,
		'A400' => 7,
		'A500' => 6,
		'A600' => 6,
		'A700' => 8,
		'A800' => 7,
		'A900' => 6,
		'AA00' => 8,
		'AB00' => 7,
		'AC00' => 5,
		'AD00' => 6,
		'AE00' => 9,
		'AF00' => 6,
		'B000' => 7,
		'B100' => 4,
		'B200' => 4,
		'B300' => 6,
		'B400' => 7,
		'B500' => 8,
		'B600' => 9,
		'B700' => 6,
		'B800' => 9,
		'B900' => 10,
		'BA00' => 8,
		'BB00' => 6,
		'BC00' => 8,
		'BD00' => 8,
		'BE00' => 5,
		'BF00' => 7,
		'C000' => 8,
		'C100' => 5,
		'C200' => 6,
		'C300' => 8,
		'C400' => 6,
		'C500' => 7,
		'C600' => 7,
		'C700' => 8,
		'C800' => 9,
		'C900' => 5,
		'CA00' => 9,
		'CB00' => 8,
		'CC00' => 6,
		'CD00' => 10,
		'CE00' => 9,
		'CF00' => 6,
		'D000' => 7,
		'D100' => 8,
		'D200' => 8,
		'D300' => 8,
		'D400' => 6,
		'D500' => 7,
		'D600' => 9,
		'D700' => 7,
		'D800' => 9,
		'D900' => 8,
		'DA00' => 6,
		'DB00' => 8,
		'DC00' => 6,
		'DD00' => 9,
		'DE00' => 7,
		'DF00' => 8,
		'E000' => 9,
		'E100' => 8,
		'E200' => 7,
		'E300' => 8,
		'E400' => 8,
		'E500' => 8,
		'E600' => 7,
		'E700' => 6,
		'E800' => 7,
		'E900' => 8,
		'EA00' => 8,
		'EB00' => 8,
		'EC00' => 7,
		'ED00' => 9,
		'EE00' => 8,
		'EF00' => 6,
		'F000' => 5,
		'F100' => 7,
		'F200' => 7,
		'F300' => 6,
		'F400' => 5,
		'F500' => 7,
		'F600' => 8,
		'F700' => 7,
		'F800' => 9,
		'F900' => 5,
		'FA00' => 5,
		'FB00' => 6
    );
    }


    /**

    /**


    /**
     * Hardcoded Easy Chat length table for region 'f'.
     * Keys are 4-hex-digit EC codes, values are visible character lengths.
     */
    function bxt_easy_chat_length_table_f(): array
    {
        return array(
		'0000' => 0,
		'0001' => 8,
		'0101' => 5,
		'0201' => 3,
		'0301' => 6,
		'0401' => 6,
		'0501' => 7,
		'0601' => 5,
		'0701' => 3,
		'0801' => 4,
		'0901' => 8,
		'0A01' => 6,
		'0B01' => 6,
		'0C01' => 6,
		'0D01' => 5,
		'0E01' => 3,
		'0F01' => 3,
		'1001' => 3,
		'1101' => 7,
		'0002' => 6,
		'0102' => 5,
		'0202' => 8,
		'0302' => 5,
		'0402' => 8,
		'0502' => 5,
		'0602' => 7,
		'0702' => 6,
		'0802' => 5,
		'0902' => 6,
		'0A02' => 7,
		'0B02' => 7,
		'0C02' => 7,
		'0D02' => 5,
		'0E02' => 8,
		'0F02' => 5,
		'1002' => 8,
		'1102' => 6,
		'1202' => 4,
		'1302' => 6,
		'1402' => 3,
		'1502' => 7,
		'1602' => 6,
		'1702' => 6,
		'1802' => 3,
		'1902' => 8,
		'1A02' => 5,
		'1B02' => 2,
		'1C02' => 7,
		'1D02' => 7,
		'1E02' => 6,
		'1F02' => 5,
		'2002' => 2,
		'2102' => 8,
		'2202' => 7,
		'2302' => 8,
		'0003' => 8,
		'0103' => 2,
		'0203' => 2,
		'0303' => 3,
		'0403' => 4,
		'0503' => 3,
		'0603' => 4,
		'0703' => 4,
		'0803' => 4,
		'0903' => 4,
		'0A03' => 5,
		'0B03' => 4,
		'0C03' => 6,
		'0D03' => 6,
		'0E03' => 5,
		'0F03' => 5,
		'1003' => 4,
		'1103' => 5,
		'1203' => 3,
		'1303' => 5,
		'1403' => 4,
		'1503' => 7,
		'1603' => 2,
		'1703' => 3,
		'1803' => 2,
		'1903' => 4,
		'1A03' => 2,
		'1B03' => 3,
		'1C03' => 5,
		'1D03' => 2,
		'1E03' => 4,
		'1F03' => 2,
		'2003' => 7,
		'2103' => 5,
		'2203' => 6,
		'2303' => 4,
		'2403' => 3,
		'2503' => 7,
		'2603' => 3,
		'2703' => 3,
		'2803' => 1,
		'2903' => 2,
		'2A03' => 5,
		'2B03' => 5,
		'2C03' => 3,
		'2D03' => 5,
		'2E03' => 8,
		'2F03' => 4,
		'3003' => 5,
		'3103' => 8,
		'3203' => 3,
		'3303' => 3,
		'3403' => 5,
		'3503' => 3,
		'3603' => 4,
		'3703' => 8,
		'3803' => 8,
		'3903' => 4,
		'3A03' => 3,
		'3B03' => 2,
		'3C03' => 6,
		'3D03' => 7,
		'3E03' => 5,
		'3F03' => 4,
		'4003' => 3,
		'4103' => 6,
		'4203' => 2,
		'4303' => 8,
		'4403' => 9,
		'0004' => 7,
		'0104' => 6,
		'0204' => 4,
		'0304' => 7,
		'0404' => 8,
		'0504' => 5,
		'0604' => 6,
		'0704' => 8,
		'0804' => 8,
		'0904' => 6,
		'0A04' => 5,
		'0B04' => 8,
		'0C04' => 8,
		'0D04' => 6,
		'0E04' => 8,
		'0F04' => 8,
		'1004' => 6,
		'1104' => 7,
		'1204' => 8,
		'1304' => 8,
		'1404' => 4,
		'1504' => 6,
		'1604' => 8,
		'1704' => 8,
		'1804' => 5,
		'1904' => 8,
		'1A04' => 4,
		'1B04' => 4,
		'1C04' => 6,
		'1D04' => 7,
		'1E04' => 8,
		'1F04' => 4,
		'2004' => 4,
		'2104' => 7,
		'2204' => 4,
		'2304' => 6,
		'2404' => 8,
		'2504' => 6,
		'2604' => 5,
		'2704' => 7,
		'2804' => 8,
		'2904' => 8,
		'2A04' => 5,
		'2B04' => 3,
		'2C04' => 5,
		'2D04' => 6,
		'2E04' => 6,
		'2F04' => 6,
		'3004' => 7,
		'3104' => 7,
		'3204' => 7,
		'3304' => 7,
		'3404' => 8,
		'3504' => 5,
		'3604' => 6,
		'3704' => 8,
		'3804' => 8,
		'3904' => 7,
		'3A04' => 8,
		'3B04' => 8,
		'3C04' => 5,
		'3D04' => 6,
		'3E04' => 6,
		'3F04' => 5,
		'4004' => 8,
		'4104' => 4,
		'4204' => 5,
		'4304' => 6,
		'4404' => 8,
		'0005' => 2,
		'0105' => 1,
		'0205' => 2,
		'0305' => 2,
		'0405' => 1,
		'0505' => 2,
		'0605' => 9,
		'0705' => 1,
		'0805' => 5,
		'0905' => 7,
		'0A05' => 4,
		'0B05' => 8,
		'0C05' => 3,
		'0D05' => 3,
		'0E05' => 3,
		'0F05' => 4,
		'1005' => 5,
		'1105' => 7,
		'1205' => 7,
		'1305' => 6,
		'1405' => 7,
		'1505' => 7,
		'1605' => 8,
		'1705' => 8,
		'1805' => 5,
		'1905' => 3,
		'1A05' => 8,
		'1B05' => 8,
		'1C05' => 6,
		'1D05' => 4,
		'1E05' => 9,
		'1F05' => 6,
		'2005' => 6,
		'2105' => 6,
		'2205' => 7,
		'2305' => 6,
		'2405' => 4,
		'2505' => 7,
		'2605' => 3,
		'2705' => 8,
		'2805' => 6,
		'2905' => 6,
		'2A05' => 8,
		'2B05' => 5,
		'2C05' => 6,
		'2D05' => 7,
		'2E05' => 7,
		'2F05' => 4,
		'3005' => 7,
		'3105' => 4,
		'3205' => 7,
		'3305' => 9,
		'3405' => 2,
		'3505' => 9,
		'3605' => 6,
		'3705' => 4,
		'3805' => 2,
		'3905' => 3,
		'3A05' => 6,
		'3B05' => 2,
		'3C05' => 9,
		'3D05' => 5,
		'3E05' => 4,
		'3F05' => 6,
		'4005' => 4,
		'4105' => 7,
		'0006' => 6,
		'0106' => 8,
		'0206' => 7,
		'0306' => 5,
		'0406' => 6,
		'0506' => 4,
		'0606' => 4,
		'0706' => 3,
		'0806' => 7,
		'0906' => 6,
		'0A06' => 2,
		'0B06' => 4,
		'0C06' => 8,
		'0D06' => 3,
		'0E06' => 2,
		'0F06' => 7,
		'1006' => 6,
		'1106' => 6,
		'1206' => 7,
		'1306' => 8,
		'1406' => 6,
		'1506' => 6,
		'1606' => 9,
		'1706' => 8,
		'1806' => 2,
		'1906' => 9,
		'1A06' => 6,
		'1B06' => 8,
		'1C06' => 2,
		'1D06' => 4,
		'1E06' => 8,
		'1F06' => 6,
		'2006' => 2,
		'2106' => 6,
		'2206' => 1,
		'2306' => 7,
		'2406' => 8,
		'2506' => 5,
		'2606' => 7,
		'2706' => 6,
		'2806' => 8,
		'2906' => 4,
		'2A06' => 7,
		'2B06' => 8,
		'2C06' => 7,
		'2D06' => 8,
		'2E06' => 6,
		'2F06' => 8,
		'3006' => 4,
		'3106' => 6,
		'3206' => 7,
		'3306' => 6,
		'3406' => 6,
		'3506' => 8,
		'3606' => 5,
		'3706' => 8,
		'3806' => 6,
		'3906' => 8,
		'3A06' => 8,
		'3B06' => 4,
		'3C06' => 4,
		'3D06' => 8,
		'3E06' => 5,
		'3F06' => 7,
		'4006' => 7,
		'4106' => 5,
		'0007' => 6,
		'0107' => 7,
		'0207' => 4,
		'0307' => 7,
		'0407' => 7,
		'0507' => 7,
		'0607' => 6,
		'0707' => 7,
		'0807' => 5,
		'0907' => 6,
		'0A07' => 7,
		'0B07' => 4,
		'0C07' => 6,
		'0D07' => 7,
		'0E07' => 7,
		'0F07' => 7,
		'1007' => 7,
		'1107' => 8,
		'1207' => 7,
		'1307' => 7,
		'1407' => 5,
		'1507' => 6,
		'1607' => 8,
		'1707' => 8,
		'1807' => 4,
		'1907' => 6,
		'1A07' => 8,
		'1B07' => 3,
		'1C07' => 8,
		'1D07' => 7,
		'1E07' => 8,
		'1F07' => 9,
		'2007' => 8,
		'2107' => 6,
		'2207' => 8,
		'2307' => 7,
		'2407' => 7,
		'2507' => 7,
		'2607' => 7,
		'2707' => 4,
		'2807' => 7,
		'2907' => 8,
		'2A07' => 8,
		'2B07' => 5,
		'2C07' => 7,
		'2D07' => 8,
		'2E07' => 4,
		'2F07' => 6,
		'3007' => 7,
		'3107' => 7,
		'3207' => 6,
		'3307' => 7,
		'3407' => 6,
		'3507' => 4,
		'3607' => 4,
		'3707' => 9,
		'3807' => 8,
		'3907' => 4,
		'3A07' => 6,
		'3B07' => 4,
		'3C07' => 5,
		'3D07' => 9,
		'3E07' => 7,
		'3F07' => 4,
		'4007' => 9,
		'4107' => 8,
		'4207' => 8,
		'4307' => 8,
		'4407' => 7,
		'0008' => 5,
		'0108' => 6,
		'0208' => 8,
		'0308' => 4,
		'0408' => 6,
		'0508' => 3,
		'0608' => 7,
		'0708' => 4,
		'0808' => 7,
		'0908' => 9,
		'0A08' => 7,
		'0B08' => 6,
		'0C08' => 8,
		'0D08' => 5,
		'0E08' => 6,
		'0F08' => 5,
		'1008' => 8,
		'1108' => 6,
		'1208' => 4,
		'1308' => 6,
		'1408' => 4,
		'1508' => 6,
		'1608' => 7,
		'1708' => 7,
		'1808' => 4,
		'1908' => 8,
		'1A08' => 7,
		'1B08' => 4,
		'1C08' => 9,
		'1D08' => 9,
		'1E08' => 7,
		'1F08' => 5,
		'2008' => 5,
		'2108' => 7,
		'2208' => 8,
		'2308' => 7,
		'2408' => 8,
		'2508' => 7,
		'2608' => 6,
		'2708' => 4,
		'2808' => 7,
		'2908' => 7,
		'2A08' => 5,
		'2B08' => 8,
		'2C08' => 7,
		'2D08' => 8,
		'2E08' => 8,
		'2F08' => 5,
		'3008' => 4,
		'3108' => 8,
		'3208' => 7,
		'3308' => 6,
		'3408' => 6,
		'3508' => 3,
		'3608' => 8,
		'3708' => 4,
		'3808' => 8,
		'3908' => 9,
		'3A08' => 7,
		'3B08' => 6,
		'3C08' => 8,
		'3D08' => 4,
		'3E08' => 8,
		'3F08' => 6,
		'4008' => 9,
		'4108' => 8,
		'0009' => 7,
		'0109' => 6,
		'0209' => 6,
		'0309' => 7,
		'0409' => 4,
		'0509' => 5,
		'0609' => 6,
		'0709' => 6,
		'0809' => 7,
		'0909' => 8,
		'0A09' => 7,
		'0B09' => 5,
		'0C09' => 6,
		'0D09' => 7,
		'0E09' => 7,
		'0F09' => 7,
		'1009' => 7,
		'1109' => 5,
		'1209' => 6,
		'1309' => 4,
		'1409' => 4,
		'1509' => 8,
		'1609' => 2,
		'1709' => 8,
		'1809' => 5,
		'1909' => 7,
		'1A09' => 3,
		'1B09' => 5,
		'1C09' => 7,
		'1D09' => 4,
		'1E09' => 7,
		'1F09' => 5,
		'2009' => 5,
		'2109' => 7,
		'2209' => 5,
		'2309' => 4,
		'2409' => 8,
		'2509' => 5,
		'2609' => 5,
		'000A' => 4,
		'010A' => 6,
		'020A' => 7,
		'030A' => 6,
		'040A' => 7,
		'050A' => 8,
		'060A' => 7,
		'070A' => 6,
		'080A' => 7,
		'090A' => 6,
		'0A0A' => 8,
		'0B0A' => 7,
		'0C0A' => 3,
		'0D0A' => 8,
		'0E0A' => 6,
		'0F0A' => 4,
		'100A' => 5,
		'110A' => 5,
		'120A' => 8,
		'130A' => 7,
		'140A' => 7,
		'150A' => 5,
		'160A' => 5,
		'170A' => 7,
		'180A' => 7,
		'190A' => 9,
		'1A0A' => 8,
		'1B0A' => 8,
		'1C0A' => 4,
		'1D0A' => 6,
		'1E0A' => 7,
		'1F0A' => 8,
		'200A' => 7,
		'210A' => 6,
		'220A' => 5,
		'230A' => 6,
		'240A' => 8,
		'250A' => 8,
		'260A' => 7,
		'000B' => 8,
		'010B' => 4,
		'020B' => 6,
		'030B' => 5,
		'040B' => 5,
		'050B' => 4,
		'060B' => 8,
		'070B' => 7,
		'080B' => 6,
		'090B' => 4,
		'0A0B' => 5,
		'0B0B' => 8,
		'0C0B' => 8,
		'0D0B' => 7,
		'0E0B' => 7,
		'0F0B' => 8,
		'100B' => 6,
		'110B' => 7,
		'120B' => 6,
		'130B' => 8,
		'140B' => 9,
		'150B' => 8,
		'160B' => 7,
		'170B' => 5,
		'180B' => 8,
		'190B' => 8,
		'1A0B' => 8,
		'1B0B' => 7,
		'1C0B' => 7,
		'1D0B' => 6,
		'1E0B' => 5,
		'1F0B' => 5,
		'200B' => 5,
		'210B' => 5,
		'220B' => 6,
		'230B' => 6,
		'240B' => 5,
		'250B' => 7,
		'260B' => 8,
		'270B' => 8,
		'280B' => 9,
		'290B' => 7,
		'2A0B' => 8,
		'2B0B' => 8,
		'2C0B' => 5,
		'2D0B' => 6,
		'2E0B' => 5,
		'2F0B' => 6,
		'300B' => 6,
		'310B' => 4,
		'320B' => 5,
		'330B' => 8,
		'340B' => 5,
		'350B' => 6,
		'360B' => 5,
		'370B' => 4,
		'380B' => 4,
		'390B' => 7,
		'3A0B' => 7,
		'3B0B' => 4,
		'3C0B' => 7,
		'3D0B' => 6,
		'3E0B' => 6,
		'3F0B' => 7,
		'400B' => 6,
		'410B' => 7,
		'420B' => 8,
		'430B' => 8,
		'440B' => 7,
		'000C' => 7,
		'010C' => 5,
		'020C' => 6,
		'030C' => 4,
		'040C' => 7,
		'050C' => 8,
		'060C' => 8,
		'070C' => 5,
		'080C' => 5,
		'090C' => 3,
		'0A0C' => 5,
		'0B0C' => 4,
		'0C0C' => 7,
		'0D0C' => 8,
		'0E0C' => 5,
		'0F0C' => 8,
		'100C' => 8,
		'110C' => 8,
		'120C' => 5,
		'130C' => 6,
		'140C' => 8,
		'150C' => 6,
		'160C' => 4,
		'170C' => 4,
		'180C' => 4,
		'190C' => 5,
		'1A0C' => 8,
		'1B0C' => 6,
		'1C0C' => 3,
		'1D0C' => 8,
		'1E0C' => 5,
		'1F0C' => 8,
		'200C' => 7,
		'210C' => 5,
		'220C' => 7,
		'230C' => 5,
		'240C' => 5,
		'250C' => 4,
		'260C' => 7,
		'000D' => 6,
		'010D' => 2,
		'020D' => 1,
		'030D' => 3,
		'040D' => 8,
		'050D' => 6,
		'060D' => 4,
		'070D' => 4,
		'080D' => 5,
		'090D' => 6,
		'0A0D' => 8,
		'0B0D' => 3,
		'0C0D' => 4,
		'0D0D' => 4,
		'0E0D' => 5,
		'0F0D' => 4,
		'100D' => 5,
		'110D' => 5,
		'120D' => 4,
		'130D' => 2,
		'140D' => 4,
		'150D' => 7,
		'160D' => 7,
		'170D' => 5,
		'180D' => 8,
		'190D' => 5,
		'1A0D' => 5,
		'1B0D' => 6,
		'1C0D' => 8,
		'1D0D' => 8,
		'1E0D' => 5,
		'1F0D' => 4,
		'200D' => 2,
		'210D' => 3,
		'220D' => 3,
		'230D' => 3,
		'240D' => 3,
		'250D' => 2,
		'260D' => 8,
		'270D' => 7,
		'280D' => 8,
		'290D' => 7,
		'2A0D' => 4,
		'2B0D' => 4,
		'2C0D' => 4,
		'2D0D' => 4,
		'2E0D' => 7,
		'2F0D' => 4,
		'300D' => 5,
		'310D' => 4,
		'320D' => 4,
		'330D' => 2,
		'340D' => 2,
		'350D' => 7,
		'360D' => 2,
		'370D' => 7,
		'380D' => 6,
		'390D' => 6,
		'3A0D' => 7,
		'3B0D' => 4,
		'3C0D' => 4,
		'3D0D' => 9,
		'3E0D' => 6,
		'3F0D' => 3,
		'400D' => 8,
		'410D' => 8,
		'000E' => 7,
		'010E' => 7,
		'020E' => 5,
		'030E' => 4,
		'040E' => 6,
		'050E' => 5,
		'060E' => 7,
		'070E' => 4,
		'080E' => 3,
		'090E' => 6,
		'0A0E' => 4,
		'0B0E' => 4,
		'0C0E' => 6,
		'0D0E' => 2,
		'0E0E' => 6,
		'0F0E' => 4,
		'100E' => 8,
		'110E' => 3,
		'120E' => 7,
		'130E' => 6,
		'140E' => 6,
		'150E' => 6,
		'160E' => 7,
		'170E' => 3,
		'180E' => 5,
		'190E' => 4,
		'1A0E' => 5,
		'1B0E' => 4,
		'1C0E' => 6,
		'1D0E' => 5,
		'1E0E' => 4,
		'1F0E' => 7,
		'200E' => 7,
		'210E' => 9,
		'220E' => 6,
		'230E' => 7,
		'0100' => 10,
		'0200' => 10,
		'0300' => 10,
		'0400' => 9,
		'0500' => 9,
		'0600' => 10,
		'0700' => 8,
		'0800' => 9,
		'0900' => 7,
		'0A00' => 8,
		'0B00' => 10,
		'0C00' => 10,
		'0D00' => 7,
		'0E00' => 9,
		'0F00' => 10,
		'1000' => 7,
		'1100' => 8,
		'1200' => 10,
		'1300' => 7,
		'1400' => 5,
		'1500' => 8,
		'1600' => 10,
		'1700' => 3,
		'1800' => 5,
		'1900' => 7,
		'1A00' => 6,
		'1B00' => 9,
		'1C00' => 10,
		'1D00' => 8,
		'1E00' => 8,
		'1F00' => 9,
		'2000' => 8,
		'2100' => 8,
		'2200' => 8,
		'2300' => 7,
		'2400' => 9,
		'2500' => 6,
		'2600' => 8,
		'2700' => 9,
		'2800' => 9,
		'2900' => 10,
		'2A00' => 10,
		'2B00' => 9,
		'2C00' => 6,
		'2D00' => 9,
		'2E00' => 5,
		'2F00' => 8,
		'3000' => 8,
		'3100' => 8,
		'3200' => 10,
		'3300' => 10,
		'3400' => 7,
		'3500' => 7,
		'3600' => 10,
		'3700' => 9,
		'3800' => 9,
		'3900' => 10,
		'3A00' => 7,
		'3B00' => 7,
		'3C00' => 7,
		'3D00' => 7,
		'3E00' => 7,
		'3F00' => 4,
		'4000' => 7,
		'4100' => 8,
		'4200' => 6,
		'4300' => 9,
		'4400' => 10,
		'4500' => 9,
		'4600' => 10,
		'4700' => 8,
		'4800' => 9,
		'4900' => 10,
		'4A00' => 9,
		'4B00' => 10,
		'4C00' => 6,
		'4D00' => 6,
		'4E00' => 6,
		'4F00' => 8,
		'5000' => 9,
		'5100' => 7,
		'5200' => 8,
		'5300' => 10,
		'5400' => 5,
		'5500' => 6,
		'5600' => 6,
		'5700' => 9,
		'5800' => 7,
		'5900' => 10,
		'5A00' => 7,
		'5B00' => 9,
		'5C00' => 10,
		'5D00' => 8,
		'5E00' => 10,
		'5F00' => 4,
		'6000' => 9,
		'6100' => 9,
		'6200' => 6,
		'6300' => 8,
		'6400' => 8,
		'6500' => 9,
		'6600' => 9,
		'6700' => 8,
		'6800' => 8,
		'6900' => 9,
		'6A00' => 7,
		'6B00' => 6,
		'6C00' => 10,
		'6D00' => 5,
		'6E00' => 7,
		'6F00' => 10,
		'7000' => 10,
		'7100' => 9,
		'7200' => 10,
		'7300' => 10,
		'7400' => 10,
		'7500' => 8,
		'7600' => 10,
		'7700' => 9,
		'7800' => 5,
		'7900' => 7,
		'7A00' => 7,
		'7B00' => 10,
		'7C00' => 9,
		'7D00' => 7,
		'7E00' => 6,
		'7F00' => 10,
		'8000' => 6,
		'8100' => 9,
		'8200' => 8,
		'8300' => 8,
		'8400' => 9,
		'8500' => 5,
		'8600' => 7,
		'8700' => 7,
		'8800' => 6,
		'8900' => 7,
		'8A00' => 7,
		'8B00' => 9,
		'8C00' => 6,
		'8D00' => 8,
		'8E00' => 5,
		'8F00' => 7,
		'9000' => 9,
		'9100' => 8,
		'9200' => 7,
		'9300' => 9,
		'9400' => 5,
		'9500' => 10,
		'9600' => 6,
		'9700' => 3,
		'9800' => 9,
		'9900' => 9,
		'9A00' => 8,
		'9B00' => 10,
		'9C00' => 9,
		'9D00' => 10,
		'9E00' => 8,
		'9F00' => 9,
		'A000' => 10,
		'A100' => 9,
		'A200' => 7,
		'A300' => 8,
		'A400' => 7,
		'A500' => 4,
		'A600' => 10,
		'A700' => 7,
		'A800' => 7,
		'A900' => 9,
		'AA00' => 6,
		'AB00' => 7,
		'AC00' => 5,
		'AD00' => 4,
		'AE00' => 9,
		'AF00' => 6,
		'B000' => 7,
		'B100' => 4,
		'B200' => 4,
		'B300' => 8,
		'B400' => 9,
		'B500' => 7,
		'B600' => 8,
		'B700' => 6,
		'B800' => 9,
		'B900' => 10,
		'BA00' => 7,
		'BB00' => 8,
		'BC00' => 8,
		'BD00' => 7,
		'BE00' => 8,
		'BF00' => 10,
		'C000' => 10,
		'C100' => 5,
		'C200' => 7,
		'C300' => 8,
		'C400' => 7,
		'C500' => 7,
		'C600' => 8,
		'C700' => 7,
		'C800' => 9,
		'C900' => 5,
		'CA00' => 9,
		'CB00' => 9,
		'CC00' => 8,
		'CD00' => 9,
		'CE00' => 10,
		'CF00' => 9,
		'D000' => 7,
		'D100' => 8,
		'D200' => 8,
		'D300' => 8,
		'D400' => 7,
		'D500' => 8,
		'D600' => 8,
		'D700' => 8,
		'D800' => 9,
		'D900' => 8,
		'DA00' => 7,
		'DB00' => 10,
		'DC00' => 9,
		'DD00' => 9,
		'DE00' => 7,
		'DF00' => 8,
		'E000' => 9,
		'E100' => 7,
		'E200' => 9,
		'E300' => 8,
		'E400' => 7,
		'E500' => 9,
		'E600' => 7,
		'E700' => 6,
		'E800' => 7,
		'E900' => 8,
		'EA00' => 10,
		'EB00' => 10,
		'EC00' => 8,
		'ED00' => 7,
		'EE00' => 9,
		'EF00' => 6,
		'F000' => 5,
		'F100' => 8,
		'F200' => 9,
		'F300' => 6,
		'F400' => 5,
		'F500' => 7,
		'F600' => 8,
		'F700' => 9,
		'F800' => 9,
		'F900' => 5,
		'FA00' => 5,
		'FB00' => 6,
    );
    }


    /**
     * Hardcoded Easy Chat length table for region 'd'.
     * Keys are 4-hex-digit EC codes, values are visible character lengths.
     */
    function bxt_easy_chat_length_table_d(): array
    {
        return array(
		"0000" => 0,
		"0001" => 7,
		"0101" => 7,
		"0201" => 6,
		"0301" => 5,
		"0401" => 7,
		"0501" => 5,
		"0601" => 3,
		"0701" => 5,
		"0801" => 3,
		"0901" => 7,
		"0A01" => 4,
		"0B01" => 7,
		"0C01" => 6,
		"0D01" => 5,
		"0E01" => 7,
		"0F01" => 5,
		"1001" => 6,
		"1101" => 5,
		"0002" => 8,
		"0102" => 4,
		"0202" => 8,
		"0302" => 7,
		"0402" => 8,
		"0502" => 4,
		"0602" => 3,
		"0702" => 4,
		"0802" => 8,
		"0902" => 5,
		"0A02" => 6,
		"0B02" => 6,
		"0C02" => 3,
		"0D02" => 5,
		"0E02" => 7,
		"0F02" => 5,
		"1002" => 6,
		"1102" => 6,
		"1202" => 7,
		"1302" => 8,
		"1402" => 3,
		"1502" => 8,
		"1602" => 8,
		"1702" => 8,
		"1802" => 5,
		"1902" => 8,
		"1A02" => 6,
		"1B02" => 3,
		"1C02" => 6,
		"1D02" => 6,
		"1E02" => 7,
		"1F02" => 6,
		"2002" => 4,
		"2102" => 8,
		"2202" => 7,
		"2302" => 7,
		"0003" => 5,
		"0103" => 3,
		"0203" => 2,
		"0303" => 5,
		"0403" => 4,
		"0503" => 6,
		"0603" => 7,
		"0703" => 7,
		"0803" => 6,
		"0903" => 3,
		"0A03" => 5,
		"0B03" => 5,
		"0C03" => 5,
		"0D03" => 8,
		"0E03" => 6,
		"0F03" => 8,
		"1003" => 3,
		"1103" => 5,
		"1203" => 4,
		"1303" => 8,
		"1403" => 4,
		"1503" => 7,
		"1603" => 3,
		"1703" => 3,
		"1803" => 2,
		"1903" => 3,
		"1A03" => 7,
		"1B03" => 4,
		"1C03" => 7,
		"1D03" => 7,
		"1E03" => 4,
		"1F03" => 8,
		"2003" => 6,
		"2103" => 3,
		"2203" => 7,
		"2303" => 6,
		"2403" => 4,
		"2503" => 7,
		"2603" => 8,
		"2703" => 3,
		"2803" => 6,
		"2903" => 5,
		"2A03" => 7,
		"2B03" => 6,
		"2C03" => 7,
		"2D03" => 7,
		"2E03" => 4,
		"2F03" => 6,
		"3003" => 7,
		"3103" => 6,
		"3203" => 4,
		"3303" => 5,
		"3403" => 8,
		"3503" => 7,
		"3603" => 4,
		"3703" => 8,
		"3803" => 8,
		"3903" => 3,
		"3A03" => 5,
		"3B03" => 7,
		"3C03" => 5,
		"3D03" => 7,
		"3E03" => 6,
		"3F03" => 3,
		"4003" => 6,
		"4103" => 8,
		"4203" => 4,
		"4303" => 6,
		"4403" => 5,
		"0004" => 8,
		"0104" => 4,
		"0204" => 5,
		"0304" => 5,
		"0404" => 5,
		"0504" => 8,
		"0604" => 7,
		"0704" => 8,
		"0804" => 8,
		"0904" => 8,
		"0A04" => 7,
		"0B04" => 6,
		"0C04" => 8,
		"0D04" => 5,
		"0E04" => 7,
		"0F04" => 8,
		"1004" => 8,
		"1104" => 5,
		"1204" => 7,
		"1304" => 7,
		"1404" => 5,
		"1504" => 6,
		"1604" => 6,
		"1704" => 8,
		"1804" => 6,
		"1904" => 4,
		"1A04" => 8,
		"1B04" => 4,
		"1C04" => 5,
		"1D04" => 8,
		"1E04" => 5,
		"1F04" => 8,
		"2004" => 7,
		"2104" => 8,
		"2204" => 6,
		"2304" => 5,
		"2404" => 7,
		"2504" => 6,
		"2604" => 5,
		"2704" => 7,
		"2804" => 7,
		"2904" => 6,
		"2A04" => 7,
		"2B04" => 4,
		"2C04" => 7,
		"2D04" => 8,
		"2E04" => 7,
		"2F04" => 7,
		"3004" => 7,
		"3104" => 7,
		"3204" => 7,
		"3304" => 7,
		"3404" => 8,
		"3504" => 8,
		"3604" => 8,
		"3704" => 5,
		"3804" => 7,
		"3904" => 8,
		"3A04" => 7,
		"3B04" => 6,
		"3C04" => 8,
		"3D04" => 6,
		"3E04" => 7,
		"3F04" => 8,
		"4004" => 8,
		"4104" => 6,
		"4204" => 5,
		"4304" => 5,
		"4404" => 7,
		"0005" => 2,
		"0105" => 1,
		"0205" => 3,
		"0305" => 2,
		"0405" => 1,
		"0505" => 2,
		"0605" => 9,
		"0705" => 1,
		"0805" => 3,
		"0905" => 5,
		"0A05" => 5,
		"0B05" => 7,
		"0C05" => 3,
		"0D05" => 2,
		"0E05" => 2,
		"0F05" => 4,
		"1005" => 3,
		"1105" => 4,
		"1205" => 6,
		"1305" => 3,
		"1405" => 6,
		"1505" => 6,
		"1605" => 7,
		"1705" => 8,
		"1805" => 4,
		"1905" => 6,
		"1A05" => 6,
		"1B05" => 7,
		"1C05" => 7,
		"1D05" => 4,
		"1E05" => 7,
		"1F05" => 5,
		"2005" => 6,
		"2105" => 7,
		"2205" => 3,
		"2305" => 7,
		"2405" => 3,
		"2505" => 4,
		"2605" => 4,
		"2705" => 4,
		"2805" => 6,
		"2905" => 6,
		"2A05" => 6,
		"2B05" => 5,
		"2C05" => 6,
		"2D05" => 6,
		"2E05" => 3,
		"2F05" => 5,
		"3005" => 4,
		"3105" => 6,
		"3205" => 4,
		"3305" => 6,
		"3405" => 5,
		"3505" => 7,
		"3605" => 7,
		"3705" => 4,
		"3805" => 6,
		"3905" => 4,
		"3A05" => 7,
		"3B05" => 5,
		"3C05" => 6,
		"3D05" => 4,
		"3E05" => 4,
		"3F05" => 6,
		"4005" => 4,
		"4105" => 8,
		"0006" => 7,
		"0106" => 4,
		"0206" => 6,
		"0306" => 5,
		"0406" => 7,
		"0506" => 2,
		"0606" => 8,
		"0706" => 8,
		"0806" => 8,
		"0906" => 3,
		"0A06" => 7,
		"0B06" => 4,
		"0C06" => 6,
		"0D06" => 4,
		"0E06" => 7,
		"0F06" => 6,
		"1006" => 7,
		"1106" => 7,
		"1206" => 4,
		"1306" => 4,
		"1406" => 8,
		"1506" => 4,
		"1606" => 5,
		"1706" => 3,
		"1806" => 3,
		"1906" => 3,
		"1A06" => 4,
		"1B06" => 7,
		"1C06" => 4,
		"1D06" => 4,
		"1E06" => 5,
		"1F06" => 4,
		"2006" => 8,
		"2106" => 4,
		"2206" => 8,
		"2306" => 4,
		"2406" => 6,
		"2506" => 7,
		"2606" => 7,
		"2706" => 4,
		"2806" => 8,
		"2906" => 6,
		"2A06" => 5,
		"2B06" => 7,
		"2C06" => 7,
		"2D06" => 4,
		"2E06" => 7,
		"2F06" => 7,
		"3006" => 8,
		"3106" => 5,
		"3206" => 7,
		"3306" => 4,
		"3406" => 3,
		"3506" => 6,
		"3606" => 6,
		"3706" => 4,
		"3806" => 8,
		"3906" => 6,
		"3A06" => 4,
		"3B06" => 6,
		"3C06" => 4,
		"3D06" => 7,
		"3E06" => 7,
		"3F06" => 7,
		"4006" => 5,
		"4106" => 6,
		"0007" => 6,
		"0107" => 7,
		"0207" => 4,
		"0307" => 7,
		"0407" => 8,
		"0507" => 5,
		"0607" => 8,
		"0707" => 7,
		"0807" => 6,
		"0907" => 5,
		"0A07" => 8,
		"0B07" => 8,
		"0C07" => 7,
		"0D07" => 8,
		"0E07" => 5,
		"0F07" => 8,
		"1007" => 5,
		"1107" => 4,
		"1207" => 8,
		"1307" => 4,
		"1407" => 7,
		"1507" => 3,
		"1607" => 6,
		"1707" => 5,
		"1807" => 7,
		"1907" => 7,
		"1A07" => 3,
		"1B07" => 8,
		"1C07" => 8,
		"1D07" => 8,
		"1E07" => 8,
		"1F07" => 3,
		"2007" => 6,
		"2107" => 8,
		"2207" => 8,
		"2307" => 8,
		"2407" => 8,
		"2507" => 5,
		"2607" => 4,
		"2707" => 8,
		"2807" => 3,
		"2907" => 6,
		"2A07" => 7,
		"2B07" => 4,
		"2C07" => 7,
		"2D07" => 7,
		"2E07" => 6,
		"2F07" => 6,
		"3007" => 7,
		"3107" => 4,
		"3207" => 4,
		"3307" => 6,
		"3407" => 8,
		"3507" => 6,
		"3607" => 6,
		"3707" => 6,
		"3807" => 7,
		"3907" => 6,
		"3A07" => 6,
		"3B07" => 8,
		"3C07" => 7,
		"3D07" => 6,
		"3E07" => 5,
		"3F07" => 8,
		"4007" => 8,
		"4107" => 5,
		"4207" => 9,
		"4307" => 9,
		"4407" => 8,
		"0008" => 5,
		"0108" => 8,
		"0208" => 8,
		"0308" => 3,
		"0408" => 5,
		"0508" => 4,
		"0608" => 7,
		"0708" => 4,
		"0808" => 7,
		"0908" => 5,
		"0A08" => 8,
		"0B08" => 6,
		"0C08" => 8,
		"0D08" => 4,
		"0E08" => 8,
		"0F08" => 5,
		"1008" => 7,
		"1108" => 6,
		"1208" => 7,
		"1308" => 5,
		"1408" => 5,
		"1508" => 8,
		"1608" => 8,
		"1708" => 6,
		"1808" => 4,
		"1908" => 7,
		"1A08" => 7,
		"1B08" => 6,
		"1C08" => 6,
		"1D08" => 8,
		"1E08" => 5,
		"1F08" => 4,
		"2008" => 5,
		"2108" => 8,
		"2208" => 5,
		"2308" => 8,
		"2408" => 8,
		"2508" => 7,
		"2608" => 4,
		"2708" => 5,
		"2808" => 7,
		"2908" => 7,
		"2A08" => 5,
		"2B08" => 8,
		"2C08" => 4,
		"2D08" => 8,
		"2E08" => 7,
		"2F08" => 4,
		"3008" => 6,
		"3108" => 8,
		"3208" => 4,
		"3308" => 7,
		"3408" => 8,
		"3508" => 7,
		"3608" => 7,
		"3708" => 7,
		"3808" => 8,
		"3908" => 5,
		"3A08" => 6,
		"3B08" => 6,
		"3C08" => 8,
		"3D08" => 8,
		"3E08" => 8,
		"3F08" => 7,
		"4008" => 8,
		"4108" => 4,
		"0009" => 7,
		"0109" => 4,
		"0209" => 4,
		"0309" => 7,
		"0409" => 3,
		"0509" => 6,
		"0609" => 8,
		"0709" => 6,
		"0809" => 8,
		"0909" => 6,
		"0A09" => 6,
		"0B09" => 8,
		"0C09" => 7,
		"0D09" => 6,
		"0E09" => 8,
		"0F09" => 7,
		"1009" => 8,
		"1109" => 6,
		"1209" => 6,
		"1309" => 4,
		"1409" => 4,
		"1509" => 4,
		"1609" => 2,
		"1709" => 7,
		"1809" => 4,
		"1909" => 6,
		"1A09" => 4,
		"1B09" => 6,
		"1C09" => 8,
		"1D09" => 5,
		"1E09" => 6,
		"1F09" => 8,
		"2009" => 5,
		"2109" => 8,
		"2209" => 8,
		"2309" => 5,
		"2409" => 4,
		"2509" => 5,
		"2609" => 4,
		"000A" => 4,
		"010A" => 5,
		"020A" => 4,
		"030A" => 4,
		"040A" => 7,
		"050A" => 8,
		"060A" => 8,
		"070A" => 8,
		"080A" => 5,
		"090A" => 6,
		"0A0A" => 7,
		"0B0A" => 7,
		"0C0A" => 5,
		"0D0A" => 7,
		"0E0A" => 6,
		"0F0A" => 7,
		"100A" => 5,
		"110A" => 5,
		"120A" => 7,
		"130A" => 6,
		"140A" => 6,
		"150A" => 6,
		"160A" => 6,
		"170A" => 4,
		"180A" => 3,
		"190A" => 7,
		"1A0A" => 2,
		"1B0A" => 6,
		"1C0A" => 4,
		"1D0A" => 5,
		"1E0A" => 6,
		"1F0A" => 7,
		"200A" => 5,
		"210A" => 4,
		"220A" => 7,
		"230A" => 5,
		"240A" => 6,
		"250A" => 6,
		"260A" => 6,
		"000B" => 7,
		"010B" => 8,
		"020B" => 5,
		"030B" => 4,
		"040B" => 7,
		"050B" => 6,
		"060B" => 7,
		"070B" => 7,
		"080B" => 7,
		"090B" => 4,
		"0A0B" => 3,
		"0B0B" => 8,
		"0C0B" => 7,
		"0D0B" => 7,
		"0E0B" => 6,
		"0F0B" => 5,
		"100B" => 5,
		"110B" => 6,
		"120B" => 8,
		"130B" => 8,
		"140B" => 7,
		"150B" => 8,
		"160B" => 7,
		"170B" => 6,
		"180B" => 5,
		"190B" => 5,
		"1A0B" => 5,
		"1B0B" => 7,
		"1C0B" => 5,
		"1D0B" => 7,
		"1E0B" => 6,
		"1F0B" => 7,
		"200B" => 8,
		"210B" => 5,
		"220B" => 7,
		"230B" => 7,
		"240B" => 4,
		"250B" => 8,
		"260B" => 7,
		"270B" => 8,
		"280B" => 8,
		"290B" => 5,
		"2A0B" => 8,
		"2B0B" => 8,
		"2C0B" => 6,
		"2D0B" => 5,
		"2E0B" => 7,
		"2F0B" => 6,
		"300B" => 8,
		"310B" => 6,
		"320B" => 5,
		"330B" => 6,
		"340B" => 5,
		"350B" => 8,
		"360B" => 8,
		"370B" => 6,
		"380B" => 5,
		"390B" => 6,
		"3A0B" => 6,
		"3B0B" => 5,
		"3C0B" => 6,
		"3D0B" => 8,
		"3E0B" => 8,
		"3F0B" => 8,
		"400B" => 8,
		"410B" => 8,
		"420B" => 8,
		"430B" => 8,
		"440B" => 8,
		"000C" => 6,
		"010C" => 6,
		"020C" => 5,
		"030C" => 3,
		"040C" => 8,
		"050C" => 5,
		"060C" => 8,
		"070C" => 4,
		"080C" => 4,
		"090C" => 4,
		"0A0C" => 8,
		"0B0C" => 7,
		"0C0C" => 5,
		"0D0C" => 7,
		"0E0C" => 6,
		"0F0C" => 7,
		"100C" => 7,
		"110C" => 8,
		"120C" => 4,
		"130C" => 6,
		"140C" => 9,
		"150C" => 5,
		"160C" => 5,
		"170C" => 5,
		"180C" => 5,
		"190C" => 8,
		"1A0C" => 9,
		"1B0C" => 8,
		"1C0C" => 6,
		"1D0C" => 7,
		"1E0C" => 6,
		"1F0C" => 9,
		"200C" => 9,
		"210C" => 6,
		"220C" => 7,
		"230C" => 8,
		"240C" => 8,
		"250C" => 5,
		"260C" => 5,
		"000D" => 6,
		"010D" => 3,
		"020D" => 1,
		"030D" => 3,
		"040D" => 8,
		"050D" => 6,
		"060D" => 3,
		"070D" => 7,
		"080D" => 7,
		"090D" => 7,
		"0A0D" => 6,
		"0B0D" => 3,
		"0C0D" => 8,
		"0D0D" => 8,
		"0E0D" => 6,
		"0F0D" => 4,
		"100D" => 3,
		"110D" => 7,
		"120D" => 4,
		"130D" => 8,
		"140D" => 8,
		"150D" => 6,
		"160D" => 7,
		"170D" => 5,
		"180D" => 5,
		"190D" => 3,
		"1A0D" => 3,
		"1B0D" => 6,
		"1C0D" => 6,
		"1D0D" => 8,
		"1E0D" => 4,
		"1F0D" => 8,
		"200D" => 3,
		"210D" => 4,
		"220D" => 6,
		"230D" => 2,
		"240D" => 6,
		"250D" => 2,
		"260D" => 5,
		"270D" => 5,
		"280D" => 4,
		"290D" => 2,
		"2A0D" => 3,
		"2B0D" => 2,
		"2C0D" => 3,
		"2D0D" => 7,
		"2E0D" => 2,
		"2F0D" => 3,
		"300D" => 6,
		"310D" => 6,
		"320D" => 4,
		"330D" => 5,
		"340D" => 6,
		"350D" => 3,
		"360D" => 2,
		"370D" => 3,
		"380D" => 4,
		"390D" => 8,
		"3A0D" => 5,
		"3B0D" => 4,
		"3C0D" => 4,
		"3D0D" => 6,
		"3E0D" => 8,
		"3F0D" => 3,
		"400D" => 6,
		"410D" => 9,
		"000E" => 6,
		"010E" => 6,
		"020E" => 2,
		"030E" => 6,
		"040E" => 6,
		"050E" => 4,
		"060E" => 8,
		"070E" => 4,
		"080E" => 4,
		"090E" => 5,
		"0A0E" => 6,
		"0B0E" => 5,
		"0C0E" => 6,
		"0D0E" => 4,
		"0E0E" => 6,
		"0F0E" => 7,
		"100E" => 8,
		"110E" => 3,
		"120E" => 5,
		"130E" => 5,
		"140E" => 9,
		"150E" => 9,
		"160E" => 7,
		"170E" => 4,
		"180E" => 4,
		"190E" => 4,
		"1A0E" => 4,
		"1B0E" => 4,
		"1C0E" => 2,
		"1D0E" => 6,
		"1E0E" => 3,
		"1F0E" => 4,
		"200E" => 6,
		"210E" => 6,
		"220E" => 8,
		"230E" => 8,
		"0100" => 7,
		"0200" => 9,
		"0300" => 8,
		"0400" => 8,
		"0500" => 7,
		"0600" => 6,
		"0700" => 7,
		"0800" => 8,
		"0900" => 6,
		"0A00" => 5,
		"0B00" => 6,
		"0C00" => 7,
		"0D00" => 7,
		"0E00" => 6,
		"0F00" => 5,
		"1000" => 6,
		"1100" => 7,
		"1200" => 7,
		"1300" => 9,
		"1400" => 9,
		"1500" => 7,
		"1600" => 6,
		"1700" => 6,
		"1800" => 5,
		"1900" => 7,
		"1A00" => 6,
		"1B00" => 6,
		"1C00" => 8,
		"1D00" => 8,
		"1E00" => 8,
		"1F00" => 9,
		"2000" => 8,
		"2100" => 8,
		"2200" => 8,
		"2300" => 5,
		"2400" => 4,
		"2500" => 6,
		"2600" => 7,
		"2700" => 9,
		"2800" => 10,
		"2900" => 5,
		"2A00" => 6,
		"2B00" => 7,
		"2C00" => 6,
		"2D00" => 6,
		"2E00" => 5,
		"2F00" => 7,
		"3000" => 6,
		"3100" => 4,
		"3200" => 5,
		"3300" => 6,
		"3400" => 5,
		"3500" => 10,
		"3600" => 5,
		"3700" => 7,
		"3800" => 5,
		"3900" => 6,
		"3A00" => 6,
		"3B00" => 6,
		"3C00" => 7,
		"3D00" => 8,
		"3E00" => 6,
		"3F00" => 4,
		"4000" => 7,
		"4100" => 7,
		"4200" => 8,
		"4300" => 8,
		"4400" => 8,
		"4500" => 8,
		"4600" => 10,
		"4700" => 8,
		"4800" => 8,
		"4900" => 7,
		"4A00" => 10,
		"4B00" => 6,
		"4C00" => 6,
		"4D00" => 6,
		"4E00" => 7,
		"4F00" => 6,
		"5000" => 6,
		"5100" => 6,
		"5200" => 7,
		"5300" => 7,
		"5400" => 6,
		"5500" => 7,
		"5600" => 7,
		"5700" => 6,
		"5800" => 4,
		"5900" => 8,
		"5A00" => 5,
		"5B00" => 6,
		"5C00" => 7,
		"5D00" => 8,
		"5E00" => 9,
		"5F00" => 4,
		"6000" => 7,
		"6100" => 8,
		"6200" => 6,
		"6300" => 7,
		"6400" => 8,
		"6500" => 7,
		"6600" => 6,
		"6700" => 7,
		"6800" => 7,
		"6900" => 7,
		"6A00" => 8,
		"6B00" => 7,
		"6C00" => 7,
		"6D00" => 6,
		"6E00" => 6,
		"6F00" => 7,
		"7000" => 7,
		"7100" => 7,
		"7200" => 7,
		"7300" => 8,
		"7400" => 7,
		"7500" => 7,
		"7600" => 7,
		"7700" => 6,
		"7800" => 6,
		"7900" => 6,
		"7A00" => 8,
		"7B00" => 7,
		"7C00" => 6,
		"7D00" => 5,
		"7E00" => 5,
		"7F00" => 6,
		"8000" => 7,
		"8100" => 7,
		"8200" => 7,
		"8300" => 8,
		"8400" => 7,
		"8500" => 6,
		"8600" => 8,
		"8700" => 10,
		"8800" => 6,
		"8900" => 6,
		"8A00" => 6,
		"8B00" => 7,
		"8C00" => 7,
		"8D00" => 8,
		"8E00" => 5,
		"8F00" => 3,
		"9000" => 7,
		"9100" => 8,
		"9200" => 7,
		"9300" => 8,
		"9400" => 7,
		"9500" => 8,
		"9600" => 9,
		"9700" => 8,
		"9800" => 10,
		"9900" => 8,
		"9A00" => 7,
		"9B00" => 6,
		"9C00" => 6,
		"9D00" => 6,
		"9E00" => 7,
		"9F00" => 7,
		"A000" => 6,
		"A100" => 5,
		"A200" => 7,
		"A300" => 5,
		"A400" => 3,
		"A500" => 10,
		"A600" => 7,
		"A700" => 4,
		"A800" => 4,
		"A900" => 9,
		"AA00" => 7,
		"AB00" => 8,
		"AC00" => 8,
		"AD00" => 6,
		"AE00" => 9,
		"AF00" => 9,
		"B000" => 5,
		"B100" => 10,
		"B200" => 8,
		"B300" => 7,
		"B400" => 7,
		"B500" => 8,
		"B600" => 9,
		"B700" => 5,
		"B800" => 6,
		"B900" => 7,
		"BA00" => 6,
		"BB00" => 8,
		"BC00" => 7,
		"BD00" => 10,
		"BE00" => 10,
		"BF00" => 7,
		"C000" => 9,
		"C100" => 9,
		"C200" => 6,
		"C300" => 10,
		"C400" => 8,
		"C500" => 7,
		"C600" => 7,
		"C700" => 8,
		"C800" => 8,
		"C900" => 10,
		"CA00" => 7,
		"CB00" => 8,
		"CC00" => 9,
		"CD00" => 6,
		"CE00" => 9,
		"CF00" => 8,
		"D000" => 10,
		"D100" => 8,
		"D200" => 7,
		"D300" => 6,
		"D400" => 8,
		"D500" => 8,
		"D600" => 9,
		"D700" => 7,
		"D800" => 6,
		"D900" => 9,
		"DA00" => 9,
		"DB00" => 8,
		"DC00" => 10,
		"DD00" => 6,
		"DE00" => 7,
		"DF00" => 8,
		"E000" => 10,
		"E100" => 9,
		"E200" => 6,
		"E300" => 7,
		"E400" => 8,
		"E500" => 6,
		"E600" => 5,
		"E700" => 7,
		"E800" => 8,
		"E900" => 6,
		"EA00" => 5,
		"EB00" => 7,
		"EC00" => 8,
		"ED00" => 7,
		"EE00" => 8,
		"EF00" => 5,
		"F000" => 5,
		"F100" => 6,
		"F200" => 8,
		"F300" => 6,
		"F400" => 5,
		"F500" => 7,
		"F600" => 8,
		"F700" => 7,
		"F800" => 8,
		"F900" => 5,
		"FA00" => 5,
		"FB00" => 6,
    );
    }


    /**
     * Hardcoded Easy Chat length table for region 's'.
     * Keys are 4-hex-digit EC codes, values are visible character lengths.
     */
    function bxt_easy_chat_length_table_s(): array
    {
        return array(
		"0000" => 0,
		"0001" => 4,
		"0101" => 6,
		"0201" => 5,
		"0301" => 5,
		"0401" => 4,
		"0501" => 7,
		"0601" => 8,
		"0701" => 5,
		"0801" => 4,
		"0901" => 7,
		"0A01" => 6,
		"0B01" => 5,
		"0C01" => 7,
		"0D01" => 7,
		"0E01" => 7,
		"0F01" => 5,
		"1001" => 5,
		"1101" => 7,
		"0002" => 7,
		"0102" => 6,
		"0202" => 5,
		"0302" => 6,
		"0402" => 7,
		"0502" => 4,
		"0602" => 8,
		"0702" => 7,
		"0802" => 7,
		"0902" => 5,
		"0A02" => 6,
		"0B02" => 7,
		"0C02" => 5,
		"0D02" => 5,
		"0E02" => 7,
		"0F02" => 8,
		"1002" => 8,
		"1102" => 6,
		"1202" => 7,
		"1302" => 6,
		"1402" => 3,
		"1502" => 4,
		"1602" => 5,
		"1702" => 4,
		"1802" => 6,
		"1902" => 7,
		"1A02" => 5,
		"1B02" => 3,
		"1C02" => 6,
		"1D02" => 7,
		"1E02" => 7,
		"1F02" => 4,
		"2002" => 6,
		"2102" => 7,
		"2202" => 7,
		"2302" => 7,
		"0003" => 6,
		"0103" => 7,
		"0203" => 5,
		"0303" => 6,
		"0403" => 6,
		"0503" => 3,
		"0603" => 6,
		"0703" => 6,
		"0803" => 5,
		"0903" => 5,
		"0A03" => 3,
		"0B03" => 5,
		"0C03" => 7,
		"0D03" => 6,
		"0E03" => 8,
		"0F03" => 7,
		"1003" => 5,
		"1103" => 3,
		"1203" => 7,
		"1303" => 7,
		"1403" => 7,
		"1503" => 8,
		"1603" => 6,
		"1703" => 6,
		"1803" => 4,
		"1903" => 7,
		"1A03" => 6,
		"1B03" => 7,
		"1C03" => 7,
		"1D03" => 7,
		"1E03" => 7,
		"1F03" => 8,
		"2003" => 7,
		"2103" => 7,
		"2203" => 6,
		"2303" => 6,
		"2403" => 6,
		"2503" => 7,
		"2603" => 6,
		"2703" => 3,
		"2803" => 8,
		"2903" => 7,
		"2A03" => 6,
		"2B03" => 6,
		"2C03" => 6,
		"2D03" => 7,
		"2E03" => 8,
		"2F03" => 5,
		"3003" => 5,
		"3103" => 7,
		"3203" => 7,
		"3303" => 4,
		"3403" => 7,
		"3503" => 7,
		"3603" => 7,
		"3703" => 7,
		"3803" => 6,
		"3903" => 9,
		"3A03" => 6,
		"3B03" => 5,
		"3C03" => 7,
		"3D03" => 8,
		"3E03" => 7,
		"3F03" => 6,
		"4003" => 6,
		"4103" => 8,
		"4203" => 6,
		"4303" => 8,
		"4403" => 7,
		"0004" => 5,
		"0104" => 4,
		"0204" => 4,
		"0304" => 7,
		"0404" => 7,
		"0504" => 5,
		"0604" => 5,
		"0704" => 5,
		"0804" => 7,
		"0904" => 8,
		"0A04" => 7,
		"0B04" => 7,
		"0C04" => 8,
		"0D04" => 5,
		"0E04" => 6,
		"0F04" => 4,
		"1004" => 7,
		"1104" => 6,
		"1204" => 7,
		"1304" => 4,
		"1404" => 6,
		"1504" => 5,
		"1604" => 7,
		"1704" => 7,
		"1804" => 8,
		"1904" => 8,
		"1A04" => 7,
		"1B04" => 5,
		"1C04" => 6,
		"1D04" => 5,
		"1E04" => 7,
		"1F04" => 5,
		"2004" => 5,
		"2104" => 6,
		"2204" => 8,
		"2304" => 7,
		"2404" => 7,
		"2504" => 6,
		"2604" => 5,
		"2704" => 8,
		"2804" => 6,
		"2904" => 4,
		"2A04" => 7,
		"2B04" => 7,
		"2C04" => 5,
		"2D04" => 6,
		"2E04" => 8,
		"2F04" => 6,
		"3004" => 7,
		"3104" => 5,
		"3204" => 6,
		"3304" => 7,
		"3404" => 7,
		"3504" => 5,
		"3604" => 5,
		"3704" => 6,
		"3804" => 8,
		"3904" => 7,
		"3A04" => 8,
		"3B04" => 7,
		"3C04" => 5,
		"3D04" => 6,
		"3E04" => 6,
		"3F04" => 7,
		"4004" => 7,
		"4104" => 7,
		"4204" => 6,
		"4304" => 7,
		"4404" => 5,
		"0005" => 2,
		"0105" => 1,
		"0205" => 1,
		"0305" => 2,
		"0405" => 1,
		"0505" => 2,
		"0605" => 9,
		"0705" => 1,
		"0805" => 5,
		"0905" => 5,
		"0A05" => 7,
		"0B05" => 7,
		"0C05" => 3,
		"0D05" => 7,
		"0E05" => 2,
		"0F05" => 4,
		"1005" => 6,
		"1105" => 6,
		"1205" => 7,
		"1305" => 3,
		"1405" => 7,
		"1505" => 7,
		"1605" => 7,
		"1705" => 7,
		"1805" => 3,
		"1905" => 5,
		"1A05" => 5,
		"1B05" => 7,
		"1C05" => 8,
		"1D05" => 4,
		"1E05" => 7,
		"1F05" => 5,
		"2005" => 6,
		"2105" => 7,
		"2205" => 8,
		"2305" => 7,
		"2405" => 3,
		"2505" => 4,
		"2605" => 2,
		"2705" => 6,
		"2805" => 7,
		"2905" => 6,
		"2A05" => 7,
		"2B05" => 6,
		"2C05" => 6,
		"2D05" => 7,
		"2E05" => 4,
		"2F05" => 5,
		"3005" => 3,
		"3105" => 7,
		"3205" => 6,
		"3305" => 6,
		"3405" => 4,
		"3505" => 8,
		"3605" => 6,
		"3705" => 4,
		"3805" => 6,
		"3905" => 4,
		"3A05" => 6,
		"3B05" => 2,
		"3C05" => 6,
		"3D05" => 5,
		"3E05" => 5,
		"3F05" => 4,
		"4005" => 8,
		"4105" => 9,
		"0006" => 2,
		"0106" => 3,
		"0206" => 1,
		"0306" => 6,
		"0406" => 3,
		"0506" => 5,
		"0606" => 2,
		"0706" => 3,
		"0806" => 3,
		"0906" => 2,
		"0A06" => 1,
		"0B06" => 2,
		"0C06" => 3,
		"0D06" => 2,
		"0E06" => 3,
		"0F06" => 4,
		"1006" => 7,
		"1106" => 7,
		"1206" => 6,
		"1306" => 4,
		"1406" => 5,
		"1506" => 6,
		"1606" => 6,
		"1706" => 6,
		"1806" => 1,
		"1906" => 4,
		"1A06" => 3,
		"1B06" => 5,
		"1C06" => 2,
		"1D06" => 5,
		"1E06" => 4,
		"1F06" => 4,
		"2006" => 5,
		"2106" => 7,
		"2206" => 4,
		"2306" => 3,
		"2406" => 5,
		"2506" => 7,
		"2606" => 6,
		"2706" => 4,
		"2806" => 2,
		"2906" => 3,
		"2A06" => 5,
		"2B06" => 3,
		"2C06" => 7,
		"2D06" => 5,
		"2E06" => 6,
		"2F06" => 5,
		"3006" => 4,
		"3106" => 5,
		"3206" => 6,
		"3306" => 4,
		"3406" => 3,
		"3506" => 3,
		"3606" => 5,
		"3706" => 6,
		"3806" => 5,
		"3906" => 3,
		"3A06" => 5,
		"3B06" => 4,
		"3C06" => 6,
		"3D06" => 2,
		"3E06" => 5,
		"3F06" => 2,
		"4006" => 5,
		"4106" => 5,
		"0007" => 7,
		"0107" => 7,
		"0207" => 5,
		"0307" => 8,
		"0407" => 6,
		"0507" => 9,
		"0607" => 6,
		"0707" => 7,
		"0807" => 7,
		"0907" => 7,
		"0A07" => 8,
		"0B07" => 7,
		"0C07" => 6,
		"0D07" => 7,
		"0E07" => 8,
		"0F07" => 5,
		"1007" => 7,
		"1107" => 4,
		"1207" => 6,
		"1307" => 7,
		"1407" => 7,
		"1507" => 6,
		"1607" => 7,
		"1707" => 7,
		"1807" => 5,
		"1907" => 7,
		"1A07" => 7,
		"1B07" => 8,
		"1C07" => 5,
		"1D07" => 5,
		"1E07" => 7,
		"1F07" => 7,
		"2007" => 7,
		"2107" => 8,
		"2207" => 5,
		"2307" => 5,
		"2407" => 5,
		"2507" => 9,
		"2607" => 7,
		"2707" => 8,
		"2807" => 8,
		"2907" => 8,
		"2A07" => 7,
		"2B07" => 6,
		"2C07" => 8,
		"2D07" => 8,
		"2E07" => 5,
		"2F07" => 7,
		"3007" => 8,
		"3107" => 6,
		"3207" => 6,
		"3307" => 7,
		"3407" => 7,
		"3507" => 8,
		"3607" => 4,
		"3707" => 6,
		"3807" => 8,
		"3907" => 5,
		"3A07" => 7,
		"3B07" => 6,
		"3C07" => 7,
		"3D07" => 8,
		"3E07" => 4,
		"3F07" => 7,
		"4007" => 8,
		"4107" => 7,
		"4207" => 8,
		"4307" => 7,
		"4407" => 6,
		"0008" => 5,
		"0108" => 5,
		"0208" => 5,
		"0308" => 5,
		"0408" => 8,
		"0508" => 5,
		"0608" => 8,
		"0708" => 4,
		"0808" => 7,
		"0908" => 8,
		"0A08" => 6,
		"0B08" => 7,
		"0C08" => 9,
		"0D08" => 5,
		"0E08" => 7,
		"0F08" => 5,
		"1008" => 8,
		"1108" => 6,
		"1208" => 7,
		"1308" => 6,
		"1408" => 8,
		"1508" => 8,
		"1608" => 8,
		"1708" => 5,
		"1808" => 7,
		"1908" => 8,
		"1A08" => 7,
		"1B08" => 8,
		"1C08" => 4,
		"1D08" => 8,
		"1E08" => 7,
		"1F08" => 6,
		"2008" => 7,
		"2108" => 9,
		"2208" => 5,
		"2308" => 7,
		"2408" => 8,
		"2508" => 6,
		"2608" => 7,
		"2708" => 8,
		"2808" => 7,
		"2908" => 6,
		"2A08" => 8,
		"2B08" => 8,
		"2C08" => 6,
		"2D08" => 7,
		"2E08" => 7,
		"2F08" => 7,
		"3008" => 7,
		"3108" => 8,
		"3208" => 7,
		"3308" => 6,
		"3408" => 7,
		"3508" => 6,
		"3608" => 6,
		"3708" => 8,
		"3808" => 8,
		"3908" => 8,
		"3A08" => 5,
		"3B08" => 5,
		"3C08" => 6,
		"3D08" => 6,
		"3E08" => 7,
		"3F08" => 8,
		"4008" => 9,
		"4108" => 6,
		"0009" => 7,
		"0109" => 4,
		"0209" => 5,
		"0309" => 8,
		"0409" => 5,
		"0509" => 6,
		"0609" => 7,
		"0709" => 6,
		"0809" => 5,
		"0909" => 7,
		"0A09" => 6,
		"0B09" => 5,
		"0C09" => 4,
		"0D09" => 7,
		"0E09" => 8,
		"0F09" => 7,
		"1009" => 6,
		"1109" => 7,
		"1209" => 6,
		"1309" => 5,
		"1409" => 4,
		"1509" => 8,
		"1609" => 2,
		"1709" => 8,
		"1809" => 7,
		"1909" => 7,
		"1A09" => 4,
		"1B09" => 8,
		"1C09" => 7,
		"1D09" => 5,
		"1E09" => 6,
		"1F09" => 8,
		"2009" => 6,
		"2109" => 6,
		"2209" => 7,
		"2309" => 5,
		"2409" => 5,
		"2509" => 5,
		"2609" => 5,
		"000A" => 5,
		"010A" => 4,
		"020A" => 6,
		"030A" => 6,
		"040A" => 5,
		"050A" => 4,
		"060A" => 6,
		"070A" => 7,
		"080A" => 6,
		"090A" => 5,
		"0A0A" => 8,
		"0B0A" => 8,
		"0C0A" => 5,
		"0D0A" => 8,
		"0E0A" => 6,
		"0F0A" => 4,
		"100A" => 5,
		"110A" => 5,
		"120A" => 7,
		"130A" => 6,
		"140A" => 7,
		"150A" => 7,
		"160A" => 7,
		"170A" => 8,
		"180A" => 8,
		"190A" => 7,
		"1A0A" => 2,
		"1B0A" => 5,
		"1C0A" => 4,
		"1D0A" => 7,
		"1E0A" => 7,
		"1F0A" => 7,
		"200A" => 6,
		"210A" => 5,
		"220A" => 7,
		"230A" => 7,
		"240A" => 8,
		"250A" => 6,
		"260A" => 5,
		"000B" => 6,
		"010B" => 7,
		"020B" => 6,
		"030B" => 3,
		"040B" => 2,
		"050B" => 9,
		"060B" => 4,
		"070B" => 5,
		"080B" => 8,
		"090B" => 6,
		"0A0B" => 7,
		"0B0B" => 5,
		"0C0B" => 9,
		"0D0B" => 8,
		"0E0B" => 8,
		"0F0B" => 8,
		"100B" => 5,
		"110B" => 4,
		"120B" => 3,
		"130B" => 7,
		"140B" => 7,
		"150B" => 6,
		"160B" => 4,
		"170B" => 5,
		"180B" => 7,
		"190B" => 6,
		"1A0B" => 5,
		"1B0B" => 7,
		"1C0B" => 4,
		"1D0B" => 3,
		"1E0B" => 8,
		"1F0B" => 7,
		"200B" => 7,
		"210B" => 5,
		"220B" => 6,
		"230B" => 8,
		"240B" => 7,
		"250B" => 3,
		"260B" => 3,
		"270B" => 3,
		"280B" => 7,
		"290B" => 6,
		"2A0B" => 5,
		"2B0B" => 5,
		"2C0B" => 6,
		"2D0B" => 6,
		"2E0B" => 7,
		"2F0B" => 8,
		"300B" => 8,
		"310B" => 8,
		"320B" => 8,
		"330B" => 2,
		"340B" => 3,
		"350B" => 2,
		"360B" => 5,
		"370B" => 6,
		"380B" => 4,
		"390B" => 4,
		"3A0B" => 8,
		"3B0B" => 7,
		"3C0B" => 8,
		"3D0B" => 7,
		"3E0B" => 7,
		"3F0B" => 6,
		"400B" => 8,
		"410B" => 6,
		"420B" => 8,
		"430B" => 5,
		"440B" => 6,
		"000C" => 8,
		"010C" => 7,
		"020C" => 6,
		"030C" => 6,
		"040C" => 7,
		"050C" => 6,
		"060C" => 7,
		"070C" => 8,
		"080C" => 6,
		"090C" => 4,
		"0A0C" => 8,
		"0B0C" => 5,
		"0C0C" => 4,
		"0D0C" => 8,
		"0E0C" => 7,
		"0F0C" => 4,
		"100C" => 5,
		"110C" => 8,
		"120C" => 5,
		"130C" => 7,
		"140C" => 8,
		"150C" => 6,
		"160C" => 4,
		"170C" => 4,
		"180C" => 3,
		"190C" => 6,
		"1A0C" => 8,
		"1B0C" => 6,
		"1C0C" => 6,
		"1D0C" => 8,
		"1E0C" => 5,
		"1F0C" => 7,
		"200C" => 6,
		"210C" => 7,
		"220C" => 7,
		"230C" => 8,
		"240C" => 4,
		"250C" => 5,
		"260C" => 6,
		"000D" => 3,
		"010D" => 3,
		"020D" => 1,
		"030D" => 3,
		"040D" => 6,
		"050D" => 2,
		"060D" => 5,
		"070D" => 5,
		"080D" => 8,
		"090D" => 6,
		"0A0D" => 5,
		"0B0D" => 1,
		"0C0D" => 2,
		"0D0D" => 2,
		"0E0D" => 3,
		"0F0D" => 4,
		"100D" => 6,
		"110D" => 9,
		"120D" => 3,
		"130D" => 3,
		"140D" => 3,
		"150D" => 3,
		"160D" => 4,
		"170D" => 7,
		"180D" => 2,
		"190D" => 2,
		"1A0D" => 2,
		"1B0D" => 2,
		"1C0D" => 2,
		"1D0D" => 2,
		"1E0D" => 2,
		"1F0D" => 6,
		"200D" => 2,
		"210D" => 3,
		"220D" => 3,
		"230D" => 2,
		"240D" => 2,
		"250D" => 2,
		"260D" => 2,
		"270D" => 2,
		"280D" => 2,
		"290D" => 2,
		"2A0D" => 2,
		"2B0D" => 6,
		"2C0D" => 7,
		"2D0D" => 3,
		"2E0D" => 3,
		"2F0D" => 3,
		"300D" => 3,
		"310D" => 3,
		"320D" => 3,
		"330D" => 3,
		"340D" => 6,
		"350D" => 6,
		"360D" => 6,
		"370D" => 6,
		"380D" => 4,
		"390D" => 3,
		"3A0D" => 4,
		"3B0D" => 3,
		"3C0D" => 6,
		"3D0D" => 6,
		"3E0D" => 6,
		"3F0D" => 6,
		"400D" => 6,
		"410D" => 6,
		"000E" => 5,
		"010E" => 7,
		"020E" => 5,
		"030E" => 6,
		"040E" => 5,
		"050E" => 4,
		"060E" => 5,
		"070E" => 6,
		"080E" => 5,
		"090E" => 6,
		"0A0E" => 6,
		"0B0E" => 8,
		"0C0E" => 5,
		"0D0E" => 5,
		"0E0E" => 5,
		"0F0E" => 6,
		"100E" => 3,
		"110E" => 7,
		"120E" => 4,
		"130E" => 4,
		"140E" => 6,
		"150E" => 5,
		"160E" => 7,
		"170E" => 2,
		"180E" => 6,
		"190E" => 7,
		"1A0E" => 4,
		"1B0E" => 6,
		"1C0E" => 8,
		"1D0E" => 7,
		"1E0E" => 6,
		"1F0E" => 6,
		"200E" => 5,
		"210E" => 7,
		"220E" => 7,
		"230E" => 7,
		"0100" => 9,
		"0200" => 7,
		"0300" => 8,
		"0400" => 10,
		"0500" => 10,
		"0600" => 9,
		"0700" => 8,
		"0800" => 9,
		"0900" => 9,
		"0A00" => 8,
		"0B00" => 7,
		"0C00" => 10,
		"0D00" => 6,
		"0E00" => 6,
		"0F00" => 8,
		"1000" => 6,
		"1100" => 9,
		"1200" => 7,
		"1300" => 7,
		"1400" => 8,
		"1500" => 7,
		"1600" => 6,
		"1700" => 5,
		"1800" => 5,
		"1900" => 7,
		"1A00" => 6,
		"1B00" => 9,
		"1C00" => 9,
		"1D00" => 8,
		"1E00" => 8,
		"1F00" => 9,
		"2000" => 8,
		"2100" => 8,
		"2200" => 8,
		"2300" => 8,
		"2400" => 8,
		"2500" => 6,
		"2600" => 9,
		"2700" => 11,
		"2800" => 11,
		"2900" => 5,
		"2A00" => 6,
		"2B00" => 6,
		"2C00" => 5,
		"2D00" => 9,
		"2E00" => 5,
		"2F00" => 8,
		"3000" => 7,
		"3100" => 8,
		"3200" => 7,
		"3300" => 7,
		"3400" => 6,
		"3500" => 7,
		"3600" => 7,
		"3700" => 7,
		"3800" => 6,
		"3900" => 8,
		"3A00" => 9,
		"3B00" => 8,
		"3C00" => 7,
		"3D00" => 9,
		"3E00" => 9,
		"3F00" => 4,
		"4000" => 7,
		"4100" => 8,
		"4200" => 6,
		"4300" => 7,
		"4400" => 7,
		"4500" => 10,
		"4600" => 10,
		"4700" => 10,
		"4800" => 9,
		"4900" => 10,
		"4A00" => 7,
		"4B00" => 8,
		"4C00" => 5,
		"4D00" => 6,
		"4E00" => 8,
		"4F00" => 8,
		"5000" => 7,
		"5100" => 9,
		"5200" => 8,
		"5300" => 9,
		"5400" => 5,
		"5500" => 6,
		"5600" => 4,
		"5700" => 7,
		"5800" => 6,
		"5900" => 3,
		"5A00" => 8,
		"5B00" => 8,
		"5C00" => 6,
		"5D00" => 7,
		"5E00" => 6,
		"5F00" => 4,
		"6000" => 7,
		"6100" => 5,
		"6200" => 6,
		"6300" => 7,
		"6400" => 7,
		"6500" => 9,
		"6600" => 9,
		"6700" => 9,
		"6800" => 6,
		"6900" => 7,
		"6A00" => 9,
		"6B00" => 9,
		"6C00" => 9,
		"6D00" => 7,
		"6E00" => 7,
		"6F00" => 7,
		"7000" => 6,
		"7100" => 7,
		"7200" => 7,
		"7300" => 10,
		"7400" => 6,
		"7500" => 6,
		"7600" => 7,
		"7700" => 7,
		"7800" => 6,
		"7900" => 7,
		"7A00" => 7,
		"7B00" => 7,
		"7C00" => 4,
		"7D00" => 10,
		"7E00" => 6,
		"7F00" => 6,
		"8000" => 6,
		"8100" => 8,
		"8200" => 8,
		"8300" => 6,
		"8400" => 5,
		"8500" => 5,
		"8600" => 8,
		"8700" => 7,
		"8800" => 7,
		"8900" => 7,
		"8A00" => 7,
		"8B00" => 7,
		"8C00" => 6,
		"8D00" => 8,
		"8E00" => 10,
		"8F00" => 7,
		"9000" => 8,
		"9100" => 6,
		"9200" => 7,
		"9300" => 7,
		"9400" => 9,
		"9500" => 9,
		"9600" => 6,
		"9700" => 3,
		"9800" => 9,
		"9900" => 7,
		"9A00" => 8,
		"9B00" => 9,
		"9C00" => 7,
		"9D00" => 10,
		"9E00" => 8,
		"9F00" => 8,
		"A000" => 10,
		"A100" => 7,
		"A200" => 6,
		"A300" => 8,
		"A400" => 7,
		"A500" => 6,
		"A600" => 6,
		"A700" => 8,
		"A800" => 7,
		"A900" => 6,
		"AA00" => 8,
		"AB00" => 7,
		"AC00" => 5,
		"AD00" => 6,
		"AE00" => 9,
		"AF00" => 6,
		"B000" => 7,
		"B100" => 4,
		"B200" => 4,
		"B300" => 6,
		"B400" => 7,
		"B500" => 8,
		"B600" => 9,
		"B700" => 6,
		"B800" => 9,
		"B900" => 9,
		"BA00" => 8,
		"BB00" => 6,
		"BC00" => 8,
		"BD00" => 8,
		"BE00" => 5,
		"BF00" => 7,
		"C000" => 8,
		"C100" => 5,
		"C200" => 6,
		"C300" => 8,
		"C400" => 6,
		"C500" => 7,
		"C600" => 7,
		"C700" => 8,
		"C800" => 10,
		"C900" => 5,
		"CA00" => 9,
		"CB00" => 8,
		"CC00" => 6,
		"CD00" => 10,
		"CE00" => 9,
		"CF00" => 6,
		"D000" => 7,
		"D100" => 8,
		"D200" => 8,
		"D300" => 8,
		"D400" => 6,
		"D500" => 7,
		"D600" => 9,
		"D700" => 7,
		"D800" => 9,
		"D900" => 8,
		"DA00" => 6,
		"DB00" => 8,
		"DC00" => 6,
		"DD00" => 9,
		"DE00" => 7,
		"DF00" => 8,
		"E000" => 9,
		"E100" => 8,
		"E200" => 7,
		"E300" => 8,
		"E400" => 8,
		"E500" => 8,
		"E600" => 7,
		"E700" => 6,
		"E800" => 7,
		"E900" => 8,
		"EA00" => 8,
		"EB00" => 8,
		"EC00" => 7,
		"ED00" => 8,
		"EE00" => 7,
		"EF00" => 6,
		"F000" => 5,
		"F100" => 7,
		"F200" => 7,
		"F300" => 6,
		"F400" => 5,
		"F500" => 7,
		"F600" => 7,
		"F700" => 7,
		"F800" => 9,
		"F900" => 5,
		"FA00" => 5,
		"FB00" => 6
    );
    }


    /**
     * Hardcoded Easy Chat length table for region 'i'.
     * Keys are 4-hex-digit EC codes, values are visible character lengths.
     */
    function bxt_easy_chat_length_table_i(): array
    {
        return array(

    );
    }


    /**
     * J -> non-J Easy Chat shortening (bytes only).
     *
     * Takes the original Easy Chat message bytes (2-byte codes with a 0x0000
     * terminator) and, using the destination region's Easy Chat length table:
     *
     *   - interprets each 2-byte code as one Easy Chat "word",
     *   - walks fixed adjacent pairs (w0,w1) -> (codes[0],codes[1]), (2,3), ...
     *   - if len(w0) + len(w1) > 17, drops the right-hand word by removing its
     *     2-byte code from the sequence,
     *   - never converts codes between tables; bytes are only ever shortened.
     */
    function bxt_shorten_easy_chat_bytes_for_nonj_message(string $bytes, string $sourceRegion, string $destRegion): string
    {

        $lengths = bxt_easy_chat_length_table_for_region($destRegion);
        if ($lengths === null) {
            return $bytes;
        }

        $len = strlen($bytes);
        if ($len < 2) {
            return $bytes;
        }

        // Extract Easy Chat codes up to the first 0x0000 terminator.
        $codes = [];
        for ($i = 0; $i + 1 < $len; $i += 2) {
            $lo = ord($bytes[$i]);
            $hi = ord($bytes[$i + 1]);
            if ($lo === 0 && $hi === 0) {
                break;
            }
            $codes[] = [$lo, $hi];
        }


        $numCodes = count($codes);
        // JP -> non-JP: source messages can have up to 6 words (3 pairs),
        // but non-JP games only ever show the first 4 words (2 pairs).
        // Enforce that here before we run any 17-character safety logic.
        if ($numCodes > 4) {
            $codes    = array_slice($codes, 0, 4);
            $numCodes = count($codes);
        }

        if ($numCodes === 0) {
            return $bytes;
        }

        // By default, keep all codes.
        $keep = array_fill(0, $numCodes, true);

        // Enforce the original Easy Chat layout semantics:
        // 4 words arranged as 2 lines of 2 words.
        // Treat the codes as (0,1), (2,3), ... line-pairs.
        // For each pair, if the combined visible length of the two words
        // would exceed 17 characters in the destination region, drop only
        // the right-hand word from that pair. This keeps the left word and
        // preserves the 2-words-per-line structure while respecting the
        // 17-character cap.
        for ($i = 0; $i < $numCodes; $i += 2) {
            $left  = $codes[$i];
            $right = ($i + 1 < $numCodes) ? $codes[$i + 1] : null;

            $hexL  = sprintf('%02X%02X', $left[0], $left[1]);
            $lenL  = $lengths[$hexL] ?? 0;

            if ($right === null) {
                // Single word line; nothing more to check.
                continue;
            }

            $hexR = sprintf('%02X%02X', $right[0], $right[1]);
            $lenR = $lengths[$hexR] ?? 0;

            // If combined visible characters exceed 17, drop the right-hand word.
            $sumLen = $lenL + $lenR;
            if ($sumLen > 17) {
                $keep[$i + 1] = false;
            }
        }

        // Rebuild shortened byte string from kept codes.
        $out = '';
        for ($i = 0; $i < $numCodes; $i++) {
            if ($keep[$i]) {
                $out .= chr($codes[$i][0]) . chr($codes[$i][1]);
            }
        }

        // Always append a 0x0000 terminator.
        $out .= "\x00\x00";


        return $out;
    }

function bxt_collapse_easy_chat_pairs_for_nonj(string $asciiText): string
    {
        $asciiText = trim($asciiText);
        if ($asciiText === '') {
            return $asciiText;
        }

        $words = preg_split('/\s+/', $asciiText);
        if (!is_array($words) || !$words) {
            return $asciiText;
        }

        $result = [];
        $n      = count($words);

        for ($i = 0; $i < $n; $i += 2) {
            $left  = $words[$i];
            $right = $words[$i + 1] ?? null;

            // No partner: just keep the left word.
            if ($right === null) {
                if ($left !== '') {
                    $result[] = $left;
                }
                break;
            }

            $lenL = mb_strlen($left,  'UTF-8');
            $lenR = mb_strlen($right, 'UTF-8');

            // If combined visible chars > 17, drop the right-hand word.
            if ($lenL + $lenR > 17) {
                if ($left !== '') {
                    $result[] = $left;
                }
            } else {
                if ($left !== '') {
                    $result[] = $left;
                }
                if ($right !== '') {
                    $result[] = $right;
                }
            }
        }

        $collapsed = implode(' ', $result);


        return $collapsed;
    }


    function bxt_en_to_jp_katakana(string $en, int $maxChars = 5): string
    {
        static $map3 = null;
        static $map2 = null;
        static $map1 = null;

        if ($map1 === null) {
                        $map3 = [
                'KYA' => 'キャ',
                'KYU' => 'キュ',
                'KYO' => 'キョ',
                'SHA' => 'シャ',
                'SHI' => 'シ',
                'SHU' => 'シュ',
                'SHO' => 'ショ',
                'CHA' => 'チャ',
                'CHI' => 'チ',
                'CHU' => 'チュ',
                'CHO' => 'チョ',
                'NYA' => 'ニャ',
                'NYU' => 'ニュ',
                'NYO' => 'ニョ',
                'HYA' => 'ヒャ',
                'HYU' => 'ヒュ',
                'HYO' => 'ヒョ',
                'MYA' => 'ミャ',
                'MYU' => 'ミュ',
                'MYO' => 'ミョ',
                'RYA' => 'リャ',
                'RYU' => 'リュ',
                'RYO' => 'リョ',
                'GYA' => 'ギャ',
                'GYU' => 'ギュ',
                'GYO' => 'ギョ',
                'BYA' => 'ビャ',
                'BYU' => 'ビュ',
                'BYO' => 'ビョ',
                'PYA' => 'ピャ',
                'PYU' => 'ピュ',
                'PYO' => 'ピョ',
                'TSU' => 'ツ',
                'LLI' => 'リ',
                'LLY' => 'リ',
                'RRY' => 'リ',
                'MMY' => 'ミ',
                'DDY' => 'ディ',
            ];

                        $map2 = [
                'TSU' => 'ツ',
                'PEE' => 'ピ',
                'BEE' => 'ビ',
                'REE' => 'リ',
                'THE' => 'テ',
                'JA' => 'ジャ',
                'JE' => 'ジェ',
                'JI' => 'ジ',
                'JO' => 'ジョ',
                'JU' => 'ジュ',
                'FA' => 'ファ',
                'FI' => 'フィ',
                'FE' => 'フェ',
                'FO' => 'フォ',
                'FU' => 'フ',
                'WI' => 'ウィ',
                'WE' => 'ウェ',
                'WO' => 'ウォ',
                'TI' => 'ティ',
                'DI' => 'ディ',
                'TU' => 'トゥ',
                'DU' => 'ドゥ',
                'SI' => 'シ',
                'ZI' => 'ジ',
                'MY' => 'ミ',
                'DY' => 'ディ',
                'KA' => 'カ',
                'KI' => 'キ',
                'KU' => 'ク',
                'KE' => 'ケ',
                'KO' => 'コ',
                'SA' => 'サ',
                'SU' => 'ス',
                'SE' => 'セ',
                'SO' => 'ソ',
                'TA' => 'タ',
                'TE' => 'テ',
                'TO' => 'ト',
                'NA' => 'ナ',
                'NI' => 'ニ',
                'NU' => 'ヌ',
                'NE' => 'ネ',
                'NO' => 'ノ',
                'HA' => 'ハ',
                'HI' => 'ヒ',
                'HE' => 'ヘ',
                'HO' => 'ホ',
                'MA' => 'マ',
                'MI' => 'ミ',
                'MU' => 'ム',
                'ME' => 'メ',
                'MO' => 'モ',
                'YA' => 'ヤ',
                'YU' => 'ユ',
                'YO' => 'ヨ',
                'RA' => 'ラ',
                'RI' => 'リ',
                'RU' => 'ル',
                'RE' => 'レ',
                'RO' => 'ロ',
                'WA' => 'ワ',
                'LA' => 'ラ',
                'LI' => 'リ',
                'LY' => 'リ',
                'LU' => 'ル',
                'LE' => 'レ',
                'LO' => 'ロ',
                'RY' => 'リ',
                'BA' => 'バ',
                'BE' => 'ベ',
                'BO' => 'ボ',
                'CK' => 'ク',
                'CH' => 'ク',
                'TH' => 'ス',
                'GA' => 'ガ',
                'GI' => 'ギ',
                'GU' => 'グ',
                'GE' => 'ゲ',
                'GO' => 'ゴ',
                'ZA' => 'ザ',
                'ZU' => 'ズ',
                'ZE' => 'ゼ',
                'ZO' => 'ゾ',
                'DA' => 'ダ',
                'DE' => 'デ',
                'DO' => 'ド',
                'BI' => 'ビ',
                'BU' => 'ブ',
                'VA' => 'ヴァ',
                'VI' => 'ヴィ',
                'VU' => 'ヴ',
                'VE' => 'ヴェ',
                'VO' => 'ヴォ',
                'PA' => 'パ',
                'PI' => 'ピ',
                'PU' => 'プ',
                'PE' => 'ペ',
                'PO' => 'ポ',
            ];

                        $map1 = [
                'A' => 'ア',
                'I' => 'イ',
                'U' => 'ウ',
                'E' => 'エ',
                'O' => 'オ',
                'B' => 'ブ',
                'C' => 'ク',
                'D' => 'ド',
                'F' => 'フ',
                'G' => 'グ',
                'H' => 'ハ',
                'J' => 'ジ',
                'K' => 'ク',
                'L' => 'ル',
                'M' => 'ム',
                'N' => 'ン',
                'P' => 'プ',
                'Q' => 'ク',
                'R' => 'ル',
                'S' => 'ス',
                'T' => 'タ',
                'V' => 'ヴ',
                'W' => 'ウ',
                'X' => 'ク',
                'Y' => 'イ',
                'Z' => 'ズ',
            ];
        }

                $en = strtoupper($en);

        // Keep only A-Z, digits, space, and a small punctuation set
        $filtered = '';
        $lenInput = strlen($en);
        for ($idx = 0; $idx < $lenInput; $idx++) {
            $c = $en[$idx];
            if (
                $c === ' ' ||
                $c === '!' ||
                $c === '.' ||
                $c === '/' ||
                $c === '?' ||
                ($c >= '0' && $c <= '9') ||
                ($c >= 'A' && $c <= 'Z')
            ) {
                $filtered .= $c;
            }
        }
        $en = $filtered;

        if ($en === '' || $maxChars <= 0) {
            return '';
        }

        $chars = str_split($en);
        $len   = count($chars);
        $out   = [];
        $i     = 0;

        while ($i < $len && count($out) < $maxChars) {
            $ch = $chars[$i];

            // Preserve digits and basic punctuation as-is
            if (
                ($ch >= '0' && $ch <= '9') ||
                $ch === ' ' ||
                $ch === '!' ||
                $ch === '.' ||
                $ch === '/' ||
                $ch === '?'
            ) {
                $out[] = $ch;
                $i++;
                continue;
            }

            $remaining = $len - $i;

            if ($remaining >= 3) {
                $tri = $chars[$i] . $chars[$i + 1] . $chars[$i + 2];
                if (isset($map3[$tri])) {
                    $out[] = $map3[$tri];
                    $i += 3;
                    continue;
                }
            }

            if ($remaining >= 2) {
                $di = $chars[$i] . $chars[$i + 1];
                if (isset($map2[$di])) {
                    $out[] = $map2[$di];
                    $i += 2;
                    continue;
                }
            }

            $ch = $chars[$i];
            $out[] = $map1[$ch] ?? 'ア';
            $i++;
        }

$kana = implode('', $out);
        // Enforce maxChars on actual characters that will be encoded,
        // not on the internal segment count.
        if (mb_strlen($kana, 'UTF-8') > $maxChars) {
            $kana = mb_substr($kana, 0, $maxChars, 'UTF-8');
        }

        return $kana;
    }

    /**
     * EN -> JP transliteration entry point (katakana) with normalisation.
     */
    function bxt_transliterate_en_to_jp_name(string $en, int $maxChars = 5): string
    {
        $norm = bxt_normalise_latin_for_jp($en);
        return bxt_en_to_jp_katakana($norm, $maxChars);
    }

    /**
     * Trim trailing terminators (0x50, 0x00) from a binary name.
     */
    function bxt_trim_name_bytes(string $bytes): string
    {
        return rtrim($bytes, "\x50\x00");
    }

    /**
     * Load the default Pokémon name bytes for a given region/species.
     */
    
function bxt_load_default_pokemon_name_bytes(
        string $region,
        int $species
    ): ?string {
        // Map regions and species to existing btx*_pokemon_species tables in
        // bxt_encoding.json. This avoids any need to change the JSON itself.
        $cfg    = bxt_load_encoding_json_safe();
        $region = strtolower($region);

        $speciesKey = (string)$species;
        $speciesTableKey = null;
        $nameTableId = null;

        if ($region === 'j') {
            $speciesTableKey = 'btxj_pokemon_species';
            $nameTableId     = 'jp';
        } else {
            switch ($region) {
                case 'e':
                case 'p':
                case 'u':
                case 's':
                case 'i':
                    $speciesTableKey = 'btxe_btxp_btxu_btxs_btxi_pokemon_species';
                    break;
                case 'f':
                    $speciesTableKey = 'btxf_pokemon_species';
                    break;
                case 'd':
                    $speciesTableKey = 'btxd_pokemon_species';
                    break;
                default:
                    return null;
            }
            $nameTableId = bxt_name_table_for_region($region);
        }

        if ($speciesTableKey === null || $nameTableId === null) {
            return null;
        }

        $table = null;
        if (isset($cfg[$speciesTableKey]) && is_array($cfg[$speciesTableKey])) {
            $table = $cfg[$speciesTableKey];
        } else {
            if (function_exists('bxt_hardcoded_encoding_table')) {
                $table = bxt_hardcoded_encoding_table($speciesTableKey);
            }
            if (!is_array($table)) {
                return null;
            }
        }
        if (!isset($table[$speciesKey]) || !is_string($table[$speciesKey])) {
            return null;
        }

        $nameText = trim($table[$speciesKey]);
        if ($nameText === '') {
            return null;
        }

        // Encode default species name using the correct name table. The caller
        // will trim/pad to the exact nickname length (5 for JP, 10 for others).
        $maxLen = ($region === 'j') ? 5 : 10;
        $bytes = bxt_simple_encode_text_to_bytes($nameText, $nameTableId, $maxLen);
        if (!is_string($bytes) || $bytes === '') {
            return null;
        }

        return $bytes;
    }


    /**
     * Is nickname exactly default name for species in source region?
     */
    function bxt_is_default_pokemon_name(
        string $sourceRegion,
        int $species,
        string $nicknameBytes
    ): bool {

        $default = bxt_load_default_pokemon_name_bytes($sourceRegion, $species);
        if ($default === null) {
            return false;
        }

        // First, try a strict byte-level comparison after trimming padding.
        $nickTrim = bxt_trim_name_bytes($nicknameBytes);
        $defTrim  = bxt_trim_name_bytes($default);
        if ($nickTrim === '') {
            return false;
        }
        if ($nickTrim === $defTrim) {
            return true;
        }

        // Fallback: compare decoded text, which is more robust for JP names that
        // may be encoded with slightly different byte sequences but display the
        // same characters (e.g., カビゴン vs default table entry).
        $tableId = null;
        $src = strtolower($sourceRegion);
        if ($src === 'j') {
            $tableId = 'jp';
        } else {
            $tableId = bxt_name_table_for_region($src);
        }
        if ($tableId === null) {
            return false;
        }

        $nickText = bxt_simple_decode_bytes_to_text($nickTrim, $tableId);
        $defText  = bxt_simple_decode_bytes_to_text($defTrim, $tableId);

        if ($nickText !== '' && $nickText === $defText) {
            return true;
        }

        return false;
    }

    /**
     * If nickname is default in source, map to default in dest (if available).
     */
    function bxt_convert_default_pokemon_name_between_regions(
        string $sourceRegion,
        string $destRegion,
        int $species,
        string $nicknameBytes
    ): ?string {
        if (!bxt_is_default_pokemon_name($sourceRegion, $species, $nicknameBytes)) {
            return null;
        }

        $destDefault = bxt_load_default_pokemon_name_bytes($destRegion, $species);
        if ($destDefault === null) {
            return null;
        }

        return $destDefault;
    }

    /**
     * Convert Pokémon nickname for cross-region download, with default-name check.
     *
     * $destRegion: game that is downloading
     * $sourceRegion: region letter stored in DB for this row
     */
    function bxt_convert_pokemon_name_for_download(
        string $destRegion,
        string $sourceRegion,
        int $species,
        string $nicknameBytes,
        int $destMaxBytes
    ): string {
        $destRegion   = strtolower($destRegion);
        $sourceRegion = strtolower($sourceRegion);

        $mappedDefault = bxt_convert_default_pokemon_name_between_regions(
            $sourceRegion,
            $destRegion,
            $species,
            $nicknameBytes
        );
        if ($mappedDefault !== null) {
            $buf = $mappedDefault;
            if (strlen($buf) > $destMaxBytes) {
                $buf = substr($buf, 0, $destMaxBytes);
            }
            while (strlen($buf) < $destMaxBytes) {
                $buf .= "\x50";
            }
            return $buf;
        }

        $isSourceJ = ($sourceRegion === 'j');
        $isDestJ   = ($destRegion === 'j');

        if ($isSourceJ && !$isDestJ) {
            $jpText = bxt_simple_decode_bytes_to_text($nicknameBytes, 'jp');
            if ($jpText === '') {
                return $nicknameBytes;
            }

            $ascii = bxt_transliterate_jp_to_en_name($jpText, $destMaxBytes);

            $tableId = bxt_name_table_for_region($destRegion);
            if ($tableId === null) {
                return $nicknameBytes;
            }

            return bxt_simple_encode_text_to_bytes($ascii, $tableId, $destMaxBytes);
        }

        if (!$isSourceJ && $isDestJ) {
            $srcTable = bxt_name_table_for_region($sourceRegion);
            if ($srcTable === null) {
                return $nicknameBytes;
            }

            $plain = bxt_simple_decode_bytes_to_text($nicknameBytes, $srcTable);
            if ($plain === '') {
                return $nicknameBytes;
            }

            $plain = bxt_normalise_latin_for_jp($plain);
            $katakana = bxt_transliterate_en_to_jp_name($plain, $destMaxBytes);
            if ($katakana === '') {
                return $nicknameBytes;
            }

            return bxt_simple_encode_text_to_bytes($katakana, 'jp', $destMaxBytes);
        }

        return $nicknameBytes;
    }

    /**
     * Generic player-name conversion (no species).
     */
    function bxt_convert_player_name_for_download(
        string $destRegion,
        string $sourceRegion,
        string $nameBytes,
        int $destMaxBytes
    ): string {
        $sourceRegion = strtolower($sourceRegion);
        $destRegion   = strtolower($destRegion);

        $isSourceJ = ($sourceRegion === 'j');
        $isDestJ   = ($destRegion === 'j');

        if ($sourceRegion === $destRegion) {
            $buf = $nameBytes;
            if (strlen($buf) > $destMaxBytes) {
                $buf = substr($buf, 0, $destMaxBytes);
            }
            while (strlen($buf) < $destMaxBytes) {
                $buf .= "\x50";
            }
            return $buf;
        }

        if ($isSourceJ && !$isDestJ) {
            $jpText = bxt_simple_decode_bytes_to_text($nameBytes, 'jp');
            if ($jpText === '') {
                return $nameBytes;
            }

            $ascii = bxt_transliterate_jp_to_en_name($jpText, $destMaxBytes);

            $tableId = bxt_name_table_for_region($destRegion);
            if ($tableId === null) {
                return $nameBytes;
            }

            return bxt_simple_encode_text_to_bytes($ascii, $tableId, $destMaxBytes);
        }

        if (!$isSourceJ && $isDestJ) {
            $srcTable = bxt_name_table_for_region($sourceRegion);
            if ($srcTable === null) {
                return $nameBytes;
            }

            $plain = bxt_simple_decode_bytes_to_text($nameBytes, $srcTable);
            if ($plain === '') {
                return $nameBytes;
            }

            $plain    = bxt_normalise_latin_for_jp($plain);
            $katakana = bxt_transliterate_en_to_jp_name($plain, $destMaxBytes);
            if ($katakana === '') {
                return $nameBytes;
            }

            return bxt_simple_encode_text_to_bytes($katakana, 'jp', $destMaxBytes);
        }

        // non-J <-> non-J
        $buf = $nameBytes;
        if (strlen($buf) > $destMaxBytes) {
            $buf = substr($buf, 0, $destMaxBytes);
        }
        while (strlen($buf) < $destMaxBytes) {
            $buf .= "\x50";
        }
        return $buf;
    }

    /**
     * Transform a single ranking row for cross-region download.
     *
     * Used by news.php for bxt_ranking.
     */
    function bxt_transform_ranking_row_for_download(
        string $downloadRegion,
        array $row
    ): array {
        $downloadRegion = strtolower($downloadRegion);
        $sourceRegion   = strtolower($row['game_region'] ?? $downloadRegion);

        $isSourceJ = ($sourceRegion === 'j');
        $isDestJ   = ($downloadRegion === 'j');


        if (isset($row['player_region']) &&
            $sourceRegion !== $downloadRegion &&
            is_numeric($row['player_region'])) {
            $row['player_region'] = bxt_map_player_region_for_download(
                $downloadRegion,
                $sourceRegion,
                (int)$row['player_region']
            );
        }

        if (isset($row['player_zip']) && $sourceRegion !== $downloadRegion) {
            $row['player_zip'] = bxt_sanitise_zip_for_cross_region($row['player_zip']);
        }

        
        // J -> non-J: shorten Easy Chat message bytes only (no code conversion)
        // - Message: when source is JP and destination is non-J, interpret the
        //   JP Easy Chat codes using the destination region's Easy Chat length
        //   table and, for each adjacent word pair, if their combined visible
        //   length exceeds 17 characters, drop the right-hand word's code. The
        //   underlying Easy Chat codes are never rewritten between tables, only
        //   shortened.
        if (!$isDestJ && $isSourceJ) {
            // Japanese source -> non-Japanese destination:
            // we currently do not have a robust Easy Chat word mapping between JP and non-J.
            // To avoid garbage like "WEEPINBELL WEEPINBELL WEEPINBELL" appearing on
            // non-J cartridges when they see unknown JP Easy Chat words, we replace
            // all JP Easy Chat messages with a safe fallback sequence of known words.
            //
            // 0x0046 is a valid Easy Chat entry in the non-J tables (seen in existing
            // non-J ghost data as a filler-like word), so using it repeatedly produces
            // a harmless generic phrase instead of unknown-word placeholders.
            $fallbackEasyChat = str_repeat(pack('n', 0x0046), 6); // 6 words, matches JP message length

            // Run the non-J safety shortening on the fallback so JP 6-word messages
            // become safe 4-word / 2-word-per-line messages for non-J games.
            $safeFallback = $fallbackEasyChat;
            if (function_exists('bxt_shorten_easy_chat_bytes_for_nonj_message')) {
                $safeFallback = bxt_shorten_easy_chat_bytes_for_nonj_message(
                    $fallbackEasyChat,
                    $sourceRegion,
                    $downloadRegion
                );
            }

            // Replace all battle messages with the safe fallback (already shortened).
            foreach (['msg_start', 'msg_win', 'msg_lose'] as $key) {
                if (isset($row[$key]) && is_string($row[$key])) {
                    $row[$key] = $safeFallback;
                }
            }

            // Still apply the non-J safety shortening for any generic player_message field
            // if it exists in this row.
            if (isset($row['player_message']) && is_string($row['player_message'])) {
                $row['player_message'] = bxt_shorten_easy_chat_bytes_for_nonj_message(
                    $row['player_message'],
                    $sourceRegion,
                    $downloadRegion
                );
            }
        }

        // Name: JP -> non-J romanisation (7-byte field) remains JP-specific.
        if (!$isDestJ && $isSourceJ) {
            if (isset($row['player_name']) && is_string($row['player_name'])) {
                $jpText  = bxt_simple_decode_bytes_to_text($row['player_name'], 'jp');
                if ($jpText !== '') {
                    $asciiName = bxt_transliterate_jp_to_en_name($jpText, 7);
                    $tableId   = bxt_name_table_for_region($downloadRegion);
                    if ($tableId !== null) {
                        $row['player_name'] = bxt_simple_encode_text_to_bytes(
                            $asciiName,
                            $tableId,
                            7
                        );
                    }
                }
            }
        }

        // non-J -> J: pad message
        // to 12 bytes, EN->JP for name (5-byte field)
        if ($isDestJ && !$isSourceJ) {
            if (isset($row['player_message']) && is_string($row['player_message'])) {
                $msg = substr($row['player_message'], 0, 12);
                $msg = str_pad($msg, 12, "\x00");
                $row['player_message'] = $msg;
            }

            if (isset($row['player_name']) && is_string($row['player_name'])) {
                $srcTable = bxt_name_table_for_region($sourceRegion);
                if ($srcTable !== null) {
                    $enText = bxt_simple_decode_bytes_to_text($row['player_name'], $srcTable);
                    if ($enText !== '') {
                        $enText   = bxt_normalise_latin_for_jp($enText);
                        $katakana = bxt_transliterate_en_to_jp_name($enText, 5);
                        if ($katakana !== '') {
                            $row['player_name'] = bxt_simple_encode_text_to_bytes(
                                $katakana,
                                'jp',
                                5
                            );
                        }
                    }
                }
            }
        }

        return $row;
    }

    /**
     * Transform a single Battle Tower Pokémon blob for cross-region download.
     *
     * In bxt_battle_tower_trainers:
     *   - species: first byte
     *   - nickname bytes: offset 30.. (10-byte segment; JP uses first 5 bytes)
     */
    function bxt_transform_battle_tower_pokemon_blob_for_download(
        string $downloadRegion,
        string $sourceRegion,
        string $blob
    ): string {
        $downloadRegion = strtolower($downloadRegion);
        $sourceRegion   = strtolower($sourceRegion);

        // Battle Tower Pokémon blobs are 59 bytes; require enough space.
        if (!is_string($blob) || strlen($blob) < 59) {
            return $blob;
        }

        // Same-region: no conversion required.
        if ($downloadRegion === $sourceRegion) {
            return $blob;
        }

        // Only handle JP <-> non-J conversions.
        if ($downloadRegion !== 'j' && $sourceRegion !== 'j') {
            return $blob;
        }

        // Species index is the first byte of the blob.
        $species = ord($blob[0]);

        // Nickname segment for Battle Tower blobs:
        // - starts at offset 48 (0x30)
        // - length 10 bytes (full EN nickname capacity)
        $nameOffset     = 48;
        $nameSegmentLen = 10;

        if (strlen($blob) < $nameOffset + $nameSegmentLen) {
            return $blob;
        }

        $nameBytesSegment = substr($blob, $nameOffset, $nameSegmentLen);

        // Destination nickname length: use the full 10-byte field.
        $destMax = $nameSegmentLen;


        // Battle Tower rule:
        //   - If the JP nickname is exactly the default species name in the
        //     source region, use the destination region's default name.
        //   - Otherwise, preserve the nickname semantics by romanising JP
        //     custom names into the destination encoding.
        $converted = $nameBytesSegment;


        // 1) If nickname is exactly default in the source region, map to dest default.
        if (function_exists('bxt_convert_default_pokemon_name_between_regions') &&
            function_exists('bxt_is_default_pokemon_name') &&
            bxt_is_default_pokemon_name($sourceRegion, $species, $nameBytesSegment)) {

            $mappedDefault = bxt_convert_default_pokemon_name_between_regions(
                $sourceRegion,
                $downloadRegion,
                $species,
                $nameBytesSegment
            );
            if ($mappedDefault !== null) {
                $converted = $mappedDefault;
            }
        }

        // 2) If still unchanged and source is JP, romanise custom nickname into dest.
        if (($converted === '' || $converted === $nameBytesSegment) &&
            $sourceRegion === 'j' &&
            function_exists('bxt_transliterate_jp_to_en_name')) {

            $jpNickname = bxt_simple_decode_bytes_to_text($nameBytesSegment, 'jp');
            if ($jpNickname !== '') {
                $roman = bxt_transliterate_jp_to_en_name($jpNickname, $destMax);
                if (is_string($roman) && $roman !== '') {
                    $tableId = bxt_name_table_for_region($downloadRegion);
                    if ($tableId !== null) {
                        $converted = bxt_simple_encode_text_to_bytes($roman, $tableId, $destMax);
                    }
                }
            }
        }

        // 3) Fallback: if still unchanged, try destination default species name.
        if (($converted === '' || $converted === $nameBytesSegment) &&
            function_exists('bxt_load_default_pokemon_name_bytes')) {

            $destDefault = bxt_load_default_pokemon_name_bytes($downloadRegion, $species);
            if (is_string($destDefault) && $destDefault !== '') {
                $converted = $destDefault;
            }
        }

        // Final safety: if we *still* have nothing useful, leave the blob as-is.
        if (!is_string($converted) || $converted === '') {
            return $blob;
        }

        // Normalise converted name to exactly destMax bytes, padding with 0x50.
        if (strlen($converted) > $destMax) {
            $converted = substr($converted, 0, $destMax);
        }
        while (strlen($converted) < $destMax) {
            $converted .= "\x50";
        }

        $prefix = substr($blob, 0, $nameOffset);
        $suffix = substr($blob, $nameOffset + $nameSegmentLen);

        return $prefix . $converted . $suffix;
    }


    /**
     * Transform a Battle Tower trainer row for cross-region download.
     */
    function bxt_transform_battle_tower_trainer_for_download(
        string $downloadRegion,
        array $row
    ): array {
        $downloadRegion = strtolower($downloadRegion);
        $sourceRegion   = strtolower($row['game_region'] ?? $downloadRegion);

        $isDestJ   = ($downloadRegion === 'j');
        $isSourceJ = ($sourceRegion === 'j');



        if ($downloadRegion !== $sourceRegion) {
        }

        // Same-region: nothing to do.
        if ($downloadRegion === $sourceRegion) {
            return $row;
        }

        // Only JP <-> non-J transitions.
        if ($downloadRegion !== 'j' && $sourceRegion !== 'j') {
            return $row;
        }

        // Trainer name
        if (isset($row['name']) && is_string($row['name']) &&
            function_exists('bxt_convert_player_name_for_download')) {
            $destMax = ($downloadRegion === 'j') ? 5 : 7;
            $row['name'] = bxt_convert_player_name_for_download(
                $downloadRegion,
                $sourceRegion,
                $row['name'],
                $destMax
            );
        }

        // Pokémon blobs: convert nickname segments per-Pokémon.
        foreach (['pokemon1', 'pokemon2', 'pokemon3'] as $pkField) {
            if (isset($row[$pkField]) && is_string($row[$pkField])) {
                $row[$pkField] = bxt_transform_battle_tower_pokemon_blob_for_download(
                    $downloadRegion,
                    $sourceRegion,
                    $row[$pkField]
                );
            }
        }

        // J -> non-J: shorten Easy Chat Battle Tower trainer messages
        // using the same 17-char pair rule as other ranking messages.
        if (!$isDestJ && $isSourceJ) {
            foreach (['msg_start', 'msg_win', 'msg_lose'] as $msgKey) {
                if (isset($row[$msgKey]) && is_string($row[$msgKey])) {
                    $row[$msgKey] = bxt_shorten_easy_chat_bytes_for_nonj_message(
                        $row[$msgKey],
                        $downloadRegion
                    );
                }
            }
        }

        return $row;
    }